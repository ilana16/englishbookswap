var Nd=Object.defineProperty;var Un=e=>{throw TypeError(e)};var Cd=(e,t,r)=>t in e?Nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Wn=(e,t,r)=>Cd(e,typeof t!="symbol"?t+"":t,r),Go=(e,t,r)=>t.has(e)||Un("Cannot "+r);var N=(e,t,r)=>(Go(e,t,"read from private field"),r?r.call(e):t.get(e)),V=(e,t,r)=>t.has(e)?Un("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),D=(e,t,r,o)=>(Go(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r),J=(e,t,r)=>(Go(e,t,"access private method"),r);var Zr=(e,t,r,o)=>({set _(n){D(e,t,n,r)},get _(){return N(e,t,o)}});import{r as d,a as Nr,e as O,G as qa,R as jd,u as Gt,L as re,b as ko,c as kd,B as Ed,d as Rd,f as Ze}from"./react-BJYKswz0.js";import{i as Td,g as Ad,a as Pd,b as Md,s as Id,c as Od,d as je,e as st,f as be,q as Pe,w as Me,h as Ie,j as Ld,k as _d,G as Dd,l as Fd,o as Ka,m as Le,n as Vr,p as Xs,u as ms,r as Ya,t as Bd,v as $d,_ as vt,x as Qa,y as Hd,z as Ud,A as Wd,B as zd,C as Vd,D as Gd,E as zn,F as qd}from"./firebase-DJaRE29K.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var Xa={exports:{}},Eo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=d,Yd=Symbol.for("react.element"),Qd=Symbol.for("react.fragment"),Xd=Object.prototype.hasOwnProperty,Jd=Kd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zd={key:!0,ref:!0,__self:!0,__source:!0};function Ja(e,t,r){var o,n={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(o in t)Xd.call(t,o)&&!Zd.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)n[o]===void 0&&(n[o]=t[o]);return{$$typeof:Yd,type:e,key:a,ref:i,props:n,_owner:Jd.current}}Eo.Fragment=Qd;Eo.jsx=Ja;Eo.jsxs=Ja;Xa.exports=Eo;var s=Xa.exports,Za,Vn=Nr;Za=Vn.createRoot,Vn.hydrateRoot;const eu=1,tu=1e6;let qo=0;function ru(){return qo=(qo+1)%Number.MAX_SAFE_INTEGER,qo.toString()}const Ko=new Map,Gn=e=>{if(Ko.has(e))return;const t=setTimeout(()=>{Ko.delete(e),Lr({type:"REMOVE_TOAST",toastId:e})},tu);Ko.set(e,t)},ou=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,eu)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Gn(r):e.toasts.forEach(o=>{Gn(o.id)}),{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,open:!1}:o)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},fo=[];let ho={toasts:[]};function Lr(e){ho=ou(ho,e),fo.forEach(t=>{t(ho)})}function ye({...e}){const t=ru(),r=n=>Lr({type:"UPDATE_TOAST",toast:{...n,id:t}}),o=()=>Lr({type:"DISMISS_TOAST",toastId:t});return Lr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:n=>{n||o()}}}),{id:t,dismiss:o,update:r}}function su(){const[e,t]=d.useState(ho);return d.useEffect(()=>(fo.push(t),()=>{const r=fo.indexOf(t);r>-1&&fo.splice(r,1)}),[e]),{...e,toast:ye,dismiss:r=>Lr({type:"DISMISS_TOAST",toastId:r})}}function z(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e==null||e(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function nu(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ei(...e){return t=>e.forEach(r=>nu(r,t))}function fe(...e){return d.useCallback(ei(...e),e)}function au(e,t=[]){let r=[];function o(a,i){const l=d.createContext(i),c=r.length;r=[...r,i];function u(h){const{scope:f,children:g,...v}=h,p=(f==null?void 0:f[e][c])||l,x=d.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:x,children:g})}function m(h,f){const g=(f==null?void 0:f[e][c])||l,v=d.useContext(g);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,m]}const n=()=>{const a=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[o,iu(n,...t)]}function iu(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=o.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var xr=d.forwardRef((e,t)=>{const{children:r,...o}=e,n=d.Children.toArray(r),a=n.find(lu);if(a){const i=a.props.children,l=n.map(c=>c===a?d.Children.count(i)>1?d.Children.only(null):d.isValidElement(i)?i.props.children:null:c);return s.jsx(ps,{...o,ref:t,children:d.isValidElement(i)?d.cloneElement(i,void 0,l):null})}return s.jsx(ps,{...o,ref:t,children:r})});xr.displayName="Slot";var ps=d.forwardRef((e,t)=>{const{children:r,...o}=e;if(d.isValidElement(r)){const n=du(r);return d.cloneElement(r,{...cu(o,r.props),ref:t?ei(t,n):n})}return d.Children.count(r)>1?d.Children.only(null):null});ps.displayName="SlotClone";var ti=({children:e})=>s.jsx(s.Fragment,{children:e});function lu(e){return d.isValidElement(e)&&e.type===ti}function cu(e,t){const r={...t};for(const o in t){const n=e[o],a=t[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...l)=>{a(...l),n(...l)}:n&&(r[o]=n):o==="style"?r[o]={...n,...a}:o==="className"&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}function du(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Js(e){const t=e+"CollectionProvider",[r,o]=au(t),[n,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:v,children:p}=g,x=O.useRef(null),y=O.useRef(new Map).current;return s.jsx(n,{scope:v,itemMap:y,collectionRef:x,children:p})};i.displayName=t;const l=e+"CollectionSlot",c=O.forwardRef((g,v)=>{const{scope:p,children:x}=g,y=a(l,p),b=fe(v,y.collectionRef);return s.jsx(xr,{ref:b,children:x})});c.displayName=l;const u=e+"CollectionItemSlot",m="data-radix-collection-item",h=O.forwardRef((g,v)=>{const{scope:p,children:x,...y}=g,b=O.useRef(null),w=fe(v,b),S=a(u,p);return O.useEffect(()=>(S.itemMap.set(b,{ref:b,...y}),()=>void S.itemMap.delete(b))),s.jsx(xr,{[m]:"",ref:w,children:x})});h.displayName=u;function f(g){const v=a(e+"CollectionConsumer",g);return O.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((S,j)=>y.indexOf(S.ref.current)-y.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:c,ItemSlot:h},f,o]}function Cr(e,t=[]){let r=[];function o(a,i){const l=d.createContext(i),c=r.length;r=[...r,i];const u=h=>{var y;const{scope:f,children:g,...v}=h,p=((y=f==null?void 0:f[e])==null?void 0:y[c])||l,x=d.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:x,children:g})};u.displayName=a+"Provider";function m(h,f){var p;const g=((p=f==null?void 0:f[e])==null?void 0:p[c])||l,v=d.useContext(g);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,m]}const n=()=>{const a=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[o,uu(n,...t)]}function uu(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=o.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var fu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],X=fu.reduce((e,t)=>{const r=d.forwardRef((o,n)=>{const{asChild:a,...i}=o,l=a?xr:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:n})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function ri(e,t){e&&Nr.flushSync(()=>e.dispatchEvent(t))}function _e(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}function hu(e,t=globalThis==null?void 0:globalThis.document){const r=_e(e);d.useEffect(()=>{const o=n=>{n.key==="Escape"&&r(n)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[r,t])}var mu="DismissableLayer",gs="dismissableLayer.update",pu="dismissableLayer.pointerDownOutside",gu="dismissableLayer.focusOutside",qn,oi=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ro=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=d.useContext(oi),[m,h]=d.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=d.useState({}),v=fe(t,E=>h(E)),p=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(x),b=m?p.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,j=vu(E=>{const R=E.target,C=[...u.branches].some(k=>k.contains(R));!S||C||(n==null||n(E),i==null||i(E),E.defaultPrevented||l==null||l())},f),T=yu(E=>{const R=E.target;[...u.branches].some(k=>k.contains(R))||(a==null||a(E),i==null||i(E),E.defaultPrevented||l==null||l())},f);return hu(E=>{b===u.layers.size-1&&(o==null||o(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),d.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(qn=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),Kn(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=qn)}},[m,f,r,u]),d.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),Kn())},[m,u]),d.useEffect(()=>{const E=()=>g({});return document.addEventListener(gs,E),()=>document.removeEventListener(gs,E)},[]),s.jsx(X.div,{...c,ref:v,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:z(e.onFocusCapture,T.onFocusCapture),onBlurCapture:z(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:z(e.onPointerDownCapture,j.onPointerDownCapture)})});Ro.displayName=mu;var xu="DismissableLayerBranch",si=d.forwardRef((e,t)=>{const r=d.useContext(oi),o=d.useRef(null),n=fe(t,o);return d.useEffect(()=>{const a=o.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(X.div,{...e,ref:n})});si.displayName=xu;function vu(e,t=globalThis==null?void 0:globalThis.document){const r=_e(e),o=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const a=l=>{if(l.target&&!o.current){let c=function(){ni(pu,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=c,t.addEventListener("click",n.current,{once:!0})):c()}else t.removeEventListener("click",n.current);o.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>o.current=!0}}function yu(e,t=globalThis==null?void 0:globalThis.document){const r=_e(e),o=d.useRef(!1);return d.useEffect(()=>{const n=a=>{a.target&&!o.current&&ni(gu,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Kn(){const e=new CustomEvent(gs);document.dispatchEvent(e)}function ni(e,t,r,{discrete:o}){const n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),o?ri(n,a):n.dispatchEvent(a)}var bu=Ro,wu=si,ke=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},Su="Portal",Zs=d.forwardRef((e,t)=>{var l;const{container:r,...o}=e,[n,a]=d.useState(!1);ke(()=>a(!0),[]);const i=r||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?qa.createPortal(s.jsx(X.div,{...o,ref:t}),i):null});Zs.displayName=Su;function Nu(e,t){return d.useReducer((r,o)=>t[r][o]??r,e)}var Gr=e=>{const{present:t,children:r}=e,o=Cu(t),n=typeof r=="function"?r({present:o.isPresent}):d.Children.only(r),a=fe(o.ref,ju(n));return typeof r=="function"||o.isPresent?d.cloneElement(n,{ref:a}):null};Gr.displayName="Presence";function Cu(e){const[t,r]=d.useState(),o=d.useRef({}),n=d.useRef(e),a=d.useRef("none"),i=e?"mounted":"unmounted",[l,c]=Nu(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=eo(o.current);a.current=l==="mounted"?u:"none"},[l]),ke(()=>{const u=o.current,m=n.current;if(m!==e){const f=a.current,g=eo(u);e?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(m&&f!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,c]),ke(()=>{if(t){let u;const m=t.ownerDocument.defaultView??window,h=g=>{const p=eo(o.current).includes(g.animationName);if(g.target===t&&p&&(c("ANIMATION_END"),!n.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=g=>{g.target===t&&(a.current=eo(o.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(o.current=getComputedStyle(u)),r(u)},[])}}function eo(e){return(e==null?void 0:e.animationName)||"none"}function ju(e){var o,n;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function vr({prop:e,defaultProp:t,onChange:r=()=>{}}){const[o,n]=ku({defaultProp:t,onChange:r}),a=e!==void 0,i=a?e:o,l=_e(r),c=d.useCallback(u=>{if(a){const h=typeof u=="function"?u(e):u;h!==e&&l(h)}else n(u)},[a,e,n,l]);return[i,c]}function ku({defaultProp:e,onChange:t}){const r=d.useState(e),[o]=r,n=d.useRef(o),a=_e(t);return d.useEffect(()=>{n.current!==o&&(a(o),n.current=o)},[o,n,a]),r}var Eu="VisuallyHidden",qr=d.forwardRef((e,t)=>s.jsx(X.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));qr.displayName=Eu;var Ru=qr,en="ToastProvider",[tn,Tu,Au]=Js("Toast"),[ai,Iv]=Cr("Toast",[Au]),[Pu,To]=ai(en),ii=e=>{const{__scopeToast:t,label:r="Notification",duration:o=5e3,swipeDirection:n="right",swipeThreshold:a=50,children:i}=e,[l,c]=d.useState(null),[u,m]=d.useState(0),h=d.useRef(!1),f=d.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${en}\`. Expected non-empty \`string\`.`),s.jsx(tn.Provider,{scope:t,children:s.jsx(Pu,{scope:t,label:r,duration:o,swipeDirection:n,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>m(g=>g+1),[]),onToastRemove:d.useCallback(()=>m(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:i})})};ii.displayName=en;var li="ToastViewport",Mu=["F8"],xs="toast.viewportPause",vs="toast.viewportResume",ci=d.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:o=Mu,label:n="Notifications ({hotkey})",...a}=e,i=To(li,r),l=Tu(r),c=d.useRef(null),u=d.useRef(null),m=d.useRef(null),h=d.useRef(null),f=fe(t,h,i.onViewportChange),g=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=i.toastCount>0;d.useEffect(()=>{const x=y=>{var w;o.length!==0&&o.every(S=>y[S]||y.code===S)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[o]),d.useEffect(()=>{const x=c.current,y=h.current;if(v&&x&&y){const b=()=>{if(!i.isClosePausedRef.current){const T=new CustomEvent(xs);y.dispatchEvent(T),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const T=new CustomEvent(vs);y.dispatchEvent(T),i.isClosePausedRef.current=!1}},S=T=>{!x.contains(T.relatedTarget)&&w()},j=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",S),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",S),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[v,i.isClosePausedRef]);const p=d.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const S=w.ref.current,j=[S,...Vu(S)];return x==="forwards"?j:j.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return d.useEffect(()=>{const x=h.current;if(x){const y=b=>{var j,T,E;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const R=document.activeElement,C=b.shiftKey;if(b.target===x&&C){(j=u.current)==null||j.focus();return}const M=p({tabbingDirection:C?"backwards":"forwards"}),_=M.findIndex(A=>A===R);Yo(M.slice(_+1))?b.preventDefault():C?(T=u.current)==null||T.focus():(E=m.current)==null||E.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,p]),s.jsxs(wu,{ref:c,role:"region","aria-label":n.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(ys,{ref:u,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"forwards"});Yo(x)}}),s.jsx(tn.Slot,{scope:r,children:s.jsx(X.ol,{tabIndex:-1,...a,ref:f})}),v&&s.jsx(ys,{ref:m,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"backwards"});Yo(x)}})]})});ci.displayName=li;var di="ToastFocusProxy",ys=d.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:o,...n}=e,a=To(di,r);return s.jsx(qr,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&o()}})});ys.displayName=di;var Ao="Toast",Iu="toast.swipeStart",Ou="toast.swipeMove",Lu="toast.swipeCancel",_u="toast.swipeEnd",ui=d.forwardRef((e,t)=>{const{forceMount:r,open:o,defaultOpen:n,onOpenChange:a,...i}=e,[l=!0,c]=vr({prop:o,defaultProp:n,onChange:a});return s.jsx(Gr,{present:r||l,children:s.jsx(Bu,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:_e(e.onPause),onResume:_e(e.onResume),onSwipeStart:z(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:z(e.onSwipeMove,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:z(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:z(e.onSwipeEnd,u=>{const{x:m,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});ui.displayName=Ao;var[Du,Fu]=ai(Ao,{onClose(){}}),Bu=d.forwardRef((e,t)=>{const{__scopeToast:r,type:o="foreground",duration:n,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...v}=e,p=To(Ao,r),[x,y]=d.useState(null),b=fe(t,A=>y(A)),w=d.useRef(null),S=d.useRef(null),j=n||p.duration,T=d.useRef(0),E=d.useRef(j),R=d.useRef(0),{onToastAdd:C,onToastRemove:k}=p,L=_e(()=>{var F;(x==null?void 0:x.contains(document.activeElement))&&((F=p.viewport)==null||F.focus()),i()}),M=d.useCallback(A=>{!A||A===1/0||(window.clearTimeout(R.current),T.current=new Date().getTime(),R.current=window.setTimeout(L,A))},[L]);d.useEffect(()=>{const A=p.viewport;if(A){const F=()=>{M(E.current),u==null||u()},I=()=>{const B=new Date().getTime()-T.current;E.current=E.current-B,window.clearTimeout(R.current),c==null||c()};return A.addEventListener(xs,I),A.addEventListener(vs,F),()=>{A.removeEventListener(xs,I),A.removeEventListener(vs,F)}}},[p.viewport,j,c,u,M]),d.useEffect(()=>{a&&!p.isClosePausedRef.current&&M(j)},[a,j,p.isClosePausedRef,M]),d.useEffect(()=>(C(),()=>k()),[C,k]);const _=d.useMemo(()=>x?vi(x):null,[x]);return p.viewport?s.jsxs(s.Fragment,{children:[_&&s.jsx($u,{__scopeToast:r,role:"status","aria-live":o==="foreground"?"assertive":"polite","aria-atomic":!0,children:_}),s.jsx(Du,{scope:r,onClose:L,children:Nr.createPortal(s.jsx(tn.ItemSlot,{scope:r,children:s.jsx(bu,{asChild:!0,onEscapeKeyDown:z(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||L(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(X.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:z(e.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:z(e.onPointerDown,A=>{A.button===0&&(w.current={x:A.clientX,y:A.clientY})}),onPointerMove:z(e.onPointerMove,A=>{if(!w.current)return;const F=A.clientX-w.current.x,I=A.clientY-w.current.y,B=!!S.current,P=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,he=P?$(0,F):0,H=P?0:$(0,I),G=A.pointerType==="touch"?10:2,Q={x:he,y:H},ge={originalEvent:A,delta:Q};B?(S.current=Q,to(Ou,h,ge,{discrete:!1})):Yn(Q,p.swipeDirection,G)?(S.current=Q,to(Iu,m,ge,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(F)>G||Math.abs(I)>G)&&(w.current=null)}),onPointerUp:z(e.onPointerUp,A=>{const F=S.current,I=A.target;if(I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),S.current=null,w.current=null,F){const B=A.currentTarget,P={originalEvent:A,delta:F};Yn(F,p.swipeDirection,p.swipeThreshold)?to(_u,g,P,{discrete:!0}):to(Lu,f,P,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),$u=e=>{const{__scopeToast:t,children:r,...o}=e,n=To(Ao,t),[a,i]=d.useState(!1),[l,c]=d.useState(!1);return Wu(()=>i(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(Zs,{asChild:!0,children:s.jsx(qr,{...o,children:a&&s.jsxs(s.Fragment,{children:[n.label," ",r]})})})},Hu="ToastTitle",fi=d.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e;return s.jsx(X.div,{...o,ref:t})});fi.displayName=Hu;var Uu="ToastDescription",hi=d.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e;return s.jsx(X.div,{...o,ref:t})});hi.displayName=Uu;var mi="ToastAction",pi=d.forwardRef((e,t)=>{const{altText:r,...o}=e;return r.trim()?s.jsx(xi,{altText:r,asChild:!0,children:s.jsx(rn,{...o,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${mi}\`. Expected non-empty \`string\`.`),null)});pi.displayName=mi;var gi="ToastClose",rn=d.forwardRef((e,t)=>{const{__scopeToast:r,...o}=e,n=Fu(gi,r);return s.jsx(xi,{asChild:!0,children:s.jsx(X.button,{type:"button",...o,ref:t,onClick:z(e.onClick,n.onClose)})})});rn.displayName=gi;var xi=d.forwardRef((e,t)=>{const{__scopeToast:r,altText:o,...n}=e;return s.jsx(X.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":o||void 0,...n,ref:t})});function vi(e){const t=[];return Array.from(e.childNodes).forEach(o=>{if(o.nodeType===o.TEXT_NODE&&o.textContent&&t.push(o.textContent),zu(o)){const n=o.ariaHidden||o.hidden||o.style.display==="none",a=o.dataset.radixToastAnnounceExclude==="";if(!n)if(a){const i=o.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...vi(o))}}),t}function to(e,t,r,{discrete:o}){const n=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(e,t,{once:!0}),o?ri(n,a):n.dispatchEvent(a)}var Yn=(e,t,r=0)=>{const o=Math.abs(e.x),n=Math.abs(e.y),a=o>n;return t==="left"||t==="right"?a&&o>r:!a&&n>r};function Wu(e=()=>{}){const t=_e(e);ke(()=>{let r=0,o=0;return r=window.requestAnimationFrame(()=>o=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(o)}},[t])}function zu(e){return e.nodeType===e.ELEMENT_NODE}function Vu(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const n=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||n?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Yo(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Gu=ii,yi=ci,bi=ui,wi=fi,Si=hi,Ni=pi,Ci=rn;function ji(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=ji(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ki(){for(var e,t,r=0,o="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=ji(e))&&(o&&(o+=" "),o+=t);return o}const Qn=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Xn=ki,on=(e,t)=>r=>{var o;if((t==null?void 0:t.variants)==null)return Xn(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:a}=t,i=Object.keys(n).map(u=>{const m=r==null?void 0:r[u],h=a==null?void 0:a[u];if(m===null)return null;const f=Qn(m)||Qn(h);return n[u][f]}),l=r&&Object.entries(r).reduce((u,m)=>{let[h,f]=m;return f===void 0||(u[h]=f),u},{}),c=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((u,m)=>{let{class:h,className:f,...g}=m;return Object.entries(g).every(v=>{let[p,x]=v;return Array.isArray(x)?x.includes({...a,...l}[p]):{...a,...l}[p]===x})?[...u,h,f]:u},[]);return Xn(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ei=(...e)=>e.filter((t,r,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ku={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:n="",children:a,iconNode:i,...l},c)=>d.createElement("svg",{ref:c,...Ku,width:t,height:t,stroke:e,strokeWidth:o?Number(r)*24/Number(t):r,className:Ei("lucide",n),...l},[...i.map(([u,m])=>d.createElement(u,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(e,t)=>{const r=d.forwardRef(({className:o,...n},a)=>d.createElement(Yu,{ref:a,iconNode:t,className:Ei(`lucide-${qu(e)}`,o),...n}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ne("BookPlus",[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ne("BookUser",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=ne("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=ne("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ne("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ne("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nn="-",uf=e=>{const t=hf(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:i=>{const l=i.split(nn);return l[0]===""&&l.length!==1&&l.shift(),Li(l,t)||ff(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&o[i]?[...c,...o[i]]:c}}},Li=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],o=t.nextPart.get(r),n=o?Li(e.slice(1),o):void 0;if(n)return n;if(t.validators.length===0)return;const a=e.join(nn);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},Jn=/^\[(.+)\]$/,ff=e=>{if(Jn.test(e)){const t=Jn.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},hf=e=>{const{theme:t,prefix:r}=e,o={nextPart:new Map,validators:[]};return pf(Object.entries(e.classGroups),r).forEach(([a,i])=>{ws(i,o,a,t)}),o},ws=(e,t,r,o)=>{e.forEach(n=>{if(typeof n=="string"){const a=n===""?t:Zn(t,n);a.classGroupId=r;return}if(typeof n=="function"){if(mf(n)){ws(n(o),t,r,o);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([a,i])=>{ws(i,Zn(t,a),r,o)})})},Zn=(e,t)=>{let r=e;return t.split(nn).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},mf=e=>e.isThemeGetter,pf=(e,t)=>t?e.map(([r,o])=>{const n=o.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[r,n]}):e,gf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,o=new Map;const n=(a,i)=>{r.set(a,i),t++,t>e&&(t=0,o=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=o.get(a))!==void 0)return n(a,i),i},set(a,i){r.has(a)?r.set(a,i):n(a,i)}}},_i="!",xf=e=>{const{separator:t,experimentalParseClassName:r}=e,o=t.length===1,n=t[0],a=t.length,i=l=>{const c=[];let u=0,m=0,h;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===n&&(o||l.slice(x,x+a)===t)){c.push(l.slice(m,x)),m=x+a;continue}if(y==="/"){h=x;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?l:l.substring(m),g=f.startsWith(_i),v=g?f.substring(1):f,p=h&&h>m?h-m:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:i}):i},vf=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(o=>{o[0]==="["?(t.push(...r.sort(),o),r=[]):r.push(o)}),t.push(...r.sort()),t},yf=e=>({cache:gf(e.cacheSize),parseClassName:xf(e),...uf(e)}),bf=/\s+/,wf=(e,t)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:n}=t,a=[],i=e.trim().split(bf);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:m,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:g}=r(u);let v=!!g,p=o(v?f.substring(0,g):f);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=o(f),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const x=vf(m).join(":"),y=h?x+_i:x,b=y+p;if(a.includes(b))continue;a.push(b);const w=n(p,v);for(let S=0;S<w.length;++S){const j=w[S];a.push(y+j)}l=u+(l.length>0?" "+l:l)}return l};function Sf(){let e=0,t,r,o="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Di(t))&&(o&&(o+=" "),o+=r);return o}const Di=e=>{if(typeof e=="string")return e;let t,r="";for(let o=0;o<e.length;o++)e[o]&&(t=Di(e[o]))&&(r&&(r+=" "),r+=t);return r};function Nf(e,...t){let r,o,n,a=i;function i(c){const u=t.reduce((m,h)=>h(m),e());return r=yf(u),o=r.cache.get,n=r.cache.set,a=l,l(c)}function l(c){const u=o(c);if(u)return u;const m=wf(c,r);return n(c,m),m}return function(){return a(Sf.apply(null,arguments))}}const pe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Fi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Cf=/^\d+\/\d+$/,jf=new Set(["px","full","screen"]),kf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ef=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Rf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Tf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Af=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,it=e=>er(e)||jf.has(e)||Cf.test(e),mt=e=>jr(e,"length",Ff),er=e=>!!e&&!Number.isNaN(Number(e)),es=e=>jr(e,"number",er),Ar=e=>!!e&&Number.isInteger(Number(e)),Pf=e=>e.endsWith("%")&&er(e.slice(0,-1)),K=e=>Fi.test(e),pt=e=>kf.test(e),Mf=new Set(["length","size","percentage"]),If=e=>jr(e,Mf,Bi),Of=e=>jr(e,"position",Bi),Lf=new Set(["image","url"]),_f=e=>jr(e,Lf,$f),Df=e=>jr(e,"",Bf),Pr=()=>!0,jr=(e,t,r)=>{const o=Fi.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):r(o[2]):!1},Ff=e=>Ef.test(e)&&!Rf.test(e),Bi=()=>!1,Bf=e=>Tf.test(e),$f=e=>Af.test(e),Hf=()=>{const e=pe("colors"),t=pe("spacing"),r=pe("blur"),o=pe("brightness"),n=pe("borderColor"),a=pe("borderRadius"),i=pe("borderSpacing"),l=pe("borderWidth"),c=pe("contrast"),u=pe("grayscale"),m=pe("hueRotate"),h=pe("invert"),f=pe("gap"),g=pe("gradientColorStops"),v=pe("gradientColorStopPositions"),p=pe("inset"),x=pe("margin"),y=pe("opacity"),b=pe("padding"),w=pe("saturate"),S=pe("scale"),j=pe("sepia"),T=pe("skew"),E=pe("space"),R=pe("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",K,t],M=()=>[K,t],_=()=>["",it,mt],A=()=>["auto",er,K],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",K],he=()=>["auto","avoid","all","avoid-page","page","left","right","column"],H=()=>[er,K];return{cacheSize:500,separator:":",theme:{colors:[Pr],spacing:[it,mt],blur:["none","",pt,K],brightness:H(),borderColor:[e],borderRadius:["none","","full",pt,K],borderSpacing:M(),borderWidth:_(),contrast:H(),grayscale:$(),hueRotate:H(),invert:$(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[Pf,mt],inset:L(),margin:L(),opacity:H(),padding:M(),saturate:H(),scale:H(),sepia:$(),skew:H(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",K]}],container:["container"],columns:[{columns:[pt]}],"break-after":[{"break-after":he()}],"break-before":[{"break-before":he()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),K]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ar,K]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",K]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Ar,K]}],"grid-cols":[{"grid-cols":[Pr]}],"col-start-end":[{col:["auto",{span:["full",Ar,K]},K]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Pr]}],"row-start-end":[{row:["auto",{span:[Ar,K]},K]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",K]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",K]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",K,t]}],"min-w":[{"min-w":[K,t,"min","max","fit"]}],"max-w":[{"max-w":[K,t,"none","full","min","max","fit","prose",{screen:[pt]},pt]}],h:[{h:[K,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[K,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[K,t,"auto","min","max","fit"]}],"font-size":[{text:["base",pt,mt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",es]}],"font-family":[{font:[Pr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",K]}],"line-clamp":[{"line-clamp":["none",er,es]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",it,K]}],"list-image":[{"list-image":["none",K]}],"list-style-type":[{list:["none","disc","decimal",K]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",it,mt]}],"underline-offset":[{"underline-offset":["auto",it,K]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),Of]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",If]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_f]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:I()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[it,K]}],"outline-w":[{outline:[it,mt]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[it,mt]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",pt,Df]}],"shadow-color":[{shadow:[Pr]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[o]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pt,K]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",K]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",K]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",K]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ar,K]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",K]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",K]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",K]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[it,mt,es]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Uf=Nf(Hf);function ee(...e){return Uf(ki(e))}const Wf=Gu,$i=d.forwardRef(({className:e,...t},r)=>s.jsx(yi,{ref:r,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));$i.displayName=yi.displayName;const zf=on("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Hi=d.forwardRef(({className:e,variant:t,...r},o)=>s.jsx(bi,{ref:o,className:ee(zf({variant:t}),e),...r}));Hi.displayName=bi.displayName;const Vf=d.forwardRef(({className:e,...t},r)=>s.jsx(Ni,{ref:r,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Vf.displayName=Ni.displayName;const Ui=d.forwardRef(({className:e,...t},r)=>s.jsx(Ci,{ref:r,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Oi,{className:"h-4 w-4"})}));Ui.displayName=Ci.displayName;const Wi=d.forwardRef(({className:e,...t},r)=>s.jsx(wi,{ref:r,className:ee("text-sm font-semibold",e),...t}));Wi.displayName=wi.displayName;const zi=d.forwardRef(({className:e,...t},r)=>s.jsx(Si,{ref:r,className:ee("text-sm opacity-90",e),...t}));zi.displayName=Si.displayName;function Gf(){const{toasts:e}=su();return s.jsxs(Wf,{children:[e.map(function({id:t,title:r,description:o,action:n,...a}){return s.jsxs(Hi,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(Wi,{children:r}),o&&s.jsx(zi,{children:o})]}),n,s.jsx(Ui,{})]},t)}),s.jsx($i,{})]})}var ea=["light","dark"],qf="(prefers-color-scheme: dark)",Kf=d.createContext(void 0),Yf={setTheme:e=>{},themes:[]},Qf=()=>{var e;return(e=d.useContext(Kf))!=null?e:Yf};d.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:o,enableColorScheme:n,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let u=a==="system",m=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=n?ea.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,p=!1,x=!0)=>{let y=i?i[v]:v,b=p?v+"|| ''":`'${y}'`,w="";return n&&x&&!p&&ea.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),r==="class"?p||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},g=e?`!function(){${m}${f(e)}}()`:o?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${qf}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return d.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var Xf=e=>{switch(e){case"success":return eh;case"info":return rh;case"warning":return th;case"error":return oh;default:return null}},Jf=Array(12).fill(0),Zf=({visible:e})=>O.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},O.createElement("div",{className:"sonner-spinner"},Jf.map((t,r)=>O.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eh=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),th=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rh=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),oh=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sh=()=>{let[e,t]=O.useState(document.hidden);return O.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Ss=1,nh=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...o}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ss++,a=this.toasts.find(l=>l.id===n),i=e.dismissible===void 0?!0:e.dismissible;return a?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...e,id:n,title:r}),{...l,...e,id:n,dismissible:i,title:r}):l):this.addToast({title:r,...o,dismissible:i,id:n}),n},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let o=e instanceof Promise?e:e(),n=r!==void 0;return o.then(async a=>{if(ih(a)&&!a.ok){n=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${a.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${a.status}`):t.description;this.create({id:r,type:"error",message:i,description:l})}else if(t.success!==void 0){n=!1;let i=typeof t.success=="function"?await t.success(a):t.success,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:r,type:"success",message:i,description:l})}}).catch(async a=>{if(t.error!==void 0){n=!1;let i=typeof t.error=="function"?await t.error(a):t.error,l=typeof t.description=="function"?await t.description(a):t.description;this.create({id:r,type:"error",message:i,description:l})}}).finally(()=>{var a;n&&(this.dismiss(r),r=void 0),(a=t.finally)==null||a.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Ss++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Be=new nh,ah=(e,t)=>{let r=(t==null?void 0:t.id)||Ss++;return Be.addToast({title:e,...t,id:r}),r},ih=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",lh=ah,ch=()=>Be.toasts,le=Object.assign(lh,{success:Be.success,info:Be.info,warning:Be.warning,error:Be.error,custom:Be.custom,message:Be.message,promise:Be.promise,dismiss:Be.dismiss,loading:Be.loading},{getHistory:ch});function dh(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}dh(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ro(e){return e.label!==void 0}var uh=3,fh="32px",hh=4e3,mh=356,ph=14,gh=20,xh=200;function vh(...e){return e.filter(Boolean).join(" ")}var yh=e=>{var t,r,o,n,a,i,l,c,u,m;let{invert:h,toast:f,unstyled:g,interacting:v,setHeights:p,visibleToasts:x,heights:y,index:b,toasts:w,expanded:S,removeToast:j,defaultRichColors:T,closeButton:E,style:R,cancelButtonStyle:C,actionButtonStyle:k,className:L="",descriptionClassName:M="",duration:_,position:A,gap:F,loadingIcon:I,expandByDefault:B,classNames:P,icons:$,closeButtonAriaLabel:he="Close toast",pauseWhenPageIsHidden:H,cn:G}=e,[Q,ge]=O.useState(!1),[Ee,de]=O.useState(!1),[W,ae]=O.useState(!1),[xe,oe]=O.useState(!1),[ie,se]=O.useState(0),[Re,De]=O.useState(0),ft=O.useRef(null),Ue=O.useRef(null),It=b===0,Wo=b+1<=x,Se=f.type,qt=f.dismissible!==!1,gd=f.className||"",xd=f.descriptionClassName||"",Xr=O.useMemo(()=>y.findIndex(q=>q.toastId===f.id)||0,[y,f.id]),vd=O.useMemo(()=>{var q;return(q=f.closeButton)!=null?q:E},[f.closeButton,E]),Dn=O.useMemo(()=>f.duration||_||hh,[f.duration,_]),zo=O.useRef(0),Kt=O.useRef(0),Fn=O.useRef(0),Yt=O.useRef(null),[Bn,yd]=A.split("-"),$n=O.useMemo(()=>y.reduce((q,me,ue)=>ue>=Xr?q:q+me.height,0),[y,Xr]),Hn=sh(),bd=f.invert||h,Vo=Se==="loading";Kt.current=O.useMemo(()=>Xr*F+$n,[Xr,$n]),O.useEffect(()=>{ge(!0)},[]),O.useLayoutEffect(()=>{if(!Q)return;let q=Ue.current,me=q.style.height;q.style.height="auto";let ue=q.getBoundingClientRect().height;q.style.height=me,De(ue),p(Xe=>Xe.find(Je=>Je.toastId===f.id)?Xe.map(Je=>Je.toastId===f.id?{...Je,height:ue}:Je):[{toastId:f.id,height:ue,position:f.position},...Xe])},[Q,f.title,f.description,p,f.id]);let ht=O.useCallback(()=>{de(!0),se(Kt.current),p(q=>q.filter(me=>me.toastId!==f.id)),setTimeout(()=>{j(f)},xh)},[f,j,p,Kt]);O.useEffect(()=>{if(f.promise&&Se==="loading"||f.duration===1/0||f.type==="loading")return;let q,me=Dn;return S||v||H&&Hn?(()=>{if(Fn.current<zo.current){let ue=new Date().getTime()-zo.current;me=me-ue}Fn.current=new Date().getTime()})():me!==1/0&&(zo.current=new Date().getTime(),q=setTimeout(()=>{var ue;(ue=f.onAutoClose)==null||ue.call(f,f),ht()},me)),()=>clearTimeout(q)},[S,v,B,f,Dn,ht,f.promise,Se,H,Hn]),O.useEffect(()=>{let q=Ue.current;if(q){let me=q.getBoundingClientRect().height;return De(me),p(ue=>[{toastId:f.id,height:me,position:f.position},...ue]),()=>p(ue=>ue.filter(Xe=>Xe.toastId!==f.id))}},[p,f.id]),O.useEffect(()=>{f.delete&&ht()},[ht,f.delete]);function wd(){return $!=null&&$.loading?O.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},$.loading):I?O.createElement("div",{className:"sonner-loader","data-visible":Se==="loading"},I):O.createElement(Zf,{visible:Se==="loading"})}return O.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ue,className:G(L,gd,P==null?void 0:P.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,P==null?void 0:P.default,P==null?void 0:P[Se],(r=f==null?void 0:f.classNames)==null?void 0:r[Se]),"data-sonner-toast":"","data-rich-colors":(o=f.richColors)!=null?o:T,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":Q,"data-promise":!!f.promise,"data-removed":Ee,"data-visible":Wo,"data-y-position":Bn,"data-x-position":yd,"data-index":b,"data-front":It,"data-swiping":W,"data-dismissible":qt,"data-type":Se,"data-invert":bd,"data-swipe-out":xe,"data-expanded":!!(S||B&&Q),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${Ee?ie:Kt.current}px`,"--initial-height":B?"auto":`${Re}px`,...R,...f.style},onPointerDown:q=>{Vo||!qt||(ft.current=new Date,se(Kt.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(ae(!0),Yt.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,me,ue,Xe;if(xe||!qt)return;Yt.current=null;let Je=Number(((q=Ue.current)==null?void 0:q.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Jr=new Date().getTime()-((me=ft.current)==null?void 0:me.getTime()),Sd=Math.abs(Je)/Jr;if(Math.abs(Je)>=gh||Sd>.11){se(Kt.current),(ue=f.onDismiss)==null||ue.call(f,f),ht(),oe(!0);return}(Xe=Ue.current)==null||Xe.style.setProperty("--swipe-amount","0px"),ae(!1)},onPointerMove:q=>{var me;if(!Yt.current||!qt)return;let ue=q.clientY-Yt.current.y,Xe=q.clientX-Yt.current.x,Je=(Bn==="top"?Math.min:Math.max)(0,ue),Jr=q.pointerType==="touch"?10:2;Math.abs(Je)>Jr?(me=Ue.current)==null||me.style.setProperty("--swipe-amount",`${ue}px`):Math.abs(Xe)>Jr&&(Yt.current=null)}},vd&&!f.jsx?O.createElement("button",{"aria-label":he,"data-disabled":Vo,"data-close-button":!0,onClick:Vo||!qt?()=>{}:()=>{var q;ht(),(q=f.onDismiss)==null||q.call(f,f)},className:G(P==null?void 0:P.closeButton,(n=f==null?void 0:f.classNames)==null?void 0:n.closeButton)},O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},O.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||O.isValidElement(f.title)?f.jsx||f.title:O.createElement(O.Fragment,null,Se||f.icon||f.promise?O.createElement("div",{"data-icon":"",className:G(P==null?void 0:P.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||wd():null,f.type!=="loading"?f.icon||($==null?void 0:$[Se])||Xf(Se):null):null,O.createElement("div",{"data-content":"",className:G(P==null?void 0:P.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},O.createElement("div",{"data-title":"",className:G(P==null?void 0:P.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?O.createElement("div",{"data-description":"",className:G(M,xd,P==null?void 0:P.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),O.isValidElement(f.cancel)?f.cancel:f.cancel&&ro(f.cancel)?O.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||C,onClick:q=>{var me,ue;ro(f.cancel)&&qt&&((ue=(me=f.cancel).onClick)==null||ue.call(me,q),ht())},className:G(P==null?void 0:P.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,O.isValidElement(f.action)?f.action:f.action&&ro(f.action)?O.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||k,onClick:q=>{var me,ue;ro(f.action)&&(q.defaultPrevented||((ue=(me=f.action).onClick)==null||ue.call(me,q),ht()))},className:G(P==null?void 0:P.actionButton,(m=f==null?void 0:f.classNames)==null?void 0:m.actionButton)},f.action.label):null))};function ta(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var bh=e=>{let{invert:t,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:n,closeButton:a,className:i,offset:l,theme:c="light",richColors:u,duration:m,style:h,visibleToasts:f=uh,toastOptions:g,dir:v=ta(),gap:p=ph,loadingIcon:x,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w,cn:S=vh}=e,[j,T]=O.useState([]),E=O.useMemo(()=>Array.from(new Set([r].concat(j.filter(H=>H.position).map(H=>H.position)))),[j,r]),[R,C]=O.useState([]),[k,L]=O.useState(!1),[M,_]=O.useState(!1),[A,F]=O.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=O.useRef(null),B=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=O.useRef(null),$=O.useRef(!1),he=O.useCallback(H=>{var G;(G=j.find(Q=>Q.id===H.id))!=null&&G.delete||Be.dismiss(H.id),T(Q=>Q.filter(({id:ge})=>ge!==H.id))},[j]);return O.useEffect(()=>Be.subscribe(H=>{if(H.dismiss){T(G=>G.map(Q=>Q.id===H.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{qa.flushSync(()=>{T(G=>{let Q=G.findIndex(ge=>ge.id===H.id);return Q!==-1?[...G.slice(0,Q),{...G[Q],...H},...G.slice(Q+1)]:[H,...G]})})})}),[]),O.useEffect(()=>{if(c!=="system"){F(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:H})=>{F(H?"dark":"light")})},[c]),O.useEffect(()=>{j.length<=1&&L(!1)},[j]),O.useEffect(()=>{let H=G=>{var Q,ge;o.every(Ee=>G[Ee]||G.code===Ee)&&(L(!0),(Q=I.current)==null||Q.focus()),G.code==="Escape"&&(document.activeElement===I.current||(ge=I.current)!=null&&ge.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[o]),O.useEffect(()=>{if(I.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,$.current=!1)}},[I.current]),j.length?O.createElement("section",{"aria-label":`${b} ${B}`,tabIndex:-1},E.map((H,G)=>{var Q;let[ge,Ee]=H.split("-");return O.createElement("ol",{key:H,dir:v==="auto"?ta():v,tabIndex:-1,ref:I,className:i,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":ge,"data-x-position":Ee,style:{"--front-toast-height":`${((Q=R[0])==null?void 0:Q.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||fh,"--width":`${mh}px`,"--gap":`${p}px`,...h},onBlur:de=>{$.current&&!de.currentTarget.contains(de.relatedTarget)&&($.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||$.current||($.current=!0,P.current=de.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{M||L(!1)},onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||_(!0)},onPointerUp:()=>_(!1)},j.filter(de=>!de.position&&G===0||de.position===H).map((de,W)=>{var ae,xe;return O.createElement(yh,{key:de.id,icons:y,index:W,toast:de,defaultRichColors:u,duration:(ae=g==null?void 0:g.duration)!=null?ae:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:f,closeButton:(xe=g==null?void 0:g.closeButton)!=null?xe:a,interacting:M,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:he,toasts:j.filter(oe=>oe.position==de.position),heights:R.filter(oe=>oe.position==de.position),setHeights:C,expandByDefault:n,gap:p,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:w,cn:S})}))})):null};const wh=({...e})=>{const{theme:t="system"}=Qf();return s.jsx(bh,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Sh=jd.useId||(()=>{}),Nh=0;function Po(e){const[t,r]=d.useState(Sh());return ke(()=>{r(o=>o??String(Nh++))},[e]),t?`radix-${t}`:""}const Ch=["top","right","bottom","left"],Et=Math.min,$e=Math.max,bo=Math.round,oo=Math.floor,Rt=e=>({x:e,y:e}),jh={left:"right",right:"left",bottom:"top",top:"bottom"},kh={start:"end",end:"start"};function Ns(e,t,r){return $e(e,Et(t,r))}function ct(e,t){return typeof e=="function"?e(t):e}function dt(e){return e.split("-")[0]}function kr(e){return e.split("-")[1]}function an(e){return e==="x"?"y":"x"}function ln(e){return e==="y"?"height":"width"}function Tt(e){return["top","bottom"].includes(dt(e))?"y":"x"}function cn(e){return an(Tt(e))}function Eh(e,t,r){r===void 0&&(r=!1);const o=kr(e),n=cn(e),a=ln(n);let i=n==="x"?o===(r?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=wo(i)),[i,wo(i)]}function Rh(e){const t=wo(e);return[Cs(e),t,Cs(t)]}function Cs(e){return e.replace(/start|end/g,t=>kh[t])}function Th(e,t,r){const o=["left","right"],n=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?n:o:t?o:n;case"left":case"right":return t?a:i;default:return[]}}function Ah(e,t,r,o){const n=kr(e);let a=Th(dt(e),r==="start",o);return n&&(a=a.map(i=>i+"-"+n),t&&(a=a.concat(a.map(Cs)))),a}function wo(e){return e.replace(/left|right|bottom|top/g,t=>jh[t])}function Ph(e){return{top:0,right:0,bottom:0,left:0,...e}}function Vi(e){return typeof e!="number"?Ph(e):{top:e,right:e,bottom:e,left:e}}function So(e){const{x:t,y:r,width:o,height:n}=e;return{width:o,height:n,top:r,left:t,right:t+o,bottom:r+n,x:t,y:r}}function ra(e,t,r){let{reference:o,floating:n}=e;const a=Tt(t),i=cn(t),l=ln(i),c=dt(t),u=a==="y",m=o.x+o.width/2-n.width/2,h=o.y+o.height/2-n.height/2,f=o[l]/2-n[l]/2;let g;switch(c){case"top":g={x:m,y:o.y-n.height};break;case"bottom":g={x:m,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:h};break;case"left":g={x:o.x-n.width,y:h};break;default:g={x:o.x,y:o.y}}switch(kr(t)){case"start":g[i]-=f*(r&&u?-1:1);break;case"end":g[i]+=f*(r&&u?-1:1);break}return g}const Mh=async(e,t,r)=>{const{placement:o="bottom",strategy:n="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:m,y:h}=ra(u,o,c),f=o,g={},v=0;for(let p=0;p<l.length;p++){const{name:x,fn:y}=l[p],{x:b,y:w,data:S,reset:j}=await y({x:m,y:h,initialPlacement:o,placement:f,strategy:n,middlewareData:g,rects:u,platform:i,elements:{reference:e,floating:t}});m=b??m,h=w??h,g={...g,[x]:{...g[x],...S}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):j.rects),{x:m,y:h}=ra(u,f,c)),p=-1)}return{x:m,y:h,placement:f,strategy:n,middlewareData:g}};async function Dr(e,t){var r;t===void 0&&(t={});const{x:o,y:n,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:f=!1,padding:g=0}=ct(t,e),v=Vi(g),x=l[f?h==="floating"?"reference":"floating":h],y=So(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(x)))==null||r?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),b=h==="floating"?{x:o,y:n,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),S=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},j=So(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-j.top+v.top)/S.y,bottom:(j.bottom-y.bottom+v.bottom)/S.y,left:(y.left-j.left+v.left)/S.x,right:(j.right-y.right+v.right)/S.x}}const Ih=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:o,placement:n,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:m=0}=ct(e,t)||{};if(u==null)return{};const h=Vi(m),f={x:r,y:o},g=cn(n),v=ln(g),p=await i.getDimensions(u),x=g==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",S=a.reference[v]+a.reference[g]-f[g]-a.floating[v],j=f[g]-a.reference[g],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=T?T[w]:0;(!E||!await(i.isElement==null?void 0:i.isElement(T)))&&(E=l.floating[w]||a.floating[v]);const R=S/2-j/2,C=E/2-p[v]/2-1,k=Et(h[y],C),L=Et(h[b],C),M=k,_=E-p[v]-L,A=E/2-p[v]/2+R,F=Ns(M,A,_),I=!c.arrow&&kr(n)!=null&&A!==F&&a.reference[v]/2-(A<M?k:L)-p[v]/2<0,B=I?A<M?A-M:A-_:0;return{[g]:f[g]+B,data:{[g]:F,centerOffset:A-F-B,...I&&{alignmentOffset:B}},reset:I}}}),Oh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,o;const{placement:n,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...x}=ct(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const y=dt(n),b=Tt(l),w=dt(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=f||(w||!p?[wo(l)]:Rh(l)),T=v!=="none";!f&&T&&j.push(...Ah(l,p,v,S));const E=[l,...j],R=await Dr(t,x),C=[];let k=((o=a.flip)==null?void 0:o.overflows)||[];if(m&&C.push(R[y]),h){const A=Eh(n,i,S);C.push(R[A[0]],R[A[1]])}if(k=[...k,{placement:n,overflows:C}],!C.every(A=>A<=0)){var L,M;const A=(((L=a.flip)==null?void 0:L.index)||0)+1,F=E[A];if(F)return{data:{index:A,overflows:k},reset:{placement:F}};let I=(M=k.filter(B=>B.overflows[0]<=0).sort((B,P)=>B.overflows[1]-P.overflows[1])[0])==null?void 0:M.placement;if(!I)switch(g){case"bestFit":{var _;const B=(_=k.filter(P=>{if(T){const $=Tt(P.placement);return $===b||$==="y"}return!0}).map(P=>[P.placement,P.overflows.filter($=>$>0).reduce(($,he)=>$+he,0)]).sort((P,$)=>P[1]-$[1])[0])==null?void 0:_[0];B&&(I=B);break}case"initialPlacement":I=l;break}if(n!==I)return{reset:{placement:I}}}return{}}}};function oa(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function sa(e){return Ch.some(t=>e[t]>=0)}const Lh=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:o="referenceHidden",...n}=ct(e,t);switch(o){case"referenceHidden":{const a=await Dr(t,{...n,elementContext:"reference"}),i=oa(a,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:sa(i)}}}case"escaped":{const a=await Dr(t,{...n,altBoundary:!0}),i=oa(a,r.floating);return{data:{escapedOffsets:i,escaped:sa(i)}}}default:return{}}}}};async function _h(e,t){const{placement:r,platform:o,elements:n}=e,a=await(o.isRTL==null?void 0:o.isRTL(n.floating)),i=dt(r),l=kr(r),c=Tt(r)==="y",u=["left","top"].includes(i)?-1:1,m=a&&c?-1:1,h=ct(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(g=l==="end"?v*-1:v),c?{x:g*m,y:f*u}:{x:f*u,y:g*m}}const Dh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,o;const{x:n,y:a,placement:i,middlewareData:l}=t,c=await _h(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(o=l.arrow)!=null&&o.alignmentOffset?{}:{x:n+c.x,y:a+c.y,data:{...c,placement:i}}}}},Fh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:o,placement:n}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=ct(e,t),u={x:r,y:o},m=await Dr(t,c),h=Tt(dt(n)),f=an(h);let g=u[f],v=u[h];if(a){const x=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=g+m[x],w=g-m[y];g=Ns(b,g,w)}if(i){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=v+m[x],w=v-m[y];v=Ns(b,v,w)}const p=l.fn({...t,[f]:g,[h]:v});return{...p,data:{x:p.x-r,y:p.y-o,enabled:{[f]:a,[h]:i}}}}}},Bh=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:o,placement:n,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ct(e,t),m={x:r,y:o},h=Tt(n),f=an(h);let g=m[f],v=m[h];const p=ct(l,t),x=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=f==="y"?"height":"width",S=a.reference[f]-a.floating[w]+x.mainAxis,j=a.reference[f]+a.reference[w]-x.mainAxis;g<S?g=S:g>j&&(g=j)}if(u){var y,b;const w=f==="y"?"width":"height",S=["top","left"].includes(dt(n)),j=a.reference[h]-a.floating[w]+(S&&((y=i.offset)==null?void 0:y[h])||0)+(S?0:x.crossAxis),T=a.reference[h]+a.reference[w]+(S?0:((b=i.offset)==null?void 0:b[h])||0)-(S?x.crossAxis:0);v<j?v=j:v>T&&(v=T)}return{[f]:g,[h]:v}}}},$h=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,o;const{placement:n,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=ct(e,t),m=await Dr(t,u),h=dt(n),f=kr(n),g=Tt(n)==="y",{width:v,height:p}=a.floating;let x,y;h==="top"||h==="bottom"?(x=h,y=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,x=f==="end"?"top":"bottom");const b=p-m.top-m.bottom,w=v-m.left-m.right,S=Et(p-m[x],b),j=Et(v-m[y],w),T=!t.middlewareData.shift;let E=S,R=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(R=w),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(E=b),T&&!f){const k=$e(m.left,0),L=$e(m.right,0),M=$e(m.top,0),_=$e(m.bottom,0);g?R=v-2*(k!==0||L!==0?k+L:$e(m.left,m.right)):E=p-2*(M!==0||_!==0?M+_:$e(m.top,m.bottom))}await c({...t,availableWidth:R,availableHeight:E});const C=await i.getDimensions(l.floating);return v!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function Mo(){return typeof window<"u"}function Er(e){return Gi(e)?(e.nodeName||"").toLowerCase():"#document"}function He(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function at(e){var t;return(t=(Gi(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Gi(e){return Mo()?e instanceof Node||e instanceof He(e).Node:!1}function Ke(e){return Mo()?e instanceof Element||e instanceof He(e).Element:!1}function nt(e){return Mo()?e instanceof HTMLElement||e instanceof He(e).HTMLElement:!1}function na(e){return!Mo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof He(e).ShadowRoot}function Kr(e){const{overflow:t,overflowX:r,overflowY:o,display:n}=Ye(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+r)&&!["inline","contents"].includes(n)}function Hh(e){return["table","td","th"].includes(Er(e))}function Io(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function dn(e){const t=un(),r=Ke(e)?Ye(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(r.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(r.contain||"").includes(o))}function Uh(e){let t=At(e);for(;nt(t)&&!wr(t);){if(dn(t))return t;if(Io(t))return null;t=At(t)}return null}function un(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wr(e){return["html","body","#document"].includes(Er(e))}function Ye(e){return He(e).getComputedStyle(e)}function Oo(e){return Ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function At(e){if(Er(e)==="html")return e;const t=e.assignedSlot||e.parentNode||na(e)&&e.host||at(e);return na(t)?t.host:t}function qi(e){const t=At(e);return wr(t)?e.ownerDocument?e.ownerDocument.body:e.body:nt(t)&&Kr(t)?t:qi(t)}function Fr(e,t,r){var o;t===void 0&&(t=[]),r===void 0&&(r=!0);const n=qi(e),a=n===((o=e.ownerDocument)==null?void 0:o.body),i=He(n);if(a){const l=js(i);return t.concat(i,i.visualViewport||[],Kr(n)?n:[],l&&r?Fr(l):[])}return t.concat(n,Fr(n,[],r))}function js(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ki(e){const t=Ye(e);let r=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const n=nt(e),a=n?e.offsetWidth:r,i=n?e.offsetHeight:o,l=bo(r)!==a||bo(o)!==i;return l&&(r=a,o=i),{width:r,height:o,$:l}}function fn(e){return Ke(e)?e:e.contextElement}function tr(e){const t=fn(e);if(!nt(t))return Rt(1);const r=t.getBoundingClientRect(),{width:o,height:n,$:a}=Ki(t);let i=(a?bo(r.width):r.width)/o,l=(a?bo(r.height):r.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Wh=Rt(0);function Yi(e){const t=He(e);return!un()||!t.visualViewport?Wh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zh(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==He(e)?!1:t}function Ut(e,t,r,o){t===void 0&&(t=!1),r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=fn(e);let i=Rt(1);t&&(o?Ke(o)&&(i=tr(o)):i=tr(e));const l=zh(a,r,o)?Yi(a):Rt(0);let c=(n.left+l.x)/i.x,u=(n.top+l.y)/i.y,m=n.width/i.x,h=n.height/i.y;if(a){const f=He(a),g=o&&Ke(o)?He(o):o;let v=f,p=js(v);for(;p&&o&&g!==v;){const x=tr(p),y=p.getBoundingClientRect(),b=Ye(p),w=y.left+(p.clientLeft+parseFloat(b.paddingLeft))*x.x,S=y.top+(p.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,m*=x.x,h*=x.y,c+=w,u+=S,v=He(p),p=js(v)}}return So({width:m,height:h,x:c,y:u})}function Vh(e){let{elements:t,rect:r,offsetParent:o,strategy:n}=e;const a=n==="fixed",i=at(o),l=t?Io(t.floating):!1;if(o===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Rt(1);const m=Rt(0),h=nt(o);if((h||!h&&!a)&&((Er(o)!=="body"||Kr(i))&&(c=Oo(o)),nt(o))){const f=Ut(o);u=tr(o),m.x=f.x+o.clientLeft,m.y=f.y+o.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+m.x,y:r.y*u.y-c.scrollTop*u.y+m.y}}function Gh(e){return Array.from(e.getClientRects())}function ks(e,t){const r=Oo(e).scrollLeft;return t?t.left+r:Ut(at(e)).left+r}function qh(e){const t=at(e),r=Oo(e),o=e.ownerDocument.body,n=$e(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=$e(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let i=-r.scrollLeft+ks(e);const l=-r.scrollTop;return Ye(o).direction==="rtl"&&(i+=$e(t.clientWidth,o.clientWidth)-n),{width:n,height:a,x:i,y:l}}function Kh(e,t){const r=He(e),o=at(e),n=r.visualViewport;let a=o.clientWidth,i=o.clientHeight,l=0,c=0;if(n){a=n.width,i=n.height;const u=un();(!u||u&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:a,height:i,x:l,y:c}}function Yh(e,t){const r=Ut(e,!0,t==="fixed"),o=r.top+e.clientTop,n=r.left+e.clientLeft,a=nt(e)?tr(e):Rt(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=n*a.x,u=o*a.y;return{width:i,height:l,x:c,y:u}}function aa(e,t,r){let o;if(t==="viewport")o=Kh(e,r);else if(t==="document")o=qh(at(e));else if(Ke(t))o=Yh(t,r);else{const n=Yi(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return So(o)}function Qi(e,t){const r=At(e);return r===t||!Ke(r)||wr(r)?!1:Ye(r).position==="fixed"||Qi(r,t)}function Qh(e,t){const r=t.get(e);if(r)return r;let o=Fr(e,[],!1).filter(l=>Ke(l)&&Er(l)!=="body"),n=null;const a=Ye(e).position==="fixed";let i=a?At(e):e;for(;Ke(i)&&!wr(i);){const l=Ye(i),c=dn(i);!c&&l.position==="fixed"&&(n=null),(a?!c&&!n:!c&&l.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Kr(i)&&!c&&Qi(e,i))?o=o.filter(m=>m!==i):n=l,i=At(i)}return t.set(e,o),o}function Xh(e){let{element:t,boundary:r,rootBoundary:o,strategy:n}=e;const i=[...r==="clippingAncestors"?Io(t)?[]:Qh(t,this._c):[].concat(r),o],l=i[0],c=i.reduce((u,m)=>{const h=aa(t,m,n);return u.top=$e(h.top,u.top),u.right=Et(h.right,u.right),u.bottom=Et(h.bottom,u.bottom),u.left=$e(h.left,u.left),u},aa(t,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Jh(e){const{width:t,height:r}=Ki(e);return{width:t,height:r}}function Zh(e,t,r){const o=nt(t),n=at(t),a=r==="fixed",i=Ut(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Rt(0);if(o||!o&&!a)if((Er(t)!=="body"||Kr(n))&&(l=Oo(t)),o){const g=Ut(t,!0,a,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else n&&(c.x=ks(n));let u=0,m=0;if(n&&!o&&!a){const g=n.getBoundingClientRect();m=g.top+l.scrollTop,u=g.left+l.scrollLeft-ks(n,g)}const h=i.left+l.scrollLeft-c.x-u,f=i.top+l.scrollTop-c.y-m;return{x:h,y:f,width:i.width,height:i.height}}function ts(e){return Ye(e).position==="static"}function ia(e,t){if(!nt(e)||Ye(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return at(e)===r&&(r=r.ownerDocument.body),r}function Xi(e,t){const r=He(e);if(Io(e))return r;if(!nt(e)){let n=At(e);for(;n&&!wr(n);){if(Ke(n)&&!ts(n))return n;n=At(n)}return r}let o=ia(e,t);for(;o&&Hh(o)&&ts(o);)o=ia(o,t);return o&&wr(o)&&ts(o)&&!dn(o)?r:o||Uh(e)||r}const em=async function(e){const t=this.getOffsetParent||Xi,r=this.getDimensions,o=await r(e.floating);return{reference:Zh(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function tm(e){return Ye(e).direction==="rtl"}const rm={convertOffsetParentRelativeRectToViewportRelativeRect:Vh,getDocumentElement:at,getClippingRect:Xh,getOffsetParent:Xi,getElementRects:em,getClientRects:Gh,getDimensions:Jh,getScale:tr,isElement:Ke,isRTL:tm};function om(e,t){let r=null,o;const n=at(e);function a(){var l;clearTimeout(o),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:m,width:h,height:f}=e.getBoundingClientRect();if(l||t(),!h||!f)return;const g=oo(m),v=oo(n.clientWidth-(u+h)),p=oo(n.clientHeight-(m+f)),x=oo(u),b={rootMargin:-g+"px "+-v+"px "+-p+"px "+-x+"px",threshold:$e(0,Et(1,c))||1};let w=!0;function S(j){const T=j[0].intersectionRatio;if(T!==c){if(!w)return i();T?i(!1,T):o=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(S,{...b,root:n.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return i(!0),a}function sm(e,t,r,o){o===void 0&&(o={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,u=fn(e),m=n||a?[...u?Fr(u):[],...Fr(t)]:[];m.forEach(y=>{n&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const h=u&&l?om(u,r):null;let f=-1,g=null;i&&(g=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(t)})),r()}),u&&!c&&g.observe(u),g.observe(t));let v,p=c?Ut(e):null;c&&x();function x(){const y=Ut(e);p&&(y.x!==p.x||y.y!==p.y||y.width!==p.width||y.height!==p.height)&&r(),p=y,v=requestAnimationFrame(x)}return r(),()=>{var y;m.forEach(b=>{n&&b.removeEventListener("scroll",r),a&&b.removeEventListener("resize",r)}),h==null||h(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const nm=Dh,am=Fh,im=Oh,lm=$h,cm=Lh,la=Ih,dm=Bh,um=(e,t,r)=>{const o=new Map,n={platform:rm,...r},a={...n.platform,_c:o};return Mh(e,t,{...n,platform:a})};var mo=typeof document<"u"?d.useLayoutEffect:d.useEffect;function No(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,o,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(o=r;o--!==0;)if(!No(e[o],t[o]))return!1;return!0}if(n=Object.keys(e),r=n.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!{}.hasOwnProperty.call(t,n[o]))return!1;for(o=r;o--!==0;){const a=n[o];if(!(a==="_owner"&&e.$$typeof)&&!No(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Ji(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ca(e,t){const r=Ji(e);return Math.round(t*r)/r}function rs(e){const t=d.useRef(e);return mo(()=>{t.current=e}),t}function fm(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:o=[],platform:n,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[m,h]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,g]=d.useState(o);No(f,o)||g(o);const[v,p]=d.useState(null),[x,y]=d.useState(null),b=d.useCallback(P=>{P!==T.current&&(T.current=P,p(P))},[]),w=d.useCallback(P=>{P!==E.current&&(E.current=P,y(P))},[]),S=a||v,j=i||x,T=d.useRef(null),E=d.useRef(null),R=d.useRef(m),C=c!=null,k=rs(c),L=rs(n),M=rs(u),_=d.useCallback(()=>{if(!T.current||!E.current)return;const P={placement:t,strategy:r,middleware:f};L.current&&(P.platform=L.current),um(T.current,E.current,P).then($=>{const he={...$,isPositioned:M.current!==!1};A.current&&!No(R.current,he)&&(R.current=he,Nr.flushSync(()=>{h(he)}))})},[f,t,r,L,M]);mo(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const A=d.useRef(!1);mo(()=>(A.current=!0,()=>{A.current=!1}),[]),mo(()=>{if(S&&(T.current=S),j&&(E.current=j),S&&j){if(k.current)return k.current(S,j,_);_()}},[S,j,_,k,C]);const F=d.useMemo(()=>({reference:T,floating:E,setReference:b,setFloating:w}),[b,w]),I=d.useMemo(()=>({reference:S,floating:j}),[S,j]),B=d.useMemo(()=>{const P={position:r,left:0,top:0};if(!I.floating)return P;const $=ca(I.floating,m.x),he=ca(I.floating,m.y);return l?{...P,transform:"translate("+$+"px, "+he+"px)",...Ji(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:he}},[r,l,I.floating,m.x,m.y]);return d.useMemo(()=>({...m,update:_,refs:F,elements:I,floatingStyles:B}),[m,_,F,I,B])}const hm=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:o,padding:n}=typeof e=="function"?e(r):e;return o&&t(o)?o.current!=null?la({element:o.current,padding:n}).fn(r):{}:o?la({element:o,padding:n}).fn(r):{}}}},mm=(e,t)=>({...nm(e),options:[e,t]}),pm=(e,t)=>({...am(e),options:[e,t]}),gm=(e,t)=>({...dm(e),options:[e,t]}),xm=(e,t)=>({...im(e),options:[e,t]}),vm=(e,t)=>({...lm(e),options:[e,t]}),ym=(e,t)=>({...cm(e),options:[e,t]}),bm=(e,t)=>({...hm(e),options:[e,t]});var wm="Arrow",Zi=d.forwardRef((e,t)=>{const{children:r,width:o=10,height:n=5,...a}=e;return s.jsx(X.svg,{...a,ref:t,width:o,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Zi.displayName=wm;var Sm=Zi;function Nm(e,t=[]){let r=[];function o(a,i){const l=d.createContext(i),c=r.length;r=[...r,i];function u(h){const{scope:f,children:g,...v}=h,p=(f==null?void 0:f[e][c])||l,x=d.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:x,children:g})}function m(h,f){const g=(f==null?void 0:f[e][c])||l,v=d.useContext(g);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,m]}const n=()=>{const a=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[o,Cm(n,...t)]}function Cm(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=o.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function hn(e){const[t,r]=d.useState(void 0);return ke(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const a=n[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else r(void 0)},[e]),t}var mn="Popper",[el,Lo]=Nm(mn),[jm,tl]=el(mn),rl=e=>{const{__scopePopper:t,children:r}=e,[o,n]=d.useState(null);return s.jsx(jm,{scope:t,anchor:o,onAnchorChange:n,children:r})};rl.displayName=mn;var ol="PopperAnchor",sl=d.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:o,...n}=e,a=tl(ol,r),i=d.useRef(null),l=fe(t,i);return d.useEffect(()=>{a.onAnchorChange((o==null?void 0:o.current)||i.current)}),o?null:s.jsx(X.div,{...n,ref:l})});sl.displayName=ol;var pn="PopperContent",[km,Em]=el(pn),nl=d.forwardRef((e,t)=>{var W,ae,xe,oe,ie,se;const{__scopePopper:r,side:o="bottom",sideOffset:n=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:v,...p}=e,x=tl(pn,r),[y,b]=d.useState(null),w=fe(t,Re=>b(Re)),[S,j]=d.useState(null),T=hn(S),E=(T==null?void 0:T.width)??0,R=(T==null?void 0:T.height)??0,C=o+(a!=="center"?"-"+a:""),k=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(u)?u:[u],M=L.length>0,_={padding:k,boundary:L.filter(Tm),altBoundary:M},{refs:A,floatingStyles:F,placement:I,isPositioned:B,middlewareData:P}=fm({strategy:"fixed",placement:C,whileElementsMounted:(...Re)=>sm(...Re,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[mm({mainAxis:n+R,alignmentAxis:i}),c&&pm({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?gm():void 0,..._}),c&&xm({..._}),vm({..._,apply:({elements:Re,rects:De,availableWidth:ft,availableHeight:Ue})=>{const{width:It,height:Wo}=De.reference,Se=Re.floating.style;Se.setProperty("--radix-popper-available-width",`${ft}px`),Se.setProperty("--radix-popper-available-height",`${Ue}px`),Se.setProperty("--radix-popper-anchor-width",`${It}px`),Se.setProperty("--radix-popper-anchor-height",`${Wo}px`)}}),S&&bm({element:S,padding:l}),Am({arrowWidth:E,arrowHeight:R}),f&&ym({strategy:"referenceHidden",..._})]}),[$,he]=ll(I),H=_e(v);ke(()=>{B&&(H==null||H())},[B,H]);const G=(W=P.arrow)==null?void 0:W.x,Q=(ae=P.arrow)==null?void 0:ae.y,ge=((xe=P.arrow)==null?void 0:xe.centerOffset)!==0,[Ee,de]=d.useState();return ke(()=>{y&&de(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:B?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[(oe=P.transformOrigin)==null?void 0:oe.x,(ie=P.transformOrigin)==null?void 0:ie.y].join(" "),...((se=P.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(km,{scope:r,placedSide:$,onArrowChange:j,arrowX:G,arrowY:Q,shouldHideArrow:ge,children:s.jsx(X.div,{"data-side":$,"data-align":he,...p,ref:w,style:{...p.style,animation:B?void 0:"none"}})})})});nl.displayName=pn;var al="PopperArrow",Rm={top:"bottom",right:"left",bottom:"top",left:"right"},il=d.forwardRef(function(t,r){const{__scopePopper:o,...n}=t,a=Em(al,o),i=Rm[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Sm,{...n,ref:r,style:{...n.style,display:"block"}})})});il.displayName=al;function Tm(e){return e!==null}var Am=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:r,rects:o,middlewareData:n}=t,i=((x=n.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,m]=ll(r),h={start:"0%",center:"50%",end:"100%"}[m],f=(((y=n.arrow)==null?void 0:y.x)??0)+l/2,g=(((b=n.arrow)==null?void 0:b.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=i?h:`${f}px`,p=`${-c}px`):u==="top"?(v=i?h:`${f}px`,p=`${o.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=i?h:`${g}px`):u==="left"&&(v=`${o.floating.width+c}px`,p=i?h:`${g}px`),{data:{x:v,y:p}}}});function ll(e){const[t,r="center"]=e.split("-");return[t,r]}var Pm=rl,cl=sl,dl=nl,ul=il,[_o,Ov]=Cr("Tooltip",[Lo]),gn=Lo(),fl="TooltipProvider",Mm=700,da="tooltip.open",[Im,hl]=_o(fl),ml=e=>{const{__scopeTooltip:t,delayDuration:r=Mm,skipDelayDuration:o=300,disableHoverableContent:n=!1,children:a}=e,[i,l]=d.useState(!0),c=d.useRef(!1),u=d.useRef(0);return d.useEffect(()=>{const m=u.current;return()=>window.clearTimeout(m)},[]),s.jsx(Im,{scope:t,isOpenDelayed:i,delayDuration:r,onOpen:d.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:d.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),o)},[o]),isPointerInTransitRef:c,onPointerInTransitChange:d.useCallback(m=>{c.current=m},[]),disableHoverableContent:n,children:a})};ml.displayName=fl;var pl="Tooltip",[Lv,Do]=_o(pl),Es="TooltipTrigger",Om=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...o}=e,n=Do(Es,r),a=hl(Es,r),i=gn(r),l=d.useRef(null),c=fe(t,l,n.onTriggerChange),u=d.useRef(!1),m=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(cl,{asChild:!0,...i,children:s.jsx(X.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...o,ref:c,onPointerMove:z(e.onPointerMove,f=>{f.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:z(e.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:z(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:z(e.onFocus,()=>{u.current||n.onOpen()}),onBlur:z(e.onBlur,n.onClose),onClick:z(e.onClick,n.onClose)})})});Om.displayName=Es;var Lm="TooltipPortal",[_v,_m]=_o(Lm,{forceMount:void 0}),Sr="TooltipContent",gl=d.forwardRef((e,t)=>{const r=_m(Sr,e.__scopeTooltip),{forceMount:o=r.forceMount,side:n="top",...a}=e,i=Do(Sr,e.__scopeTooltip);return s.jsx(Gr,{present:o||i.open,children:i.disableHoverableContent?s.jsx(xl,{side:n,...a,ref:t}):s.jsx(Dm,{side:n,...a,ref:t})})}),Dm=d.forwardRef((e,t)=>{const r=Do(Sr,e.__scopeTooltip),o=hl(Sr,e.__scopeTooltip),n=d.useRef(null),a=fe(t,n),[i,l]=d.useState(null),{trigger:c,onClose:u}=r,m=n.current,{onPointerInTransitChange:h}=o,f=d.useCallback(()=>{l(null),h(!1)},[h]),g=d.useCallback((v,p)=>{const x=v.currentTarget,y={x:v.clientX,y:v.clientY},b=Hm(y,x.getBoundingClientRect()),w=Um(y,b),S=Wm(p.getBoundingClientRect()),j=Vm([...w,...S]);l(j),h(!0)},[h]);return d.useEffect(()=>()=>f(),[f]),d.useEffect(()=>{if(c&&m){const v=x=>g(x,m),p=x=>g(x,c);return c.addEventListener("pointerleave",v),m.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),m.removeEventListener("pointerleave",p)}}},[c,m,g,f]),d.useEffect(()=>{if(i){const v=p=>{const x=p.target,y={x:p.clientX,y:p.clientY},b=(c==null?void 0:c.contains(x))||(m==null?void 0:m.contains(x)),w=!zm(y,i);b?f():w&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,m,i,u,f]),s.jsx(xl,{...e,ref:a})}),[Fm,Bm]=_o(pl,{isInside:!1}),xl=d.forwardRef((e,t)=>{const{__scopeTooltip:r,children:o,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Do(Sr,r),u=gn(r),{onClose:m}=c;return d.useEffect(()=>(document.addEventListener(da,m),()=>document.removeEventListener(da,m)),[m]),d.useEffect(()=>{if(c.trigger){const h=f=>{const g=f.target;g!=null&&g.contains(c.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,m]),s.jsx(Ro,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:s.jsxs(dl,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(ti,{children:o}),s.jsx(Fm,{scope:r,isInside:!0,children:s.jsx(Ru,{id:c.contentId,role:"tooltip",children:n||o})})]})})});gl.displayName=Sr;var vl="TooltipArrow",$m=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...o}=e,n=gn(r);return Bm(vl,r).isInside?null:s.jsx(ul,{...n,...o,ref:t})});$m.displayName=vl;function Hm(e,t){const r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,o,n,a)){case a:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Um(e,t,r=5){const o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return o}function Wm(e){const{top:t,right:r,bottom:o,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:o},{x:n,y:o}]}function zm(e,t){const{x:r,y:o}=e;let n=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a].x,c=t[a].y,u=t[i].x,m=t[i].y;c>o!=m>o&&r<(u-l)*(o-c)/(m-c)+l&&(n=!n)}return n}function Vm(e){const t=e.slice();return t.sort((r,o)=>r.x<o.x?-1:r.x>o.x?1:r.y<o.y?-1:r.y>o.y?1:0),Gm(t)}function Gm(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const n=e[o];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const r=[];for(let o=e.length-1;o>=0;o--){const n=e[o];for(;r.length>=2;){const a=r[r.length-1],i=r[r.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))r.pop();else break}r.push(n)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var qm=ml,yl=gl;const Km=qm,Ym=d.forwardRef(({className:e,sideOffset:t=4,...r},o)=>s.jsx(yl,{ref:o,sideOffset:t,className:ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Ym.displayName=yl.displayName;var Yr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Wt=typeof window>"u"||"Deno"in globalThis;function ze(){}function Qm(e,t){return typeof e=="function"?e(t):e}function Rs(e){return typeof e=="number"&&e>=0&&e!==1/0}function bl(e,t){return Math.max(e+(t||0)-Date.now(),0)}function rr(e,t){return typeof e=="function"?e(t):e}function qe(e,t){return typeof e=="function"?e(t):e}function ua(e,t){const{type:r="all",exact:o,fetchStatus:n,predicate:a,queryKey:i,stale:l}=e;if(i){if(o){if(t.queryHash!==xn(i,t.options))return!1}else if(!$r(t.queryKey,i))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||a&&!a(t))}function fa(e,t){const{exact:r,status:o,predicate:n,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Br(t.options.mutationKey)!==Br(a))return!1}else if(!$r(t.options.mutationKey,a))return!1}return!(o&&t.state.status!==o||n&&!n(t))}function xn(e,t){return((t==null?void 0:t.queryKeyHashFn)||Br)(e)}function Br(e){return JSON.stringify(e,(t,r)=>As(r)?Object.keys(r).sort().reduce((o,n)=>(o[n]=r[n],o),{}):r)}function $r(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!$r(e[r],t[r])):!1}function wl(e,t){if(e===t)return e;const r=ha(e)&&ha(t);if(r||As(e)&&As(t)){const o=r?e:Object.keys(e),n=o.length,a=r?t:Object.keys(t),i=a.length,l=r?[]:{};let c=0;for(let u=0;u<i;u++){const m=r?u:a[u];(!r&&o.includes(m)||r)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,c++):(l[m]=wl(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&c++)}return n===i&&c===n?e:l}return t}function Ts(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ha(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function As(e){if(!ma(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ma(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ma(e){return Object.prototype.toString.call(e)==="[object Object]"}function Xm(e){return new Promise(t=>{setTimeout(t,e)})}function Ps(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?wl(e,t):t}function Jm(e,t,r=0){const o=[...e,t];return r&&o.length>r?o.slice(1):o}function Zm(e,t,r=0){const o=[t,...e];return r&&o.length>r?o.slice(0,-1):o}var vn=Symbol();function Sl(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Lt,yt,sr,Fa,ep=(Fa=class extends Yr{constructor(){super();V(this,Lt);V(this,yt);V(this,sr);D(this,sr,t=>{if(!Wt&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,yt)||this.setEventListener(N(this,sr))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,yt))==null||t.call(this),D(this,yt,void 0))}setEventListener(t){var r;D(this,sr,t),(r=N(this,yt))==null||r.call(this),D(this,yt,t(o=>{typeof o=="boolean"?this.setFocused(o):this.onFocus()}))}setFocused(t){N(this,Lt)!==t&&(D(this,Lt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof N(this,Lt)=="boolean"?N(this,Lt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Lt=new WeakMap,yt=new WeakMap,sr=new WeakMap,Fa),yn=new ep,nr,bt,ar,Ba,tp=(Ba=class extends Yr{constructor(){super();V(this,nr,!0);V(this,bt);V(this,ar);D(this,ar,t=>{if(!Wt&&window.addEventListener){const r=()=>t(!0),o=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",o)}}})}onSubscribe(){N(this,bt)||this.setEventListener(N(this,ar))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,bt))==null||t.call(this),D(this,bt,void 0))}setEventListener(t){var r;D(this,ar,t),(r=N(this,bt))==null||r.call(this),D(this,bt,t(this.setOnline.bind(this)))}setOnline(t){N(this,nr)!==t&&(D(this,nr,t),this.listeners.forEach(o=>{o(t)}))}isOnline(){return N(this,nr)}},nr=new WeakMap,bt=new WeakMap,ar=new WeakMap,Ba),Co=new tp;function Ms(){let e,t;const r=new Promise((n,a)=>{e=n,t=a});r.status="pending",r.catch(()=>{});function o(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{o({status:"fulfilled",value:n}),e(n)},r.reject=n=>{o({status:"rejected",reason:n}),t(n)},r}function rp(e){return Math.min(1e3*2**e,3e4)}function Nl(e){return(e??"online")==="online"?Co.isOnline():!0}var Cl=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function os(e){return e instanceof Cl}function jl(e){let t=!1,r=0,o=!1,n;const a=Ms(),i=p=>{var x;o||(f(new Cl(p)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>yn.isFocused()&&(e.networkMode==="always"||Co.isOnline())&&e.canRun(),m=()=>Nl(e.networkMode)&&e.canRun(),h=p=>{var x;o||(o=!0,(x=e.onSuccess)==null||x.call(e,p),n==null||n(),a.resolve(p))},f=p=>{var x;o||(o=!0,(x=e.onError)==null||x.call(e,p),n==null||n(),a.reject(p))},g=()=>new Promise(p=>{var x;n=y=>{(o||u())&&p(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var p;n=void 0,o||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(o)return;let p;const x=r===0?e.initialPromise:void 0;try{p=x??e.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(h).catch(y=>{var T;if(o)return;const b=e.retry??(Wt?0:3),w=e.retryDelay??rp,S=typeof w=="function"?w(r,y):w,j=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(t||!j){f(y);return}r++,(T=e.onFail)==null||T.call(e,r,y),Xm(S).then(()=>u()?void 0:g()).then(()=>{t?f(y):v()})})};return{promise:a,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?v():g().then(v),a)}}function op(){let e=[],t=0,r=l=>{l()},o=l=>{l()},n=l=>setTimeout(l,0);const a=l=>{t?e.push(l):n(()=>{r(l)})},i=()=>{const l=e;e=[],l.length&&n(()=>{o(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{o=l},setScheduler:l=>{n=l}}}var Ne=op(),_t,$a,kl=($a=class{constructor(){V(this,_t)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rs(this.gcTime)&&D(this,_t,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Wt?1/0:5*60*1e3))}clearGcTimeout(){N(this,_t)&&(clearTimeout(N(this,_t)),D(this,_t,void 0))}},_t=new WeakMap,$a),ir,lr,We,Ce,Hr,Dt,Ge,lt,Ha,sp=(Ha=class extends kl{constructor(t){super();V(this,Ge);V(this,ir);V(this,lr);V(this,We);V(this,Ce);V(this,Hr);V(this,Dt);D(this,Dt,!1),D(this,Hr,t.defaultOptions),this.setOptions(t.options),this.observers=[],D(this,We,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,D(this,ir,np(this.options)),this.state=t.state??N(this,ir),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,Ce))==null?void 0:t.promise}setOptions(t){this.options={...N(this,Hr),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,We).remove(this)}setData(t,r){const o=Ps(this.state.data,t,this.options);return J(this,Ge,lt).call(this,{data:o,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),o}setState(t,r){J(this,Ge,lt).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var o,n;const r=(o=N(this,Ce))==null?void 0:o.promise;return(n=N(this,Ce))==null||n.cancel(t),r?r.then(ze).catch(ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,ir))}isActive(){return this.observers.some(t=>qe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!bl(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(o=>o.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,Ce))==null||r.continue()}onOnline(){var r;const t=this.observers.find(o=>o.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,Ce))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,We).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(N(this,Ce)&&(N(this,Dt)?N(this,Ce).cancel({revert:!0}):N(this,Ce).cancelRetry()),this.scheduleGc()),N(this,We).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||J(this,Ge,lt).call(this,{type:"invalidate"})}fetch(t,r){var c,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,Ce))return N(this,Ce).continueRetry(),N(this,Ce).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const o=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(D(this,Dt,!0),o.signal)})},a=()=>{const h=Sl(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return n(f),D(this,Dt,!1),this.options.persister?this.options.persister(h,f,this):h(f)},i={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(i),(c=this.options.behavior)==null||c.onFetch(i,this),D(this,lr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=i.fetchOptions)==null?void 0:u.meta))&&J(this,Ge,lt).call(this,{type:"fetch",meta:(m=i.fetchOptions)==null?void 0:m.meta});const l=h=>{var f,g,v,p;os(h)&&h.silent||J(this,Ge,lt).call(this,{type:"error",error:h}),os(h)||((g=(f=N(this,We).config).onError)==null||g.call(f,h,this),(p=(v=N(this,We).config).onSettled)==null||p.call(v,this.state.data,h,this)),this.scheduleGc()};return D(this,Ce,jl({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:o.abort.bind(o),onSuccess:h=>{var f,g,v,p;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){l(x);return}(g=(f=N(this,We).config).onSuccess)==null||g.call(f,h,this),(p=(v=N(this,We).config).onSettled)==null||p.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{J(this,Ge,lt).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{J(this,Ge,lt).call(this,{type:"pause"})},onContinue:()=>{J(this,Ge,lt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),N(this,Ce).start()}},ir=new WeakMap,lr=new WeakMap,We=new WeakMap,Ce=new WeakMap,Hr=new WeakMap,Dt=new WeakMap,Ge=new WeakSet,lt=function(t){const r=o=>{switch(t.type){case"failed":return{...o,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...El(o.data,this.options),fetchMeta:t.meta??null};case"success":return{...o,data:t.data,dataUpdateCount:o.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return os(n)&&n.revert&&N(this,lr)?{...N(this,lr),fetchStatus:"idle"}:{...o,error:n,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...t.state}}};this.state=r(this.state),Ne.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),N(this,We).notify({query:this,type:"updated",action:t})})},Ha);function El(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Nl(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function np(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,o=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var et,Ua,ap=(Ua=class extends Yr{constructor(t={}){super();V(this,et);this.config=t,D(this,et,new Map)}build(t,r,o){const n=r.queryKey,a=r.queryHash??xn(n,r);let i=this.get(a);return i||(i=new sp({cache:this,queryKey:n,queryHash:a,options:t.defaultQueryOptions(r),state:o,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){N(this,et).has(t.queryHash)||(N(this,et).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=N(this,et).get(t.queryHash);r&&(t.destroy(),r===t&&N(this,et).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ne.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,et).get(t)}getAll(){return[...N(this,et).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(o=>ua(r,o))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(o=>ua(t,o)):r}notify(t){Ne.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ne.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ne.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},et=new WeakMap,Ua),tt,Te,Ft,rt,gt,Wa,ip=(Wa=class extends kl{constructor(t){super();V(this,rt);V(this,tt);V(this,Te);V(this,Ft);this.mutationId=t.mutationId,D(this,Te,t.mutationCache),D(this,tt,[]),this.state=t.state||lp(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,tt).includes(t)||(N(this,tt).push(t),this.clearGcTimeout(),N(this,Te).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){D(this,tt,N(this,tt).filter(r=>r!==t)),this.scheduleGc(),N(this,Te).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,tt).length||(this.state.status==="pending"?this.scheduleGc():N(this,Te).remove(this))}continue(){var t;return((t=N(this,Ft))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,a,i,l,c,u,m,h,f,g,v,p,x,y,b,w,S,j,T,E;D(this,Ft,jl({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,C)=>{J(this,rt,gt).call(this,{type:"failed",failureCount:R,error:C})},onPause:()=>{J(this,rt,gt).call(this,{type:"pause"})},onContinue:()=>{J(this,rt,gt).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,Te).canRun(this)}));const r=this.state.status==="pending",o=!N(this,Ft).canStart();try{if(!r){J(this,rt,gt).call(this,{type:"pending",variables:t,isPaused:o}),await((a=(n=N(this,Te).config).onMutate)==null?void 0:a.call(n,t,this));const C=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));C!==this.state.context&&J(this,rt,gt).call(this,{type:"pending",context:C,variables:t,isPaused:o})}const R=await N(this,Ft).start();return await((u=(c=N(this,Te).config).onSuccess)==null?void 0:u.call(c,R,t,this.state.context,this)),await((h=(m=this.options).onSuccess)==null?void 0:h.call(m,R,t,this.state.context)),await((g=(f=N(this,Te).config).onSettled)==null?void 0:g.call(f,R,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,R,null,t,this.state.context)),J(this,rt,gt).call(this,{type:"success",data:R}),R}catch(R){try{throw await((y=(x=N(this,Te).config).onError)==null?void 0:y.call(x,R,t,this.state.context,this)),await((w=(b=this.options).onError)==null?void 0:w.call(b,R,t,this.state.context)),await((j=(S=N(this,Te).config).onSettled)==null?void 0:j.call(S,void 0,R,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,void 0,R,t,this.state.context)),R}finally{J(this,rt,gt).call(this,{type:"error",error:R})}}finally{N(this,Te).runNext(this)}}},tt=new WeakMap,Te=new WeakMap,Ft=new WeakMap,rt=new WeakSet,gt=function(t){const r=o=>{switch(t.type){case"failed":return{...o,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...o,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:t.error,failureCount:o.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ne.batch(()=>{N(this,tt).forEach(o=>{o.onMutationUpdate(t)}),N(this,Te).notify({mutation:this,type:"updated",action:t})})},Wa);function lp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fe,Ur,za,cp=(za=class extends Yr{constructor(t={}){super();V(this,Fe);V(this,Ur);this.config=t,D(this,Fe,new Map),D(this,Ur,Date.now())}build(t,r,o){const n=new ip({mutationCache:this,mutationId:++Zr(this,Ur)._,options:t.defaultMutationOptions(r),state:o});return this.add(n),n}add(t){const r=so(t),o=N(this,Fe).get(r)??[];o.push(t),N(this,Fe).set(r,o),this.notify({type:"added",mutation:t})}remove(t){var o;const r=so(t);if(N(this,Fe).has(r)){const n=(o=N(this,Fe).get(r))==null?void 0:o.filter(a=>a!==t);n&&(n.length===0?N(this,Fe).delete(r):N(this,Fe).set(r,n))}this.notify({type:"removed",mutation:t})}canRun(t){var o;const r=(o=N(this,Fe).get(so(t)))==null?void 0:o.find(n=>n.state.status==="pending");return!r||r===t}runNext(t){var o;const r=(o=N(this,Fe).get(so(t)))==null?void 0:o.find(n=>n!==t&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Ne.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...N(this,Fe).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(o=>fa(r,o))}findAll(t={}){return this.getAll().filter(r=>fa(t,r))}notify(t){Ne.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ne.batch(()=>Promise.all(t.map(r=>r.continue().catch(ze))))}},Fe=new WeakMap,Ur=new WeakMap,za);function so(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function pa(e){return{onFetch:(t,r)=>{var m,h,f,g,v;const o=t.options,n=(f=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((g=t.state.data)==null?void 0:g.pages)||[],i=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},y=Sl(t.options,t.fetchOptions),b=async(w,S,j)=>{if(p)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T={queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};x(T);const E=await y(T),{maxPages:R}=t.options,C=j?Zm:Jm;return{pages:C(w.pages,E,R),pageParams:C(w.pageParams,S,R)}};if(n&&a.length){const w=n==="backward",S=w?dp:ga,j={pages:a,pageParams:i},T=S(o,j);l=await b(j,T,w)}else{const w=e??a.length;do{const S=c===0?i[0]??o.initialPageParam:ga(o,l);if(c>0&&S==null)break;l=await b(l,S),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var p,x;return(x=(p=t.options).persister)==null?void 0:x.call(p,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function ga(e,{pages:t,pageParams:r}){const o=t.length-1;return t.length>0?e.getNextPageParam(t[o],t,r[o],r):void 0}function dp(e,{pages:t,pageParams:r}){var o;return t.length>0?(o=e.getPreviousPageParam)==null?void 0:o.call(e,t[0],t,r[0],r):void 0}var ve,wt,St,cr,dr,Nt,ur,fr,Va,up=(Va=class{constructor(e={}){V(this,ve);V(this,wt);V(this,St);V(this,cr);V(this,dr);V(this,Nt);V(this,ur);V(this,fr);D(this,ve,e.queryCache||new ap),D(this,wt,e.mutationCache||new cp),D(this,St,e.defaultOptions||{}),D(this,cr,new Map),D(this,dr,new Map),D(this,Nt,0)}mount(){Zr(this,Nt)._++,N(this,Nt)===1&&(D(this,ur,yn.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,ve).onFocus())})),D(this,fr,Co.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,ve).onOnline())})))}unmount(){var e,t;Zr(this,Nt)._--,N(this,Nt)===0&&((e=N(this,ur))==null||e.call(this),D(this,ur,void 0),(t=N(this,fr))==null||t.call(this),D(this,fr,void 0))}isFetching(e){return N(this,ve).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,wt).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,ve).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),o=N(this,ve).build(this,r);return e.revalidateIfStale&&o.isStaleByTime(rr(r.staleTime,o))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return N(this,ve).findAll(e).map(({queryKey:t,state:r})=>{const o=r.data;return[t,o]})}setQueryData(e,t,r){const o=this.defaultQueryOptions({queryKey:e}),n=N(this,ve).get(o.queryHash),a=n==null?void 0:n.state.data,i=Qm(t,a);if(i!==void 0)return N(this,ve).build(this,o).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Ne.batch(()=>N(this,ve).findAll(e).map(({queryKey:o})=>[o,this.setQueryData(o,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,ve).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=N(this,ve);Ne.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=N(this,ve),o={type:"active",...e};return Ne.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(o,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},o=Ne.batch(()=>N(this,ve).findAll(e).map(n=>n.cancel(r)));return Promise.all(o).then(ze).catch(ze)}invalidateQueries(e={},t={}){return Ne.batch(()=>{if(N(this,ve).findAll(e).forEach(o=>{o.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},o=Ne.batch(()=>N(this,ve).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let a=n.fetch(void 0,r);return r.throwOnError||(a=a.catch(ze)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(o).then(ze)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=N(this,ve).build(this,t);return r.isStaleByTime(rr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ze).catch(ze)}fetchInfiniteQuery(e){return e.behavior=pa(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ze).catch(ze)}ensureInfiniteQueryData(e){return e.behavior=pa(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Co.isOnline()?N(this,wt).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,ve)}getMutationCache(){return N(this,wt)}getDefaultOptions(){return N(this,St)}setDefaultOptions(e){D(this,St,e)}setQueryDefaults(e,t){N(this,cr).set(Br(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,cr).values()];let r={};return t.forEach(o=>{$r(e,o.queryKey)&&(r={...r,...o.defaultOptions})}),r}setMutationDefaults(e,t){N(this,dr).set(Br(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,dr).values()];let r={};return t.forEach(o=>{$r(e,o.mutationKey)&&(r={...r,...o.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,St).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xn(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===vn&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,St).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,ve).clear(),N(this,wt).clear()}},ve=new WeakMap,wt=new WeakMap,St=new WeakMap,cr=new WeakMap,dr=new WeakMap,Nt=new WeakMap,ur=new WeakMap,fr=new WeakMap,Va),Oe,Z,Wr,Ae,Bt,hr,Ct,ot,zr,mr,pr,$t,Ht,jt,gr,ce,Mr,Is,Os,Ls,_s,Ds,Fs,Bs,Rl,Ga,fp=(Ga=class extends Yr{constructor(t,r){super();V(this,ce);V(this,Oe);V(this,Z);V(this,Wr);V(this,Ae);V(this,Bt);V(this,hr);V(this,Ct);V(this,ot);V(this,zr);V(this,mr);V(this,pr);V(this,$t);V(this,Ht);V(this,jt);V(this,gr,new Set);this.options=r,D(this,Oe,t),D(this,ot,null),D(this,Ct,Ms()),this.options.experimental_prefetchInRender||N(this,Ct).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Z).addObserver(this),xa(N(this,Z),this.options)?J(this,ce,Mr).call(this):this.updateResult(),J(this,ce,_s).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $s(N(this,Z),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $s(N(this,Z),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,J(this,ce,Ds).call(this),J(this,ce,Fs).call(this),N(this,Z).removeObserver(this)}setOptions(t,r){const o=this.options,n=N(this,Z);if(this.options=N(this,Oe).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qe(this.options.enabled,N(this,Z))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");J(this,ce,Bs).call(this),N(this,Z).setOptions(this.options),o._defaulted&&!Ts(this.options,o)&&N(this,Oe).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Z),observer:this});const a=this.hasListeners();a&&va(N(this,Z),n,this.options,o)&&J(this,ce,Mr).call(this),this.updateResult(r),a&&(N(this,Z)!==n||qe(this.options.enabled,N(this,Z))!==qe(o.enabled,N(this,Z))||rr(this.options.staleTime,N(this,Z))!==rr(o.staleTime,N(this,Z)))&&J(this,ce,Is).call(this);const i=J(this,ce,Os).call(this);a&&(N(this,Z)!==n||qe(this.options.enabled,N(this,Z))!==qe(o.enabled,N(this,Z))||i!==N(this,jt))&&J(this,ce,Ls).call(this,i)}getOptimisticResult(t){const r=N(this,Oe).getQueryCache().build(N(this,Oe),t),o=this.createResult(r,t);return mp(this,o)&&(D(this,Ae,o),D(this,hr,this.options),D(this,Bt,N(this,Z).state)),o}getCurrentResult(){return N(this,Ae)}trackResult(t,r){const o={};return Object.keys(t).forEach(n=>{Object.defineProperty(o,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),r==null||r(n),t[n])})}),o}trackProp(t){N(this,gr).add(t)}getCurrentQuery(){return N(this,Z)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=N(this,Oe).defaultQueryOptions(t),o=N(this,Oe).getQueryCache().build(N(this,Oe),r);return o.fetch().then(()=>this.createResult(o,r))}fetch(t){return J(this,ce,Mr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,Ae)))}createResult(t,r){var R;const o=N(this,Z),n=this.options,a=N(this,Ae),i=N(this,Bt),l=N(this,hr),u=t!==o?t.state:N(this,Wr),{state:m}=t;let h={...m},f=!1,g;if(r._optimisticResults){const C=this.hasListeners(),k=!C&&xa(t,r),L=C&&va(t,o,r,n);(k||L)&&(h={...h,...El(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:x}=h;if(r.select&&h.data!==void 0)if(a&&h.data===(i==null?void 0:i.data)&&r.select===N(this,zr))g=N(this,mr);else try{D(this,zr,r.select),g=r.select(h.data),g=Ps(a==null?void 0:a.data,g,r),D(this,mr,g),D(this,ot,null)}catch(C){D(this,ot,C)}else g=h.data;if(r.placeholderData!==void 0&&g===void 0&&x==="pending"){let C;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))C=a.data;else if(C=typeof r.placeholderData=="function"?r.placeholderData((R=N(this,pr))==null?void 0:R.state.data,N(this,pr)):r.placeholderData,r.select&&C!==void 0)try{C=r.select(C),D(this,ot,null)}catch(k){D(this,ot,k)}C!==void 0&&(x="success",g=Ps(a==null?void 0:a.data,C,r),f=!0)}N(this,ot)&&(v=N(this,ot),g=N(this,mr),p=Date.now(),x="error");const y=h.fetchStatus==="fetching",b=x==="pending",w=x==="error",S=b&&y,j=g!==void 0,E={status:x,fetchStatus:h.fetchStatus,isPending:b,isSuccess:x==="success",isError:w,isInitialLoading:S,isLoading:S,data:g,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:w&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&j,isStale:bn(t,r),refetch:this.refetch,promise:N(this,Ct)};if(this.options.experimental_prefetchInRender){const C=M=>{E.status==="error"?M.reject(E.error):E.data!==void 0&&M.resolve(E.data)},k=()=>{const M=D(this,Ct,E.promise=Ms());C(M)},L=N(this,Ct);switch(L.status){case"pending":t.queryHash===o.queryHash&&C(L);break;case"fulfilled":(E.status==="error"||E.data!==L.value)&&k();break;case"rejected":(E.status!=="error"||E.error!==L.reason)&&k();break}}return E}updateResult(t){const r=N(this,Ae),o=this.createResult(N(this,Z),this.options);if(D(this,Bt,N(this,Z).state),D(this,hr,this.options),N(this,Bt).data!==void 0&&D(this,pr,N(this,Z)),Ts(o,r))return;D(this,Ae,o);const n={},a=()=>{if(!r)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!N(this,gr).size)return!0;const c=new Set(l??N(this,gr));return this.options.throwOnError&&c.add("error"),Object.keys(N(this,Ae)).some(u=>{const m=u;return N(this,Ae)[m]!==r[m]&&c.has(m)})};(t==null?void 0:t.listeners)!==!1&&a()&&(n.listeners=!0),J(this,ce,Rl).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&J(this,ce,_s).call(this)}},Oe=new WeakMap,Z=new WeakMap,Wr=new WeakMap,Ae=new WeakMap,Bt=new WeakMap,hr=new WeakMap,Ct=new WeakMap,ot=new WeakMap,zr=new WeakMap,mr=new WeakMap,pr=new WeakMap,$t=new WeakMap,Ht=new WeakMap,jt=new WeakMap,gr=new WeakMap,ce=new WeakSet,Mr=function(t){J(this,ce,Bs).call(this);let r=N(this,Z).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(ze)),r},Is=function(){J(this,ce,Ds).call(this);const t=rr(this.options.staleTime,N(this,Z));if(Wt||N(this,Ae).isStale||!Rs(t))return;const o=bl(N(this,Ae).dataUpdatedAt,t)+1;D(this,$t,setTimeout(()=>{N(this,Ae).isStale||this.updateResult()},o))},Os=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Z)):this.options.refetchInterval)??!1},Ls=function(t){J(this,ce,Fs).call(this),D(this,jt,t),!(Wt||qe(this.options.enabled,N(this,Z))===!1||!Rs(N(this,jt))||N(this,jt)===0)&&D(this,Ht,setInterval(()=>{(this.options.refetchIntervalInBackground||yn.isFocused())&&J(this,ce,Mr).call(this)},N(this,jt)))},_s=function(){J(this,ce,Is).call(this),J(this,ce,Ls).call(this,J(this,ce,Os).call(this))},Ds=function(){N(this,$t)&&(clearTimeout(N(this,$t)),D(this,$t,void 0))},Fs=function(){N(this,Ht)&&(clearInterval(N(this,Ht)),D(this,Ht,void 0))},Bs=function(){const t=N(this,Oe).getQueryCache().build(N(this,Oe),this.options);if(t===N(this,Z))return;const r=N(this,Z);D(this,Z,t),D(this,Wr,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Rl=function(t){Ne.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(N(this,Ae))}),N(this,Oe).getQueryCache().notify({query:N(this,Z),type:"observerResultsUpdated"})})},Ga);function hp(e,t){return qe(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function xa(e,t){return hp(e,t)||e.state.data!==void 0&&$s(e,t,t.refetchOnMount)}function $s(e,t,r){if(qe(t.enabled,e)!==!1){const o=typeof r=="function"?r(e):r;return o==="always"||o!==!1&&bn(e,t)}return!1}function va(e,t,r,o){return(e!==t||qe(o.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&bn(e,r)}function bn(e,t){return qe(t.enabled,e)!==!1&&e.isStaleByTime(rr(t.staleTime,e))}function mp(e,t){return!Ts(e.getCurrentResult(),t)}var Tl=d.createContext(void 0),wn=e=>{const t=d.useContext(Tl);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pp=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Tl.Provider,{value:e,children:t})),Al=d.createContext(!1),gp=()=>d.useContext(Al);Al.Provider;function xp(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var vp=d.createContext(xp()),yp=()=>d.useContext(vp);function bp(e,t){return typeof e=="function"?e(...t):!!e}function wp(){}var Sp=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Np=e=>{d.useEffect(()=>{e.clearReset()},[e])},Cp=({result:e,errorResetBoundary:t,throwOnError:r,query:o})=>e.isError&&!t.isReset()&&!e.isFetching&&o&&bp(r,[e.error,o]),jp=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},kp=(e,t)=>e.isLoading&&e.isFetching&&!t,Ep=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ya=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Rp(e,t,r){var m,h,f,g,v;const o=wn(),n=gp(),a=yp(),i=o.defaultQueryOptions(e);(h=(m=o.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,i),i._optimisticResults=n?"isRestoring":"optimistic",jp(i),Sp(i,a),Np(a);const l=!o.getQueryCache().get(i.queryHash),[c]=d.useState(()=>new t(o,i)),u=c.getOptimisticResult(i);if(d.useSyncExternalStore(d.useCallback(p=>{const x=n?()=>{}:c.subscribe(Ne.batchCalls(p));return c.updateResult(),x},[c,n]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),Ep(i,u))throw ya(i,c,a);if(Cp({result:u,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash)}))throw u.error;if((g=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,i,u),i.experimental_prefetchInRender&&!Wt&&kp(u,n)){const p=l?ya(i,c,a):(v=o.getQueryCache().get(i.queryHash))==null?void 0:v.promise;p==null||p.catch(wp).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function zt(e,t){return Rp(e,fp)}const Tp={apiKey:"AIzaSyAizi-kY4VH5VfqbYyrg9FwLt5TGbrX_RI",authDomain:"books-794a8.firebaseapp.com",projectId:"books-794a8",storageBucket:"books-794a8.firebasestorage.app",messagingSenderId:"28303860806",appId:"1:28303860806:web:df2ddcd86f08c7a4145647",measurementId:"G-LBNGSGFXGR"},Sn=Td(Tp),Y=Ad(Sn),Qe=Pd(Sn),Ap=Md(Sn);Id(Qe,Od).catch(e=>{console.error("Error setting auth persistence:",e)});const te={BOOKS:"books",WANTED_BOOKS:"wanted_books",CHATS:"chats",MESSAGES:"messages",PROFILES:"profiles"},Pp=async e=>{var t,r,o;try{const n=je(Y,te.PROFILES,e),a=await st(n);if(a.exists()){const i=a.data();return{new_matches:((t=i.email_notifications)==null?void 0:t.new_matches)??!0,book_availability:((r=i.email_notifications)==null?void 0:r.book_availability)??!0,new_messages:((o=i.email_notifications)==null?void 0:o.new_messages)??!0}}return{new_matches:!0,book_availability:!0,new_messages:!0}}catch(n){return console.error("Error getting notification preferences:",n),{new_matches:!0,book_availability:!0,new_messages:!0}}},Mp=async e=>{try{const t=je(Y,te.PROFILES,e),r=await st(t);return r.exists()&&r.data().email||null}catch(t){return console.error("Error getting user email:",t),null}},Nn=async(e,t)=>{try{console.log(`Checking notification preferences for user ${e}, type: ${t}`);const[r,o]=await Promise.all([Pp(e),Mp(e)]);console.log(`User ${e} preferences:`,r),console.log(`User ${e} email:`,o);const n=r[t]&&o!==null;return console.log(`Should send ${t} notification to ${e}: ${n}`),{shouldSend:n,email:o}}catch(r){return console.error("Error checking notification preferences:",r),{shouldSend:!1,email:null}}},Ip="https://w5hni7cponmo.manus.space/api/email",Cn=async(e,t,r={})=>{const{timeout:o=1e4,retries:n=3,retryDelay:a=1e3}=r;for(let i=1;i<=n;i++)try{console.log(` Attempt ${i}/${n}: Sending email to ${t} via ${e}`);const l=new AbortController,c=setTimeout(()=>l.abort(),o),u=await fetch(`${Ip}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t}),signal:l.signal});if(clearTimeout(c),!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);const m=await u.json();if(m.success)return console.log(` Email sent successfully on attempt ${i}: ${m.message}`),!0;if(console.warn(` Email service returned failure on attempt ${i}: ${m.error||m.message}`),i===n)return console.error(` All ${n} attempts failed for ${t}`),!1}catch(l){if(console.warn(` Attempt ${i} failed:`,l),i===n)return console.error(` All ${n} attempts failed for ${t}:`,l),!1;const c=a*Math.pow(2,i-1);console.log(` Waiting ${c}ms before retry...`),await new Promise(u=>setTimeout(u,c))}return!1},Op=async e=>(console.log(` IMMEDIATE: Sending new match notification to: ${e}`),await Cn("/send-new-match",e,{timeout:8e3,retries:3,retryDelay:500})),Lp=async e=>(console.log(` IMMEDIATE: Sending book availability notification to: ${e}`),await Cn("/send-book-available",e,{timeout:8e3,retries:3,retryDelay:500})),Hs=async e=>(console.log(` IMMEDIATE: Sending new message notification to: ${e}`),await Cn("/send-new-message",e,{timeout:8e3,retries:3,retryDelay:500})),jn=async(e,t,r,o,n)=>{const a=Date.now();try{if(console.log(` IMMEDIATE NOTIFICATION: ${e} for user ${o}`),console.log(` Context: shouldSend=${r}, email=${t}, timestamp=${new Date().toISOString()}`),!r)return console.log(` User ${o} has disabled ${e} notifications - respecting their choice`),!1;if(!t)return console.error(` User ${o} wants ${e} notifications but has no email address`),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return console.error(` Invalid email format for user ${o}: ${t}`),!1;console.log(` SENDING IMMEDIATE ${e} notification to ${t} for user ${o}`);let l=!1;switch(e){case"new_messages":l=await Hs(t);break;case"new_matches":l=await Op(t);break;case"book_availability":l=await Lp(t);break;default:return console.error(` Unknown notification type: ${e}`),!1}const c=Date.now()-a;return l?(console.log(` IMMEDIATE ${e} notification sent successfully to ${t} for user ${o} in ${c}ms`),console.log(` SUCCESS METRICS: type=${e}, user=${o}, email=${t}, duration=${c}ms, timestamp=${new Date().toISOString()}`),!0):(console.error(` FAILED to send IMMEDIATE ${e} notification to ${t} for user ${o} after ${c}ms`),console.log(` FAILURE METRICS: type=${e}, user=${o}, email=${t}, duration=${c}ms, timestamp=${new Date().toISOString()}`),!1)}catch(i){const l=Date.now()-a;return console.error(` CRITICAL ERROR sending IMMEDIATE ${e} notification for user ${o} after ${l}ms:`,i),console.log(` ERROR METRICS: type=${e}, user=${o}, email=${t}, duration=${l}ms, error=${i}, timestamp=${new Date().toISOString()}`),!1}},_p=async e=>{var t;try{const r=Qe.currentUser;if(!r)throw new Error("User not authenticated");const o={...e,owner:{id:r.uid,name:r.displayName||"Anonymous",neighborhood:((t=r.profile)==null?void 0:t.defaultNeighborhood)||e.neighborhood||"Unknown"},book_type:"have",created_at:Le(),updated_at:Le()};return{id:(await Vr(be(Y,te.BOOKS),o)).id,...o}}catch(r){throw console.error("Error adding book:",r),r}},Dp=async e=>{try{const t=Qe.currentUser;if(!t)throw new Error("User not authenticated");const r={...e,user_id:t.uid,book_type:"want",created_at:Le(),updated_at:Le()};return{id:(await Vr(be(Y,te.WANTED_BOOKS),r)).id,...r}}catch(t){throw console.error("Error adding wanted book:",t),t}},Fp=async e=>{try{const t=je(Y,te.BOOKS,e);return await Ya(t),{success:!0}}catch(t){throw console.error("Error deleting book:",t),t}},Bp=async e=>{try{const t=je(Y,te.WANTED_BOOKS,e);return await Ya(t),{success:!0}}catch(t){throw console.error("Error deleting wanted book:",t),t}},Pl=async e=>{try{const t=be(Y,te.BOOKS),r=Pe(t,Me("owner.id","==",e));return(await Ie(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting books by user:",t),t}},Ml=async e=>{try{const t=be(Y,te.WANTED_BOOKS),r=Pe(t,Me("user_id","==",e));return(await Ie(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting wanted books by user:",t),t}},$p=async(e,t)=>{try{return(await Ld(Qe,e,t)).user}catch(r){throw console.error("Error signing in:",r),r}},Hp=async(e,t,r)=>{try{const o=await _d(Qe,e,t);return r&&o.user,o.user}catch(o){throw console.error("Error signing up:",o),o}},Up=async()=>{try{const e=new Dd;return(await Fd(Qe,e)).user}catch(e){throw console.error("Error signing in with Google:",e),e}},Il=async()=>{try{return await Bd(Qe),{success:!0}}catch(e){throw console.error("Error signing out:",e),e}},Wp=e=>Ka(Qe,e),no=()=>Qe.currentUser,zp=async e=>{try{const t=be(Y,te.CHATS),r=Pe(t,Me("participants","array-contains",e),Xs("updated_at","desc"));return(await Ie(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting chats:",t),t}},Vp=async(e,t,r,o=[])=>{var n;try{const a=Qe.currentUser;if(!a)throw new Error("User not authenticated");const i={chat_id:e,content:t,sender_id:r||a.uid,sender_name:a.displayName||"Anonymous",created_at:Le(),attachments:o},l=await Vr(be(Y,te.MESSAGES),i);let c=t;!t&&o.length>0?c=` ${o.length} file${o.length>1?"s":""}`:t&&o.length>0&&(c=`${t} `);const u=je(Y,te.CHATS,e);await ms(u,{updated_at:Le(),last_message:c});try{console.log(" Processing email notification for new message...");const m=await st(u);if(m.exists()){const f=(n=m.data().participants)==null?void 0:n.find(g=>g!==(r||a.uid));if(f){console.log(` Found recipient: ${f}, checking notification preferences...`);const{shouldSend:g,email:v}=await Nn(f,"new_messages");console.log(` Notification check: shouldSend=${g}, email=${v}`),await jn("new_messages",v,g,f)?console.log(` Immediate message notification sent to user ${f}`):console.warn(` Failed to send immediate message notification to user ${f}`)}else console.warn(" No recipient found in chat participants")}else console.warn(" Chat document not found")}catch(m){console.error(" Error processing email notification:",m)}return{id:l.id,...i}}catch(a){throw console.error("Error sending message:",a),a}},Ol=d.createContext({user:null});function Gp({children:e}){const[t,r]=d.useState(null);return d.useEffect(()=>{const o=Wp(n=>{r(n)});return()=>o()},[]),s.jsx(Ol.Provider,{value:{user:t},children:e})}const Rr=()=>d.useContext(Ol),qp=on("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=d.forwardRef(({className:e,variant:t,size:r,asChild:o=!1,...n},a)=>{const i=o?xr:"button";return s.jsx(i,{className:ee(qp({variant:t,size:r,className:e})),ref:a,...n})});U.displayName="Button";function Kp(){const{user:e}=Rr(),t=Gt(),r=async()=>{try{await Il(),t("/")}catch{le.error("Error signing out")}};return s.jsx("header",{className:"bg-white border-b border-border sticky top-0 z-50",children:s.jsxs("div",{className:"container max-w-7xl mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bs,{className:"h-6 w-6 text-bookswap-darkblue"}),s.jsx(re,{to:"/",className:"font-playfair font-bold text-xl md:text-2xl text-bookswap-darkblue",children:"English Book Swap Jerusalem"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:e?s.jsxs(s.Fragment,{children:[s.jsx(U,{variant:"ghost",size:"icon",asChild:!0,children:s.jsx(re,{to:"/profile",children:s.jsx(sn,{className:"h-4 w-4"})})}),s.jsx(U,{variant:"ghost",size:"icon",onClick:r,children:s.jsx(Pi,{className:"h-4 w-4"})})]}):s.jsx(U,{variant:"default",asChild:!0,children:s.jsx(re,{to:"/auth",children:"Sign In"})})})]})})}function Yp(){return s.jsxs("div",{className:"bg-muted rounded-md p-4 flex items-start space-x-3",children:[s.jsx(Zu,{className:"h-5 w-5 text-bookswap-darkblue shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("p",{className:"font-medium mb-1",children:"Safety First"}),s.jsx("p",{children:"Book Swap Jerusalem is a goodwill-based platform. When meeting to exchange books, please take common safety precautions: meet in public places during daylight hours, tell someone where you're going, and trust your instincts. We recommend initial meetings at cafs, libraries, or other public venues."})]})]})}function Qp(){return s.jsx("footer",{className:"bg-white border-t border-border mt-auto",children:s.jsxs("div",{className:"container max-w-7xl mx-auto px-4 py-8",children:[s.jsx(Yp,{}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-8 pt-6 border-t border-border",children:[s.jsx("div",{className:"mb-4 md:mb-0",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," English Book Swap Jerusalem"]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(re,{to:"/about",className:"text-sm text-muted-foreground hover:underline",children:"About"}),s.jsx(re,{to:"/faq",className:"text-sm text-muted-foreground hover:underline",children:"FAQ"}),s.jsx(re,{to:"/contact",className:"text-sm text-muted-foreground hover:underline",children:"Contact"}),s.jsx(re,{to:"/terms",className:"text-sm text-muted-foreground hover:underline",children:"Terms"}),s.jsx(re,{to:"/privacy",className:"text-sm text-muted-foreground hover:underline",children:"Privacy"})]})]})]})})}function Xp(){const e=ko(),{user:t}=Rr(),r=Gt(),o=async()=>{try{await Il(),r("/"),le.success("Logged out successfully")}catch{le.error("Error signing out")}},n=a=>e.pathname===a;return t?s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-border z-50",children:s.jsxs("div",{className:"flex justify-around items-center h-16 px-2",children:[s.jsxs(re,{to:"/",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/")?"text-primary":"text-muted-foreground"),children:[s.jsx(of,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Home"})]}),s.jsxs(re,{to:"/books",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/books")?"text-primary":"text-muted-foreground"),children:[s.jsx(_r,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Browse"})]}),s.jsxs(re,{to:"/my-books",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/my-books")?"text-primary":"text-muted-foreground"),children:[s.jsx(Xu,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"My Books"})]}),s.jsxs(re,{to:"/matches",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/matches")?"text-primary":"text-muted-foreground"),children:[s.jsx(Ii,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Matches"})]}),s.jsxs(re,{to:"/chat",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/chat")?"text-primary":"text-muted-foreground"),children:[s.jsx(Mi,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Messages"})]}),s.jsxs(re,{to:"/profile",className:ee("flex flex-col items-center justify-center w-full h-full text-xs",n("/profile")?"text-primary":"text-muted-foreground"),children:[s.jsx(sn,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{onClick:o,className:"flex flex-col items-center justify-center w-full h-full text-xs text-muted-foreground",children:[s.jsx(Pi,{className:"h-5 w-5 mb-1"}),s.jsx("span",{children:"Logout"})]})]})}):null}const ss=768;function Ll(){const[e,t]=d.useState(void 0);return d.useEffect(()=>{const r=window.matchMedia(`(max-width: ${ss-1}px)`),o=()=>{t(window.innerWidth<ss)};return r.addEventListener("change",o),t(window.innerWidth<ss),()=>r.removeEventListener("change",o)},[]),!!e}function we({children:e,hideHeader:t}){Ll();const o=ko().pathname==="/my-books",n=t||o;return s.jsxs("div",{className:"flex flex-col min-h-screen",children:[!n&&s.jsx(Kp,{}),s.jsx("main",{className:"flex-grow pb-16",children:e}),s.jsx(Qp,{}),s.jsx(Xp,{})]})}const _l="AIzaSyDSGm97K_kt3evfXe3klrPtNF1Q4vrW_2Y",Dl="https://www.googleapis.com/books/v1",Jp=async e=>{try{const t=await fetch(`${Dl}/volumes?q=${encodeURIComponent(e)}&key=${_l}&maxResults=10`);if(!t.ok)throw new Error("Failed to fetch books");const r=await t.json();return console.log("API Response:",r),r.items||[]}catch(t){throw console.error("Error searching books:",t),t}},Zp=async e=>{try{const t=await fetch(`${Dl}/volumes/${e}?key=${_l}`);if(!t.ok)throw new Error("Failed to fetch book details");return await t.json()}catch(t){throw console.error("Error fetching book details:",t),t}},kn=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));kn.displayName="Card";const eg=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("flex flex-col space-y-1.5 p-6",e),...t}));eg.displayName="CardHeader";const tg=d.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));tg.displayName="CardTitle";const rg=d.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:ee("text-sm text-muted-foreground",e),...t}));rg.displayName="CardDescription";const En=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("p-6 pt-0",e),...t}));En.displayName="CardContent";const Fl=d.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:ee("flex items-center p-6 pt-0",e),...t}));Fl.displayName="CardFooter";const og=async(e,t,r)=>{try{const o=be(Y,"chats"),n=Pe(o,Me("participants","array-contains",e)),a=await Ie(n);let i=null;if(a.forEach(m=>{m.data().participants.includes(t)&&(i=m.id)}),i)return i;let l="";if(r){const m=await st(je(Y,te.BOOKS,r));m.exists()&&(l=m.data().title)}const c={participants:[e,t],created_at:Le(),updated_at:Le(),book_id:r,book_title:l};return(await Vr(be(Y,"chats"),c)).id}catch(o){throw console.error("Error creating or getting chat:",o),o}},Bl=()=>{const[e,t]=d.useState(null),[r,o]=d.useState(null),[n,a]=d.useState(!0);return d.useEffect(()=>{const i=Ka(Qe,async l=>{if(t(l),l)try{const c=await st(je(Y,te.PROFILES,l.uid));c.exists()?o(c.data()):o(null)}catch(c){console.error("Error fetching user profile:",c),o(null)}else o(null);a(!1)});return()=>i()},[]),{user:e,profile:r,loading:n}};function Us({book:e,onRequestSwap:t,isLoadingSwap:r=!1}){var f;const o=Gt(),{user:n}=Bl(),[a,i]=d.useState(!1),{data:l}=zt({queryKey:["book",e.google_books_id],queryFn:()=>e.google_books_id?Zp(e.google_books_id):null,enabled:!!e.google_books_id}),c=(f=l==null?void 0:l.volumeInfo.imageLinks)==null?void 0:f.thumbnail,u=async()=>{if(!n){ye({title:"Authentication required",description:"Please log in to send a message.",variant:"destructive"});return}if(!e.owner.id){ye({title:"Error",description:"Cannot message this book owner.",variant:"destructive"});return}if(n.uid===e.owner.id){ye({title:"Cannot message yourself",description:"You cannot send a message to yourself.",variant:"destructive"});return}i(!0);try{const g=await og(n.uid,e.owner.id,e.id);o(`/chat/${g}`)}catch(g){console.error("Error creating chat:",g),ye({title:"Error",description:"Failed to start conversation. Please try again.",variant:"destructive"})}finally{i(!1)}},m=()=>{e.owner.id&&t(e.id,e.owner.id)},h=()=>{if(e.google_books_id)window.open(`https://books.google.com/books?id=${e.google_books_id}`,"_blank");else{const g=encodeURIComponent(`${e.title} ${e.author}`);window.open(`https://books.google.com/books?q=${g}`,"_blank")}};return s.jsxs(kn,{className:"h-full flex flex-col",children:[c?s.jsx("div",{className:"w-full h-48 bg-cover bg-center rounded-t-lg cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundImage:`url(${c})`},onClick:h,title:"View on Google Books"}):s.jsxs("div",{className:"w-full h-48 p-4 flex flex-col justify-center items-center text-center rounded-t-lg cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundColor:e.coverColor},onClick:h,title:"View on Google Books",children:[s.jsx("h3",{className:"font-bold text-white",children:e.title}),s.jsx("p",{className:"text-sm text-white/80",children:e.author})]}),s.jsxs(En,{className:"flex-grow p-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-1 cursor-pointer hover:text-primary transition-colors",onClick:h,title:"View on Google Books",children:e.title}),s.jsx("p",{className:"text-sm font-medium mb-2",children:e.author}),s.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Condition: ",e.condition]}),s.jsx("p",{className:"text-xs line-clamp-3 mb-3",children:e.description}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Available in: ",e.owner.neighborhood]})]}),s.jsxs(Fl,{className:"p-4 pt-0 flex gap-2",children:[s.jsx(U,{variant:"default",className:"flex-1",onClick:m,disabled:r||!e.owner.id,children:r?s.jsxs(s.Fragment,{children:[s.jsx(yo,{className:"mr-2 h-4 w-4 animate-spin"}),"Requesting..."]}):"Request Swap"}),s.jsx(U,{variant:"outline",className:"flex items-center justify-center",onClick:u,disabled:a||!e.owner.id,title:"Message the book owner",children:a?s.jsx(yo,{className:"h-4 w-4 animate-spin"}):s.jsx(Zt,{size:18})})]})]})}const sg=async(e,t,r,o,n)=>{try{const a=await st(je(Y,te.BOOKS,r));if(!a.exists())throw new Error("Book not found");const i=a.data(),l=await st(je(Y,te.PROFILES,o));if(!l.exists())throw new Error("Owner not found");const c=l.data(),u={requester_id:e,requester_name:t,book_id:r,book_title:i.title,book_author:i.author,owner_id:o,owner_name:c.display_name||c.username||"Unknown User",status:"pending",created_at:Le(),updated_at:Le(),message:n||""},m=await Vr(be(Y,"swap_requests"),u);try{const{shouldSend:h,email:f}=await Nn(o,"new_matches");await jn("new_matches",f,h,o)?console.log(` Immediate match notification sent to owner ${o}`):console.warn(` Failed to send immediate match notification to owner ${o}`)}catch(h){console.error("Error sending new match notification:",h)}return m.id}catch(a){throw console.error("Error creating swap request:",a),a}};function $l({books:e,emptyMessage:t="No books found"}){const{user:r,profile:o}=Bl(),[n,a]=d.useState(new Set),i=async(l,c)=>{if(!r||!o){ye({title:"Authentication required",description:"Please log in to request a book swap.",variant:"destructive"});return}if(r.uid===c){ye({title:"Cannot request swap",description:"You cannot request a swap for your own book.",variant:"destructive"});return}a(u=>new Set(u).add(l));try{await sg(r.uid,o.display_name||o.username||"Unknown User",l,c),ye({title:"Swap requested",description:"We'll notify you when the owner responds."})}catch(u){console.error("Error requesting swap:",u),ye({title:"Error",description:"Failed to send swap request. Please try again.",variant:"destructive"})}finally{a(u=>{const m=new Set(u);return m.delete(l),m})}};return e.length===0?s.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:t})}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:e.map(l=>s.jsx(Us,{book:l,onRequestSwap:i,isLoadingSwap:n.has(l.id)},l.id))})}function ng(){return s.jsx("div",{className:"bg-white py-12 md:py-16 border-y border-border",children:s.jsxs("div",{className:"page-container",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-3",children:"How to Use English Book Swap Jerusalem"}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Our platform makes it easy to share and discover English books in Jerusalem. Follow these simple steps to get started."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(cf,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"1. Create an Account"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Sign up using your email or Google account. This allows you to add books, message other users, and keep track of your swaps."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/auth",children:"Sign Up Now"})})]})]}),s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(_r,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"2. Add Books You Have"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"List books you're willing to swap. Search by title or author, select the condition, and add your neighborhood for local matching."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/add",children:"Add Your Books"})})]})]}),s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(Ti,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"3. Add Books You Want"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Create your wishlist by adding books you're looking for. This helps our system find perfect matches with other users."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/add?type=want",children:"Add Wanted Books"})})]})]}),s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(br,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"4. Browse Available Books"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Explore books that other users have added. Filter by neighborhood to find books close to you for easier meetups."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/books",children:"Browse Books"})})]})]}),s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(Ii,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"5. Find Your Matches"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Our system automatically finds users who have books you want or want books you have. Check your matches regularly for new swap opportunities."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/matches",children:"View Matches"})})]})]}),s.jsxs("div",{className:"flex gap-4 p-6 border rounded-lg bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-bookswap-blue flex items-center justify-center",children:s.jsx(Mi,{className:"w-6 h-6 text-bookswap-darkblue"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"6. Message & Arrange Meetup"}),s.jsx("p",{className:"text-muted-foreground mb-3",children:"Contact your matches through our messaging system. Discuss the books and arrange a convenient time and place to meet."}),s.jsx(U,{asChild:!0,variant:"outline",size:"sm",children:s.jsx(re,{to:"/chat",children:"Messages"})})]})]})]}),s.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-bookswap-stone/20 text-center",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Safety Tips for Book Swaps"}),s.jsxs("ul",{className:"text-muted-foreground max-w-2xl mx-auto text-left space-y-2 mb-4",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Zo,{className:"w-5 h-5 mr-2 mt-0.5 text-bookswap-darkblue"}),s.jsx("span",{children:"Meet in public places like cafs or libraries"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Zo,{className:"w-5 h-5 mr-2 mt-0.5 text-bookswap-darkblue"}),s.jsx("span",{children:"Consider daytime meetups for better visibility"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Zo,{className:"w-5 h-5 mr-2 mt-0.5 text-bookswap-darkblue"}),s.jsx("span",{children:"Let someone know where you're going for your book swap"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Remember: English Book Swap Jerusalem is based on community trust and goodwill. There are no financial transactions or point systems."})]})]})})}const ag=()=>{const[e,t]=d.useState(null),{data:r=[],isLoading:o,error:n}=zt({queryKey:["featuredBooks"],queryFn:async()=>{try{const a=be(Y,te.BOOKS),i=Pe(a,Xs("created_at","desc"),$d(5)),l=await Ie(i);return l.empty?[]:l.docs.map(c=>{const u=c.data();return{id:c.id,title:u.title,author:u.author,coverColor:u.cover_color||"#436B95",description:u.description||"",condition:u.condition,owner:u.owner}})}catch(a){throw console.error("Error fetching books:",a),a instanceof Error&&(a.message.includes("permission")?t("Unable to access book data. Please try again later."):t("Something went wrong. Please try again later.")),a}},retry:2,retryDelay:1e3});return r.length===0&&!o&&!n?s.jsxs(we,{children:[s.jsx("div",{className:"bg-bookswap-blue py-16 md:py-24",children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:"Welcome to English Book Swap Jerusalem"}),s.jsx("p",{className:"text-lg md:text-xl mb-8",children:"Be the first to add books to our community! No books have been added yet."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(U,{asChild:!0,size:"lg",className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/add",children:"Add Your First Book"})}),s.jsx(U,{asChild:!0,size:"lg",variant:"outline",children:s.jsx(re,{to:"/auth",children:"Sign In"})})]})]})})}),s.jsx("div",{className:"bg-white py-12 md:py-16 border-y border-border",children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsx(bs,{className:"w-8 h-8 text-bookswap-darkblue"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"List Your Books"}),s.jsx("p",{className:"text-muted-foreground",children:"Share the books you've enjoyed and are ready to pass on to another reader in Jerusalem."})]}),s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-bookswap-darkblue",children:[s.jsx("path",{d:"M16 3h5v5"}),s.jsx("path",{d:"M8 3H3v5"}),s.jsx("path",{d:"M21 13v5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5"}),s.jsx("path",{d:"m21 8-5-5-5 5"}),s.jsx("path",{d:"m3 16 5 5 5-5"})]})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Find Matches"}),s.jsx("p",{className:"text-muted-foreground",children:"Our system matches you with local readers who have books you want or want books you have."})]}),s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-bookswap-darkblue",children:[s.jsx("path",{d:"M17 6.1H3"}),s.jsx("path",{d:"M21 12.1H3"}),s.jsx("path",{d:"M15.1 18H3"})]})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Meet & Swap"}),s.jsx("p",{className:"text-muted-foreground",children:"Arrange to meet at a convenient location in your neighborhood and exchange books."})]})]})})})]}):o?s.jsx(we,{children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-bookswap-darkblue mx-auto mb-4"}),s.jsx("p",{className:"text-lg",children:"Loading featured books..."})]})})}):n?s.jsx(we,{children:s.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-red-50 border border-red-100 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:e||"Error loading featured books"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"We're having trouble connecting to our database. This could be due to:"}),s.jsxs("ul",{className:"text-left text-gray-600 mb-4 space-y-1",children:[s.jsx("li",{children:" Temporary connection issues"}),s.jsx("li",{children:" Database maintenance"}),s.jsx("li",{children:" Security configuration updates"})]}),s.jsx(U,{onClick:()=>window.location.reload(),className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:"Try Again"})]})})}):s.jsxs(we,{children:[s.jsx("div",{className:"bg-bookswap-blue py-16 md:py-24",children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold mb-6",children:"Share the Joy of Reading in Jerusalem"}),s.jsx("p",{className:"text-lg md:text-xl mb-8",children:"Connect with fellow book lovers and swap English books locally. No money, no pointsjust a community sharing stories."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(U,{asChild:!0,size:"lg",className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/books",children:"Browse Available Books"})}),s.jsx(U,{asChild:!0,size:"lg",variant:"outline",children:s.jsx(re,{to:"/add",children:"Share Your Books"})})]})]})})}),s.jsxs("div",{className:"page-container py-12 md:py-16",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"Recently Added Books"}),s.jsxs(re,{to:"/books",className:"flex items-center text-bookswap-darkblue hover:underline",children:[s.jsx("span",{children:"View all"}),s.jsx(Ri,{className:"ml-1 w-4 h-4"})]})]}),s.jsx($l,{books:r})]}),s.jsx(ng,{}),s.jsx("div",{className:"bg-white py-12 md:py-16 border-y border-border",children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsx(bs,{className:"w-8 h-8 text-bookswap-darkblue"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"List Your Books"}),s.jsx("p",{className:"text-muted-foreground",children:"Share the books you've enjoyed and are ready to pass on to another reader in Jerusalem."})]}),s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-bookswap-darkblue",children:[s.jsx("path",{d:"M16 3h5v5"}),s.jsx("path",{d:"M8 3H3v5"}),s.jsx("path",{d:"M21 13v5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5"}),s.jsx("path",{d:"m21 8-5-5-5 5"}),s.jsx("path",{d:"m3 16 5 5 5-5"})]})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Find Matches"}),s.jsx("p",{className:"text-muted-foreground",children:"Our system matches you with local readers who have books you want or want books you have."})]}),s.jsxs("div",{className:"flex flex-col items-center text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-bookswap-blue flex items-center justify-center mb-4",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8 text-bookswap-darkblue",children:[s.jsx("path",{d:"M17 6.1H3"}),s.jsx("path",{d:"M21 12.1H3"}),s.jsx("path",{d:"M15.1 18H3"})]})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Meet & Swap"}),s.jsx("p",{className:"text-muted-foreground",children:"Arrange to meet at a convenient location in your neighborhood and exchange books."})]})]})})}),s.jsx("div",{className:"page-container py-12 md:py-16",children:s.jsxs("div",{className:"bg-bookswap-stone/20 border border-bookswap-stone/30 rounded-lg p-8 text-center",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Join Our Growing Community"}),s.jsx("p",{className:"text-lg mb-6 max-w-2xl mx-auto",children:"Help us maximize the circulation of English books throughout Jerusalem. Every book deserves new readers, and every reader deserves new books."}),s.jsx(U,{asChild:!0,size:"lg",className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/books",children:"Start Swapping Now"})})]})})]})},ut=d.forwardRef(({className:e,type:t,...r},o)=>s.jsx("input",{type:t,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...r}));ut.displayName="Input";var ig="Separator",ba="horizontal",lg=["horizontal","vertical"],Hl=d.forwardRef((e,t)=>{const{decorative:r,orientation:o=ba,...n}=e,a=cg(o)?o:ba,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(X.div,{"data-orientation":a,...l,...n,ref:t})});Hl.displayName=ig;function cg(e){return lg.includes(e)}var Ul=Hl;const Wl=d.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...o},n)=>s.jsx(Ul,{ref:n,decorative:r,orientation:t,className:ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...o}));Wl.displayName=Ul.displayName;function dg(){const e=Gt(),[t,r]=d.useState(!1),[o,n]=d.useState(!1),[a,i]=d.useState(!0),[l,c]=d.useState(""),[u,m]=d.useState(""),h=async g=>{g.preventDefault(),r(!0);try{a?(await $p(l,u),e("/")):(await Hp(l,u),e("/my-books"),le.success("Account created successfully!"))}catch(v){le.error(v.message)}finally{r(!1)}},f=async()=>{n(!0);try{await Up(),e("/")}catch(g){le.error(g.message)}finally{n(!1)}};return s.jsx(we,{children:s.jsx("div",{className:"flex min-h-[calc(100vh-4rem)] items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:a?"Welcome back":"Create an account"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:a?"Sign in to your account":"Sign up for a new account"})]}),s.jsx(U,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2",onClick:f,disabled:o,children:o?"Signing in...":s.jsxs(s.Fragment,{children:[s.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",children:s.jsx("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1Z",fill:"currentColor"})})}),"Continue with Google"]})}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(Wl,{})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ut,{type:"email",placeholder:"Email",value:l,onChange:g=>c(g.target.value),required:!0}),s.jsx(ut,{type:"password",placeholder:"Password",value:u,onChange:g=>m(g.target.value),required:!0})]}),s.jsx(U,{type:"submit",className:"w-full",disabled:t,children:t?"Loading...":a?"Sign In":"Sign Up"})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>i(!a),className:"text-sm text-muted-foreground hover:underline",children:a?"Need an account? Sign up":"Already have an account? Sign in"})})]})})})}const Ir=["Abu Tor","American Colony","Armenian Quarter","Arnona","Arzei HaBira","Atarot","Bab az-Zahra","Bab Hutta","Baka","Batei Munkacs","Batei Neitin","Batei Saidoff","Batei Ungarin","Batei Warsaw","Bayit VeGan","Beit David","Beit HaKerem","Beit Hanina","Beit Orot","Beit Safafa","Beit Ya'akov","Beit Yisrael","Bezetha","Bukharan Quarter","Christian Quarter","City of David","East Jerusalem","East Talpiot","Ein Karem","Emek Refaim","Even Yisrael","Ezrat Torah","Ezrat Yisrael","French Hill","German Colony","Geula","Gilo","Givat Beit HaKerem","Givat HaMatos","Givat HaMivtar","Givat Massuah","Givat Mordechai","Givat Moshe","Givat Oranim","Givat Ram","Givat Shaul","Greek Colony","Har Homa","Har Hotzvim","Har Nof","Hutzot HaYotzer","Ir Ganim","Jabel Mukaber","Jerusalem Gateway","Jerusalem Technology Park","Downtown Triangle","Jewish Quarter","Kafr 'Aqab","Katamon","Kerem Avraham","Kirya Ne'emana","Kiryat HaLeom","Kiryat HaMemshala","Kiryat HaYovel","Kiryat Itri","Kiryat Mattersdorf","Kiryat Menachem","Kiryat Menachem Begin","Kiryat Moshe","Kiryat Sanz","Kiryat Shmuel","Kiryat Shomrei Emunim","Kiryat Unsdorf","Kiryat Wolfson","Knesset Yisrael","Lifta","Ma'ale HaZeitim","Ma'alot Dafna","Mahane Israel","Mahane Yehuda","Malha","Mamilla","Mazkeret Moshe","Mea Shearim","Mekor Baruch","Mekor Chaim","Mishkenot Sha'ananim","Motza","Mughrabi Quarter","Muristan","Muslim Quarter","Musrara","Nachlaot","Nahalat Shimon","Nahalat Shiv'a","Nayot","Neve Granot","Neve Sha'anan","Neve Yaakov","Nof Zion","Ohel Shlomo","Old City","Mount of Olives","Pat","Pisgat Ze'ev","Al-Ram","Ramat Beit HaKerem","Ramat Denya","Ramat Eshkol","Ramat Rachel","Ramat Sharett","Ramat Shlomo","Ramot Polin","Ramot","Ras al-Amud","Ras Khamis","Rassco","Rehavia","Romema","Russian Compound","Sanhedria","Sanhedria Murhevet","Sha'arei Hesed","Sha'arei Yerushalayim","Sharafat","Sheikh Badr","Sheikh Jarrah","Shikun Chabad","Shimon HaTzadik","Shmuel HaNavi","Shuafat","Silwan","Sur Baher","Talbiya","Talpiot","Tel Arza","At-Tur","Umm Tuba","Wadi al-Joz","Wadi Hilweh","Al-Walaja","Yefeh Nof","Yemin Moshe","Zikhron Moshe","Zikhron Tuvya","Zikhron Yosef","Mount Zion"];function ug({selectedNeighborhoods:e,onChange:t}){const[r,o]=d.useState(!1),n=l=>{e.includes(l)?t(e.filter(c=>c!==l)):t([...e,l])},a=()=>{e.length===Ir.length?t([]):t([...Ir])},i=e.length===Ir.length;return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>o(!r),className:"flex items-center justify-between w-full px-4 py-2 text-sm border border-border rounded-md bg-white",children:[s.jsx("span",{children:e.length===0?"All Neighborhoods":`${e.length} selected`}),s.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"flex items-center px-2 py-1 rounded-sm hover:bg-muted cursor-pointer border-b border-border mb-1",onClick:a,children:[s.jsx("div",{className:"w-4 h-4 mr-2 border border-border rounded-sm flex items-center justify-center",children:i&&s.jsx(yr,{className:"w-3 h-3 text-primary"})}),s.jsx("span",{className:"text-sm font-medium",children:"Select All"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:Ir.map(l=>s.jsxs("div",{className:"flex items-center px-2 py-1 rounded-sm hover:bg-muted cursor-pointer",onClick:()=>n(l),children:[s.jsx("div",{className:"w-4 h-4 mr-2 border border-border rounded-sm flex items-center justify-center",children:e.includes(l)&&s.jsx(yr,{className:"w-3 h-3 text-primary"})}),s.jsx("span",{className:"text-sm",children:l})]},l))})]})})]})}function fg({selectedGenres:e,onChange:t,availableGenres:r}){const[o,n]=d.useState(!1),[a,i]=d.useState(""),l=d.useRef(null);d.useEffect(()=>{o&&l.current&&l.current.focus()},[o]);const c=f=>{e.includes(f)?t(e.filter(g=>g!==f)):t([...e,f])},u=()=>{e.length===r.length?t([]):t([...r])},m=a.trim()===""?r:r.filter(f=>f.toLowerCase().includes(a.toLowerCase())),h=e.length===r.length;return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>n(!o),className:"flex items-center justify-between w-full px-4 py-2 text-sm border border-border rounded-md bg-white",children:[s.jsx("span",{children:e.length===0?"All Genres":`${e.length} selected`}),s.jsx("svg",{className:`w-4 h-4 transition-transform ${o?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"mb-2 relative",children:[s.jsx(br,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(ut,{ref:l,value:a,onChange:f=>i(f.target.value),placeholder:"Search genres...",className:"pl-8 py-1 h-8 text-sm",onClick:f=>f.stopPropagation()}),a&&s.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-muted-foreground",onClick:f=>{var g;f.stopPropagation(),i(""),(g=l.current)==null||g.focus()},children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center px-2 py-1 rounded-sm hover:bg-muted cursor-pointer border-b border-border mb-1",onClick:u,children:[s.jsx("div",{className:"w-4 h-4 mr-2 border border-border rounded-sm flex items-center justify-center",children:h&&s.jsx(yr,{className:"w-3 h-3 text-primary"})}),s.jsx("span",{className:"text-sm font-medium",children:"Select All"})]}),m.length===0?s.jsx("div",{className:"py-2 px-2 text-sm text-muted-foreground text-center",children:"No genres match your search"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:m.map(f=>s.jsxs("div",{className:"flex items-center px-2 py-1 rounded-sm hover:bg-muted cursor-pointer",onClick:()=>c(f),children:[s.jsx("div",{className:"w-4 h-4 mr-2 border border-border rounded-sm flex items-center justify-center",children:e.includes(f)&&s.jsx(yr,{className:"w-3 h-3 text-primary"})}),s.jsx("span",{className:"text-sm",children:f})]},f))})]})})]})}const hg=["Fiction","Literary Fiction","Historical Fiction","Science Fiction","Fantasy","Mystery","Thriller","Suspense","Crime","Detective","Horror","Romance","Contemporary Romance","Historical Romance","Paranormal Romance","Adventure","Action","Western","War","Espionage","Dystopian","Utopian","Alternate History","Time Travel","Steampunk","Cyberpunk","Urban Fantasy","Epic Fantasy","High Fantasy","Dark Fantasy","Magical Realism","Gothic","Psychological Thriller","Legal Thriller","Medical Thriller","Techno-Thriller","Cozy Mystery","Hard-boiled","Police Procedural","True Crime","Noir","Satire","Humor","Comedy","Parody","Coming of Age","Family Saga","Generational Saga","Chick Lit","Women's Fiction","LGBTQ+ Fiction","Multicultural Fiction","African American Fiction","Asian American Fiction","Latino Fiction","Native American Fiction","Jewish Fiction","Christian Fiction","Religious Fiction","Inspirational Fiction","Short Stories","Novellas","Anthologies","Classic Literature","Modern Classics","World Literature","Translated Fiction","Non-fiction","Biography","Autobiography","Memoir","History","World History","American History","European History","Ancient History","Medieval History","Modern History","Military History","Social History","Cultural History","Political History","Economic History","Art History","Music History","Science","Physics","Chemistry","Biology","Mathematics","Astronomy","Earth Sciences","Environmental Science","Medicine","Health","Psychology","Sociology","Anthropology","Philosophy","Religion","Theology","Spirituality","Self-Help","Personal Development","Motivational","Business","Economics","Finance","Investing","Entrepreneurship","Management","Leadership","Marketing","Politics","Government","Law","Current Affairs","Social Issues","Education","Teaching","Parenting","Family","Relationships","Marriage","Dating","Sexuality","Gender Studies","Women's Studies","Men's Studies","LGBTQ+ Studies","Travel","Travel Guides","Adventure Travel","Food","Cooking","Recipes","Wine","Nutrition","Diet","Fitness","Exercise","Sports","Recreation","Hobbies","Crafts","Art","Photography","Music","Performing Arts","Theater","Dance","Film","Television","Media Studies","Communication","Journalism","Writing","Language Arts","Linguistics","Literature Criticism","Literary Theory","Poetry","Drama","Essays","Reference","Dictionaries","Encyclopedias","Almanacs","Atlases","Study Guides","Test Preparation","Textbooks","Academic","Research","Technology","Computers","Internet","Programming","Software","Hardware","Web Design","Graphic Design","Architecture","Engineering","Construction","Transportation","Automotive","Aviation","Maritime","Agriculture","Gardening","Nature","Animals","Pets","Wildlife","Ecology","Conservation","Climate Change","Sustainability","Children's Books","Picture Books","Early Readers","Chapter Books","Middle Grade","Young Adult","Teen Fiction","Teen Romance","Teen Fantasy","Teen Science Fiction","Teen Mystery","Teen Thriller","Teen Horror","Teen Contemporary","Teen Historical Fiction","Teen Dystopian","Children's Fiction","Children's Fantasy","Children's Adventure","Children's Mystery","Children's Science Fiction","Children's Historical Fiction","Children's Non-fiction","Educational","Learning","Activity Books","Coloring Books","Board Books","Fairy Tales","Folk Tales","Mythology","Legends","Fables","Nursery Rhymes","Graphic Novels","Comics","Manga","Superhero","Slice of Life","Action Comics","Adventure Comics","Fantasy Comics","Science Fiction Comics","Horror Comics","Mystery Comics","Romance Comics","Historical Comics","Biographical Comics","Educational Comics","Humor Comics","Alternative Comics","Independent Comics","Webcomics","Light Novels","Visual Novels","Game Guides","Strategy Guides","Gaming","Role-Playing Games","Board Games","Card Games","Puzzles","Brain Teasers","Trivia","Crosswords","Sudoku","Word Games","African Literature","Asian Literature","European Literature","Latin American Literature","Middle Eastern Literature","Australian Literature","Canadian Literature","British Literature","American Literature","Irish Literature","Scottish Literature","Welsh Literature","French Literature","German Literature","Italian Literature","Spanish Literature","Russian Literature","Chinese Literature","Japanese Literature","Korean Literature","Indian Literature","Arabic Literature","Hebrew Literature","Yiddish Literature","Indigenous Literature","Postcolonial Literature","Diaspora Literature","Immigrant Literature","Exile Literature","Ancient Literature","Classical Literature","Medieval Literature","Renaissance Literature","Enlightenment Literature","Romantic Literature","Victorian Literature","Modernist Literature","Postmodern Literature","Contemporary Literature","21st Century Literature","Award Winners","Bestsellers","Book Club Picks","Staff Picks","New Releases","Coming Soon","Pre-orders","Limited Editions","Collector's Editions","Rare Books","Out of Print","Vintage","Antique","First Editions","Signed Copies","Illustrated Books","Large Print","Audio Books","E-books","Digital","Interactive","Multimedia","Textbook","Academic Writing","Research Methods","Statistics","Data Analysis","Scientific Method","Laboratory Manuals","Course Materials","Lecture Notes","Study Materials","Exam Preparation","Graduate Studies","Undergraduate","Professional Development","Continuing Education","Certification","Training Materials","Workshops","Seminars","Conferences","Journals","Diaries","Letters","Correspondence","Documents","Archives","Collections","Compilations","Selections","Excerpts","Adaptations","Retellings","Reimaginings","Sequels","Prequels","Series","Trilogies","Sagas","Cycles","Omnibus","Complete Works","Collected Works","Selected Works"],mg=()=>[...hg].sort(),pg=()=>{const[e,t]=d.useState(""),[r,o]=d.useState([]),[n,a]=d.useState(!1),[i,l]=d.useState([]),[c,u]=d.useState([]),m=mg(),{data:h=[],isLoading:f,error:g}=zt({queryKey:["allBooks"],queryFn:async()=>{const y=be(Y,te.BOOKS);return(await Ie(y)).docs.map(S=>{const j=S.data();return{id:S.id,title:j.title,author:j.author,coverColor:j.cover_color,description:j.description||"",condition:j.condition,owner:j.owner,google_books_id:j.google_books_id,genres:j.genres||[]}})}}),v=d.useMemo(()=>{let y=h;if(e){const b=e.toLowerCase();y=y.filter(w=>w.title.toLowerCase().includes(b)||w.author.toLowerCase().includes(b)||w.description&&w.description.toLowerCase().includes(b))}return i.length>0&&(y=y.filter(b=>i.includes(b.owner.neighborhood))),c.length>0&&(y=y.filter(b=>b.genres&&b.genres.some(w=>c.includes(w)))),y},[h,e,i,c]);d.useEffect(()=>{if(e.trim().length>1){const y=e.toLowerCase(),b=h.filter(w=>w.title.toLowerCase().includes(y)||w.author.toLowerCase().includes(y)).slice(0,5);o(b),a(b.length>0)}else o([]),a(!1)},[e,h]);const p=y=>{t(y.target.value)},x=y=>{t(y.title),a(!1)};return f?s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("p",{className:"text-lg",children:"Loading books..."})})})}):g?s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg text-red-600 font-medium mb-2",children:"Error loading books"}),s.jsx("p",{className:"text-muted-foreground",children:g.message||"Please try again later or contact support"})]})})})}):s.jsx(we,{children:s.jsxs("div",{className:"page-container",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4 md:mb-0",children:"Browse Available Books"}),s.jsx(U,{asChild:!0,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/add",children:"Add Your Book"})})]}),s.jsx("div",{className:"bg-white border border-border rounded-lg p-6 mb-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"col-span-1 md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(br,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(ut,{placeholder:"Search by title, author, or description...",value:e,onChange:p,className:"pl-10"}),n&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-border rounded-md shadow-lg max-h-80 overflow-y-auto",children:s.jsx("div",{className:"p-2",children:r.map(y=>s.jsxs("div",{className:"p-3 hover:bg-gray-50 cursor-pointer flex items-start gap-3 border-b border-border last:border-0",onClick:()=>x(y),children:[s.jsx("div",{className:"w-10 h-14 flex-shrink-0 rounded",style:{backgroundColor:y.coverColor||"#436B95"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-sm",children:y.title}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",y.author]}),y.condition&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Condition: ",y.condition]})]})]},y.id))})})]})}),s.jsx("div",{className:"col-span-1",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[s.jsx("div",{children:s.jsx(fg,{selectedGenres:c,onChange:u,availableGenres:m})}),s.jsx("div",{children:s.jsx(ug,{selectedNeighborhoods:i,onChange:l})})]})})]})}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",v.length," books"]})}),s.jsx($l,{books:v,emptyMessage:"No books match your search criteria. Try adjusting your filters or add your own books to share!"})]})})};var gg="Label",zl=d.forwardRef((e,t)=>s.jsx(X.label,{...e,ref:t,onMouseDown:r=>{var n;r.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));zl.displayName=gg;var Vl=zl;const xg=on("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ot=d.forwardRef(({className:e,...t},r)=>s.jsx(Vl,{ref:r,className:ee(xg(),e),...t}));Ot.displayName=Vl.displayName;function wa(e,[t,r]){return Math.min(r,Math.max(t,e))}var vg=d.createContext(void 0);function Rn(e){const t=d.useContext(vg);return e||t||"ltr"}var ns=0;function yg(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Sa()),document.body.insertAdjacentElement("beforeend",e[1]??Sa()),ns++,()=>{ns===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ns--}},[])}function Sa(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var as="focusScope.autoFocusOnMount",is="focusScope.autoFocusOnUnmount",Na={bubbles:!1,cancelable:!0},bg="FocusScope",Gl=d.forwardRef((e,t)=>{const{loop:r=!1,trapped:o=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...i}=e,[l,c]=d.useState(null),u=_e(n),m=_e(a),h=d.useRef(null),f=fe(t,p=>c(p)),g=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(o){let p=function(w){if(g.paused||!l)return;const S=w.target;l.contains(S)?h.current=S:xt(h.current,{select:!0})},x=function(w){if(g.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||xt(h.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&xt(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",x),b.disconnect()}}},[o,l,g.paused]),d.useEffect(()=>{if(l){ja.add(g);const p=document.activeElement;if(!l.contains(p)){const y=new CustomEvent(as,Na);l.addEventListener(as,u),l.dispatchEvent(y),y.defaultPrevented||(wg(kg(ql(l)),{select:!0}),document.activeElement===p&&xt(l))}return()=>{l.removeEventListener(as,u),setTimeout(()=>{const y=new CustomEvent(is,Na);l.addEventListener(is,m),l.dispatchEvent(y),y.defaultPrevented||xt(p??document.body,{select:!0}),l.removeEventListener(is,m),ja.remove(g)},0)}}},[l,u,m,g]);const v=d.useCallback(p=>{if(!r&&!o||g.paused)return;const x=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(x&&y){const b=p.currentTarget,[w,S]=Sg(b);w&&S?!p.shiftKey&&y===S?(p.preventDefault(),r&&xt(w,{select:!0})):p.shiftKey&&y===w&&(p.preventDefault(),r&&xt(S,{select:!0})):y===b&&p.preventDefault()}},[r,o,g.paused]);return s.jsx(X.div,{tabIndex:-1,...i,ref:f,onKeyDown:v})});Gl.displayName=bg;function wg(e,{select:t=!1}={}){const r=document.activeElement;for(const o of e)if(xt(o,{select:t}),document.activeElement!==r)return}function Sg(e){const t=ql(e),r=Ca(t,e),o=Ca(t.reverse(),e);return[r,o]}function ql(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const n=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||n?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ca(e,t){for(const r of e)if(!Ng(r,{upTo:t}))return r}function Ng(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Cg(e){return e instanceof HTMLInputElement&&"select"in e}function xt(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Cg(e)&&t&&e.select()}}var ja=jg();function jg(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=ka(e,t),e.unshift(t)},remove(t){var r;e=ka(e,t),(r=e[0])==null||r.resume()}}}function ka(e,t){const r=[...e],o=r.indexOf(t);return o!==-1&&r.splice(o,1),r}function kg(e){return e.filter(t=>t.tagName!=="A")}function Tn(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Eg=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qt=new WeakMap,ao=new WeakMap,io={},ls=0,Kl=function(e){return e&&(e.host||Kl(e.parentNode))},Rg=function(e,t){return t.map(function(r){if(e.contains(r))return r;var o=Kl(r);return o&&e.contains(o)?o:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Tg=function(e,t,r,o){var n=Rg(t,Array.isArray(e)?e:[e]);io[r]||(io[r]=new WeakMap);var a=io[r],i=[],l=new Set,c=new Set(n),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};n.forEach(u);var m=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))m(f);else try{var g=f.getAttribute(o),v=g!==null&&g!=="false",p=(Qt.get(f)||0)+1,x=(a.get(f)||0)+1;Qt.set(f,p),a.set(f,x),i.push(f),p===1&&v&&ao.set(f,!0),x===1&&f.setAttribute(r,"true"),v||f.setAttribute(o,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return m(t),l.clear(),ls++,function(){i.forEach(function(h){var f=Qt.get(h)-1,g=a.get(h)-1;Qt.set(h,f),a.set(h,g),f||(ao.has(h)||h.removeAttribute(o),ao.delete(h)),g||h.removeAttribute(r)}),ls--,ls||(Qt=new WeakMap,Qt=new WeakMap,ao=new WeakMap,io={})}},Ag=function(e,t,r){r===void 0&&(r="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),n=Eg(e);return n?(o.push.apply(o,Array.from(n.querySelectorAll("[aria-live]"))),Tg(o,n,r,"aria-hidden")):function(){return null}},po="right-scroll-bar-position",go="width-before-scroll-bar",Pg="with-scroll-bars-hidden",Mg="--removed-body-scroll-bar-size";function cs(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ig(e,t){var r=d.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(o){var n=r.value;n!==o&&(r.value=o,r.callback(o,n))}}}})[0];return r.callback=t,r.facade}var Og=typeof window<"u"?d.useLayoutEffect:d.useEffect,Ea=new WeakMap;function Lg(e,t){var r=Ig(null,function(o){return e.forEach(function(n){return cs(n,o)})});return Og(function(){var o=Ea.get(r);if(o){var n=new Set(o),a=new Set(e),i=r.current;n.forEach(function(l){a.has(l)||cs(l,null)}),a.forEach(function(l){n.has(l)||cs(l,i)})}Ea.set(r,e)},[e]),r}function _g(e){return e}function Dg(e,t){t===void 0&&(t=_g);var r=[],o=!1,n={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var i=t(a,o);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(o=!0;r.length;){var i=r;r=[],i.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){o=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(a),i=r}var c=function(){var m=i;i=[],m.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(m){i.push(m),u()},filter:function(m){return i=i.filter(m),r}}}};return n}function Fg(e){e===void 0&&(e={});var t=Dg(null);return t.options=vt({async:!0,ssr:!1},e),t}var Yl=function(e){var t=e.sideCar,r=Qa(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return d.createElement(o,vt({},r))};Yl.isSideCarExport=!0;function Bg(e,t){return e.useMedium(t),Yl}var Ql=Fg(),ds=function(){},Fo=d.forwardRef(function(e,t){var r=d.useRef(null),o=d.useState({onScrollCapture:ds,onWheelCapture:ds,onTouchMoveCapture:ds}),n=o[0],a=o[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,m=e.enabled,h=e.shards,f=e.sideCar,g=e.noIsolation,v=e.inert,p=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=e.gapMode,w=Qa(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,j=Lg([r,t]),T=vt(vt({},w),n);return d.createElement(d.Fragment,null,m&&d.createElement(S,{sideCar:Ql,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:a,allowPinchZoom:!!p,lockRef:r,gapMode:b}),i?d.cloneElement(d.Children.only(l),vt(vt({},T),{ref:j})):d.createElement(y,vt({},T,{className:c,ref:j}),l))});Fo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fo.classNames={fullWidth:go,zeroRight:po};var $g=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Hg(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$g();return t&&e.setAttribute("nonce",t),e}function Ug(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wg(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var zg=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Hg())&&(Ug(t,r),Wg(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vg=function(){var e=zg();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Xl=function(){var e=Vg(),t=function(r){var o=r.styles,n=r.dynamic;return e(o,n),null};return t},Gg={left:0,top:0,right:0,gap:0},us=function(e){return parseInt(e||"",10)||0},qg=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],o=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[us(r),us(o),us(n)]},Kg=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Gg;var t=qg(e),r=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-r+t[2]-t[0])}},Yg=Xl(),or="data-scroll-locked",Qg=function(e,t,r,o){var n=e.left,a=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Pg,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(l,"px ").concat(o,`;
  }
  body[`).concat(or,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),r==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(o,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(po,` {
    right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(go,` {
    margin-right: `).concat(l,"px ").concat(o,`;
  }
  
  .`).concat(po," .").concat(po,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(go," .").concat(go,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(or,`] {
    `).concat(Mg,": ").concat(l,`px;
  }
`)},Ra=function(){var e=parseInt(document.body.getAttribute(or)||"0",10);return isFinite(e)?e:0},Xg=function(){d.useEffect(function(){return document.body.setAttribute(or,(Ra()+1).toString()),function(){var e=Ra()-1;e<=0?document.body.removeAttribute(or):document.body.setAttribute(or,e.toString())}},[])},Jg=function(e){var t=e.noRelative,r=e.noImportant,o=e.gapMode,n=o===void 0?"margin":o;Xg();var a=d.useMemo(function(){return Kg(n)},[n]);return d.createElement(Yg,{styles:Qg(a,!t,n,r?"":"!important")})},Ws=!1;if(typeof window<"u")try{var lo=Object.defineProperty({},"passive",{get:function(){return Ws=!0,!0}});window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{Ws=!1}var Xt=Ws?{passive:!1}:!1,Zg=function(e){return e.tagName==="TEXTAREA"},Jl=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Zg(e)&&r[t]==="visible")},ex=function(e){return Jl(e,"overflowY")},tx=function(e){return Jl(e,"overflowX")},Ta=function(e,t){var r=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var n=Zl(e,o);if(n){var a=ec(e,o),i=a[1],l=a[2];if(i>l)return!0}o=o.parentNode}while(o&&o!==r.body);return!1},rx=function(e){var t=e.scrollTop,r=e.scrollHeight,o=e.clientHeight;return[t,r,o]},ox=function(e){var t=e.scrollLeft,r=e.scrollWidth,o=e.clientWidth;return[t,r,o]},Zl=function(e,t){return e==="v"?ex(t):tx(t)},ec=function(e,t){return e==="v"?rx(t):ox(t)},sx=function(e,t){return e==="h"&&t==="rtl"?-1:1},nx=function(e,t,r,o,n){var a=sx(e,window.getComputedStyle(t).direction),i=a*o,l=r.target,c=t.contains(l),u=!1,m=i>0,h=0,f=0;do{var g=ec(e,l),v=g[0],p=g[1],x=g[2],y=p-x-a*v;(v||y)&&Zl(e,l)&&(h+=y,f+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(m&&(Math.abs(h)<1||!n)||!m&&(Math.abs(f)<1||!n))&&(u=!0),u},co=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Aa=function(e){return[e.deltaX,e.deltaY]},Pa=function(e){return e&&"current"in e?e.current:e},ax=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ix=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lx=0,Jt=[];function cx(e){var t=d.useRef([]),r=d.useRef([0,0]),o=d.useRef(),n=d.useState(lx++)[0],a=d.useState(Xl)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var p=Hd([e.lockRef.current],(e.shards||[]).map(Pa),!0).filter(Boolean);return p.forEach(function(x){return x.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),p.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(p,x){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!i.current.allowPinchZoom;var y=co(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-y[0],S="deltaY"in p?p.deltaY:b[1]-y[1],j,T=p.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in p&&E==="h"&&T.type==="range")return!1;var R=Ta(E,T);if(!R)return!0;if(R?j=E:(j=E==="v"?"h":"v",R=Ta(E,T)),!R)return!1;if(!o.current&&"changedTouches"in p&&(w||S)&&(o.current=j),!j)return!0;var C=o.current||j;return nx(C,x,p,C==="h"?w:S,!0)},[]),c=d.useCallback(function(p){var x=p;if(!(!Jt.length||Jt[Jt.length-1]!==a)){var y="deltaY"in x?Aa(x):co(x),b=t.current.filter(function(j){return j.name===x.type&&(j.target===x.target||x.target===j.shadowParent)&&ax(j.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(i.current.shards||[]).map(Pa).filter(Boolean).filter(function(j){return j.contains(x.target)}),S=w.length>0?l(x,w[0]):!i.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),u=d.useCallback(function(p,x,y,b){var w={name:p,delta:x,target:y,should:b,shadowParent:dx(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),m=d.useCallback(function(p){r.current=co(p),o.current=void 0},[]),h=d.useCallback(function(p){u(p.type,Aa(p),p.target,l(p,e.lockRef.current))},[]),f=d.useCallback(function(p){u(p.type,co(p),p.target,l(p,e.lockRef.current))},[]);d.useEffect(function(){return Jt.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Xt),document.addEventListener("touchmove",c,Xt),document.addEventListener("touchstart",m,Xt),function(){Jt=Jt.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,Xt),document.removeEventListener("touchmove",c,Xt),document.removeEventListener("touchstart",m,Xt)}},[]);var g=e.removeScrollBar,v=e.inert;return d.createElement(d.Fragment,null,v?d.createElement(a,{styles:ix(n)}):null,g?d.createElement(Jg,{gapMode:e.gapMode}):null)}function dx(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ux=Bg(Ql,cx);var tc=d.forwardRef(function(e,t){return d.createElement(Fo,vt({},e,{ref:t,sideCar:ux}))});tc.classNames=Fo.classNames;var fx=[" ","Enter","ArrowUp","ArrowDown"],hx=[" ","Enter"],Qr="Select",[Bo,$o,mx]=Js(Qr),[Tr,Dv]=Cr(Qr,[mx,Lo]),Ho=Lo(),[px,Pt]=Tr(Qr),[gx,xx]=Tr(Qr),rc=e=>{const{__scopeSelect:t,children:r,open:o,defaultOpen:n,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:m,autoComplete:h,disabled:f,required:g,form:v}=e,p=Ho(t),[x,y]=d.useState(null),[b,w]=d.useState(null),[S,j]=d.useState(!1),T=Rn(u),[E=!1,R]=vr({prop:o,defaultProp:n,onChange:a}),[C,k]=vr({prop:i,defaultProp:l,onChange:c}),L=d.useRef(null),M=x?v||!!x.closest("form"):!0,[_,A]=d.useState(new Set),F=Array.from(_).map(I=>I.props.value).join(";");return s.jsx(Pm,{...p,children:s.jsxs(px,{required:g,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Po(),value:C,onValueChange:k,open:E,onOpenChange:R,dir:T,triggerPointerDownPosRef:L,disabled:f,children:[s.jsx(Bo.Provider,{scope:t,children:s.jsx(gx,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(I=>{A(B=>new Set(B).add(I))},[]),onNativeOptionRemove:d.useCallback(I=>{A(B=>{const P=new Set(B);return P.delete(I),P})},[]),children:r})}),M?s.jsxs(Ec,{"aria-hidden":!0,required:g,tabIndex:-1,name:m,autoComplete:h,value:C,onChange:I=>k(I.target.value),disabled:f,form:v,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(_)]},F):null]})})};rc.displayName=Qr;var oc="SelectTrigger",sc=d.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:o=!1,...n}=e,a=Ho(r),i=Pt(oc,r),l=i.disabled||o,c=fe(t,i.onTriggerChange),u=$o(r),m=d.useRef("touch"),[h,f,g]=Rc(p=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===i.value),b=Tc(x,p,y);b!==void 0&&i.onValueChange(b.value)}),v=p=>{l||(i.onOpenChange(!0),g()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(cl,{asChild:!0,...a,children:s.jsx(X.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":kc(i.value)?"":void 0,...n,ref:c,onClick:z(n.onClick,p=>{p.currentTarget.focus(),m.current!=="mouse"&&v(p)}),onPointerDown:z(n.onPointerDown,p=>{m.current=p.pointerType;const x=p.target;x.hasPointerCapture(p.pointerId)&&x.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:z(n.onKeyDown,p=>{const x=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(x&&p.key===" ")&&fx.includes(p.key)&&(v(),p.preventDefault())})})})});sc.displayName=oc;var nc="SelectValue",ac=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:o,style:n,children:a,placeholder:i="",...l}=e,c=Pt(nc,r),{onValueNodeHasChildrenChange:u}=c,m=a!==void 0,h=fe(t,c.onValueNodeChange);return ke(()=>{u(m)},[u,m]),s.jsx(X.span,{...l,ref:h,style:{pointerEvents:"none"},children:kc(c.value)?s.jsx(s.Fragment,{children:i}):a})});ac.displayName=nc;var vx="SelectIcon",ic=d.forwardRef((e,t)=>{const{__scopeSelect:r,children:o,...n}=e;return s.jsx(X.span,{"aria-hidden":!0,...n,ref:t,children:o||""})});ic.displayName=vx;var yx="SelectPortal",lc=e=>s.jsx(Zs,{asChild:!0,...e});lc.displayName=yx;var Vt="SelectContent",cc=d.forwardRef((e,t)=>{const r=Pt(Vt,e.__scopeSelect),[o,n]=d.useState();if(ke(()=>{n(new DocumentFragment)},[]),!r.open){const a=o;return a?Nr.createPortal(s.jsx(dc,{scope:e.__scopeSelect,children:s.jsx(Bo.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(uc,{...e,ref:t})});cc.displayName=Vt;var Ve=10,[dc,Mt]=Tr(Vt),bx="SelectContentImpl",uc=d.forwardRef((e,t)=>{const{__scopeSelect:r,position:o="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:p,avoidCollisions:x,...y}=e,b=Pt(Vt,r),[w,S]=d.useState(null),[j,T]=d.useState(null),E=fe(t,W=>S(W)),[R,C]=d.useState(null),[k,L]=d.useState(null),M=$o(r),[_,A]=d.useState(!1),F=d.useRef(!1);d.useEffect(()=>{if(w)return Ag(w)},[w]),yg();const I=d.useCallback(W=>{const[ae,...xe]=M().map(se=>se.ref.current),[oe]=xe.slice(-1),ie=document.activeElement;for(const se of W)if(se===ie||(se==null||se.scrollIntoView({block:"nearest"}),se===ae&&j&&(j.scrollTop=0),se===oe&&j&&(j.scrollTop=j.scrollHeight),se==null||se.focus(),document.activeElement!==ie))return},[M,j]),B=d.useCallback(()=>I([R,w]),[I,R,w]);d.useEffect(()=>{_&&B()},[_,B]);const{onOpenChange:P,triggerPointerDownPosRef:$}=b;d.useEffect(()=>{if(w){let W={x:0,y:0};const ae=oe=>{var ie,se;W={x:Math.abs(Math.round(oe.pageX)-(((ie=$.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((se=$.current)==null?void 0:se.y)??0))}},xe=oe=>{W.x<=10&&W.y<=10?oe.preventDefault():w.contains(oe.target)||P(!1),document.removeEventListener("pointermove",ae),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",xe,{capture:!0})}}},[w,P,$]),d.useEffect(()=>{const W=()=>P(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[P]);const[he,H]=Rc(W=>{const ae=M().filter(ie=>!ie.disabled),xe=ae.find(ie=>ie.ref.current===document.activeElement),oe=Tc(ae,W,xe);oe&&setTimeout(()=>oe.ref.current.focus())}),G=d.useCallback((W,ae,xe)=>{const oe=!F.current&&!xe;(b.value!==void 0&&b.value===ae||oe)&&(C(W),oe&&(F.current=!0))},[b.value]),Q=d.useCallback(()=>w==null?void 0:w.focus(),[w]),ge=d.useCallback((W,ae,xe)=>{const oe=!F.current&&!xe;(b.value!==void 0&&b.value===ae||oe)&&L(W)},[b.value]),Ee=o==="popper"?zs:fc,de=Ee===zs?{side:l,sideOffset:c,align:u,alignOffset:m,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:v,hideWhenDetached:p,avoidCollisions:x}:{};return s.jsx(dc,{scope:r,content:w,viewport:j,onViewportChange:T,itemRefCallback:G,selectedItem:R,onItemLeave:Q,itemTextRefCallback:ge,focusSelectedItem:B,selectedItemText:k,position:o,isPositioned:_,searchRef:he,children:s.jsx(tc,{as:xr,allowPinchZoom:!0,children:s.jsx(Gl,{asChild:!0,trapped:b.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:z(n,W=>{var ae;(ae=b.trigger)==null||ae.focus({preventScroll:!0}),W.preventDefault()}),children:s.jsx(Ro,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(Ee,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:W=>W.preventDefault(),...y,...de,onPlaced:()=>A(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:z(y.onKeyDown,W=>{const ae=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ae&&W.key.length===1&&H(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let oe=M().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(W.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const ie=W.target,se=oe.indexOf(ie);oe=oe.slice(se+1)}setTimeout(()=>I(oe)),W.preventDefault()}})})})})})})});uc.displayName=bx;var wx="SelectItemAlignedPosition",fc=d.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:o,...n}=e,a=Pt(Vt,r),i=Mt(Vt,r),[l,c]=d.useState(null),[u,m]=d.useState(null),h=fe(t,E=>m(E)),f=$o(r),g=d.useRef(!1),v=d.useRef(!0),{viewport:p,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=i,w=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&p&&x&&y){const E=a.trigger.getBoundingClientRect(),R=u.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),k=y.getBoundingClientRect();if(a.dir!=="rtl"){const ie=k.left-R.left,se=C.left-ie,Re=E.left-se,De=E.width+Re,ft=Math.max(De,R.width),Ue=window.innerWidth-Ve,It=wa(se,[Ve,Math.max(Ve,Ue-ft)]);l.style.minWidth=De+"px",l.style.left=It+"px"}else{const ie=R.right-k.right,se=window.innerWidth-C.right-ie,Re=window.innerWidth-E.right-se,De=E.width+Re,ft=Math.max(De,R.width),Ue=window.innerWidth-Ve,It=wa(se,[Ve,Math.max(Ve,Ue-ft)]);l.style.minWidth=De+"px",l.style.right=It+"px"}const L=f(),M=window.innerHeight-Ve*2,_=p.scrollHeight,A=window.getComputedStyle(u),F=parseInt(A.borderTopWidth,10),I=parseInt(A.paddingTop,10),B=parseInt(A.borderBottomWidth,10),P=parseInt(A.paddingBottom,10),$=F+I+_+P+B,he=Math.min(x.offsetHeight*5,$),H=window.getComputedStyle(p),G=parseInt(H.paddingTop,10),Q=parseInt(H.paddingBottom,10),ge=E.top+E.height/2-Ve,Ee=M-ge,de=x.offsetHeight/2,W=x.offsetTop+de,ae=F+I+W,xe=$-ae;if(ae<=ge){const ie=L.length>0&&x===L[L.length-1].ref.current;l.style.bottom="0px";const se=u.clientHeight-p.offsetTop-p.offsetHeight,Re=Math.max(Ee,de+(ie?Q:0)+se+B),De=ae+Re;l.style.height=De+"px"}else{const ie=L.length>0&&x===L[0].ref.current;l.style.top="0px";const Re=Math.max(ge,F+p.offsetTop+(ie?G:0)+de)+xe;l.style.height=Re+"px",p.scrollTop=ae-ge+p.offsetTop}l.style.margin=`${Ve}px 0`,l.style.minHeight=he+"px",l.style.maxHeight=M+"px",o==null||o(),requestAnimationFrame(()=>g.current=!0)}},[f,a.trigger,a.valueNode,l,u,p,x,y,a.dir,o]);ke(()=>w(),[w]);const[S,j]=d.useState();ke(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const T=d.useCallback(E=>{E&&v.current===!0&&(w(),b==null||b(),v.current=!1)},[w,b]);return s.jsx(Nx,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:T,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(X.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});fc.displayName=wx;var Sx="SelectPopperPosition",zs=d.forwardRef((e,t)=>{const{__scopeSelect:r,align:o="start",collisionPadding:n=Ve,...a}=e,i=Ho(r);return s.jsx(dl,{...i,...a,ref:t,align:o,collisionPadding:n,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zs.displayName=Sx;var[Nx,An]=Tr(Vt,{}),Vs="SelectViewport",hc=d.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:o,...n}=e,a=Mt(Vs,r),i=An(Vs,r),l=fe(t,a.onViewportChange),c=d.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),s.jsx(Bo.Slot,{scope:r,children:s.jsx(X.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:z(n.onScroll,u=>{const m=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&h){const g=Math.abs(c.current-m.scrollTop);if(g>0){const v=window.innerHeight-Ve*2,p=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),y=Math.max(p,x);if(y<v){const b=y+g,w=Math.min(v,b),S=b-w;h.style.height=w+"px",h.style.bottom==="0px"&&(m.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=m.scrollTop})})})]})});hc.displayName=Vs;var mc="SelectGroup",[Cx,jx]=Tr(mc),kx=d.forwardRef((e,t)=>{const{__scopeSelect:r,...o}=e,n=Po();return s.jsx(Cx,{scope:r,id:n,children:s.jsx(X.div,{role:"group","aria-labelledby":n,...o,ref:t})})});kx.displayName=mc;var pc="SelectLabel",gc=d.forwardRef((e,t)=>{const{__scopeSelect:r,...o}=e,n=jx(pc,r);return s.jsx(X.div,{id:n.id,...o,ref:t})});gc.displayName=pc;var jo="SelectItem",[Ex,xc]=Tr(jo),vc=d.forwardRef((e,t)=>{const{__scopeSelect:r,value:o,disabled:n=!1,textValue:a,...i}=e,l=Pt(jo,r),c=Mt(jo,r),u=l.value===o,[m,h]=d.useState(a??""),[f,g]=d.useState(!1),v=fe(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,o,n)}),p=Po(),x=d.useRef("touch"),y=()=>{n||(l.onValueChange(o),l.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Ex,{scope:r,value:o,disabled:n,textId:p,isSelected:u,onItemTextChange:d.useCallback(b=>{h(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(Bo.ItemSlot,{scope:r,value:o,disabled:n,textValue:m,children:s.jsx(X.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:v,onFocus:z(i.onFocus,()=>g(!0)),onBlur:z(i.onBlur,()=>g(!1)),onClick:z(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:z(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:z(i.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:z(i.onPointerMove,b=>{var w;x.current=b.pointerType,n?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(i.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:z(i.onKeyDown,b=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(hx.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});vc.displayName=jo;var Or="SelectItemText",yc=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:o,style:n,...a}=e,i=Pt(Or,r),l=Mt(Or,r),c=xc(Or,r),u=xx(Or,r),[m,h]=d.useState(null),f=fe(t,y=>h(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),g=m==null?void 0:m.textContent,v=d.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:x}=u;return ke(()=>(p(v),()=>x(v)),[p,x,v]),s.jsxs(s.Fragment,{children:[s.jsx(X.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Nr.createPortal(a.children,i.valueNode):null]})});yc.displayName=Or;var bc="SelectItemIndicator",wc=d.forwardRef((e,t)=>{const{__scopeSelect:r,...o}=e;return xc(bc,r).isSelected?s.jsx(X.span,{"aria-hidden":!0,...o,ref:t}):null});wc.displayName=bc;var Gs="SelectScrollUpButton",Sc=d.forwardRef((e,t)=>{const r=Mt(Gs,e.__scopeSelect),o=An(Gs,e.__scopeSelect),[n,a]=d.useState(!1),i=fe(t,o.onScrollButtonChange);return ke(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?s.jsx(Cc,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Sc.displayName=Gs;var qs="SelectScrollDownButton",Nc=d.forwardRef((e,t)=>{const r=Mt(qs,e.__scopeSelect),o=An(qs,e.__scopeSelect),[n,a]=d.useState(!1),i=fe(t,o.onScrollButtonChange);return ke(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,m=Math.ceil(c.scrollTop)<u;a(m)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),n?s.jsx(Cc,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Nc.displayName=qs;var Cc=d.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:o,...n}=e,a=Mt("SelectScrollButton",r),i=d.useRef(null),l=$o(r),c=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),ke(()=>{var m;const u=l().find(h=>h.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[l]),s.jsx(X.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:z(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(o,50))}),onPointerMove:z(n.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(o,50))}),onPointerLeave:z(n.onPointerLeave,()=>{c()})})}),Rx="SelectSeparator",jc=d.forwardRef((e,t)=>{const{__scopeSelect:r,...o}=e;return s.jsx(X.div,{"aria-hidden":!0,...o,ref:t})});jc.displayName=Rx;var Ks="SelectArrow",Tx=d.forwardRef((e,t)=>{const{__scopeSelect:r,...o}=e,n=Ho(r),a=Pt(Ks,r),i=Mt(Ks,r);return a.open&&i.position==="popper"?s.jsx(ul,{...n,...o,ref:t}):null});Tx.displayName=Ks;function kc(e){return e===""||e===void 0}var Ec=d.forwardRef((e,t)=>{const{value:r,...o}=e,n=d.useRef(null),a=fe(t,n),i=Tn(r);return d.useEffect(()=>{const l=n.current,c=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==r&&m){const h=new Event("change",{bubbles:!0});m.call(l,r),l.dispatchEvent(h)}},[i,r]),s.jsx(qr,{asChild:!0,children:s.jsx("select",{...o,ref:a,defaultValue:r})})});Ec.displayName="BubbleSelect";function Rc(e){const t=_e(e),r=d.useRef(""),o=d.useRef(0),n=d.useCallback(i=>{const l=r.current+i;t(l),function c(u){r.current=u,window.clearTimeout(o.current),u!==""&&(o.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=d.useCallback(()=>{r.current="",window.clearTimeout(o.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(o.current),[]),[r,n,a]}function Tc(e,t,r){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let i=Ax(e,Math.max(a,0));n.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==r?c:void 0}function Ax(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var Px=rc,Ac=sc,Mx=ac,Ix=ic,Ox=lc,Pc=cc,Lx=hc,Mc=gc,Ic=vc,_x=yc,Dx=wc,Oc=Sc,Lc=Nc,_c=jc;const Dc=Px,Fc=Mx,Pn=d.forwardRef(({className:e,children:t,...r},o)=>s.jsxs(Ac,{ref:o,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(Ix,{asChild:!0,children:s.jsx(Ai,{className:"h-4 w-4 opacity-50"})})]}));Pn.displayName=Ac.displayName;const Bc=d.forwardRef(({className:e,...t},r)=>s.jsx(Oc,{ref:r,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ju,{className:"h-4 w-4"})}));Bc.displayName=Oc.displayName;const $c=d.forwardRef(({className:e,...t},r)=>s.jsx(Lc,{ref:r,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ai,{className:"h-4 w-4"})}));$c.displayName=Lc.displayName;const Mn=d.forwardRef(({className:e,children:t,position:r="popper",...o},n)=>s.jsx(Ox,{children:s.jsxs(Pc,{ref:n,className:ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...o,children:[s.jsx(Bc,{}),s.jsx(Lx,{className:ee("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx($c,{})]})}));Mn.displayName=Pc.displayName;const Fx=d.forwardRef(({className:e,...t},r)=>s.jsx(Mc,{ref:r,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Fx.displayName=Mc.displayName;const In=d.forwardRef(({className:e,children:t,...r},o)=>s.jsxs(Ic,{ref:o,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Dx,{children:s.jsx(yr,{className:"h-4 w-4"})})}),s.jsx(_x,{children:t})]}));In.displayName=Ic.displayName;const Bx=d.forwardRef(({className:e,...t},r)=>s.jsx(_c,{ref:r,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));Bx.displayName=_c.displayName;function $x(e,t=[]){let r=[];function o(a,i){const l=d.createContext(i),c=r.length;r=[...r,i];function u(h){const{scope:f,children:g,...v}=h,p=(f==null?void 0:f[e][c])||l,x=d.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:x,children:g})}function m(h,f){const g=(f==null?void 0:f[e][c])||l,v=d.useContext(g);if(v)return v;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,m]}const n=()=>{const a=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[o,Hx(n,...t)]}function Hx(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=o.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var fs="rovingFocusGroup.onEntryFocus",Ux={bubbles:!1,cancelable:!0},Uo="RovingFocusGroup",[Ys,Hc,Wx]=Js(Uo),[zx,Uc]=$x(Uo,[Wx]),[Vx,Gx]=zx(Uo),Wc=d.forwardRef((e,t)=>s.jsx(Ys.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Ys.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(qx,{...e,ref:t})})}));Wc.displayName=Uo;var qx=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:n=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...h}=e,f=d.useRef(null),g=fe(t,f),v=Rn(a),[p=null,x]=vr({prop:i,defaultProp:l,onChange:c}),[y,b]=d.useState(!1),w=_e(u),S=Hc(r),j=d.useRef(!1),[T,E]=d.useState(0);return d.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(fs,w),()=>R.removeEventListener(fs,w)},[w]),s.jsx(Vx,{scope:r,orientation:o,dir:v,loop:n,currentTabStopId:p,onItemFocus:d.useCallback(R=>x(R),[x]),onItemShiftTab:d.useCallback(()=>b(!0),[]),onFocusableItemAdd:d.useCallback(()=>E(R=>R+1),[]),onFocusableItemRemove:d.useCallback(()=>E(R=>R-1),[]),children:s.jsx(X.div,{tabIndex:y||T===0?-1:0,"data-orientation":o,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:z(e.onMouseDown,()=>{j.current=!0}),onFocus:z(e.onFocus,R=>{const C=!j.current;if(R.target===R.currentTarget&&C&&!y){const k=new CustomEvent(fs,Ux);if(R.currentTarget.dispatchEvent(k),!k.defaultPrevented){const L=S().filter(I=>I.focusable),M=L.find(I=>I.active),_=L.find(I=>I.id===p),F=[M,_,...L].filter(Boolean).map(I=>I.ref.current);Gc(F,m)}}j.current=!1}),onBlur:z(e.onBlur,()=>b(!1))})})}),zc="RovingFocusGroupItem",Vc=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:n=!1,tabStopId:a,...i}=e,l=Po(),c=a||l,u=Gx(zc,r),m=u.currentTabStopId===c,h=Hc(r),{onFocusableItemAdd:f,onFocusableItemRemove:g}=u;return d.useEffect(()=>{if(o)return f(),()=>g()},[o,f,g]),s.jsx(Ys.ItemSlot,{scope:r,id:c,focusable:o,active:n,children:s.jsx(X.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:z(e.onMouseDown,v=>{o?u.onItemFocus(c):v.preventDefault()}),onFocus:z(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:z(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=Qx(v,u.orientation,u.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=h().filter(b=>b.focusable).map(b=>b.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const b=y.indexOf(v.currentTarget);y=u.loop?Xx(y,b+1):y.slice(b+1)}setTimeout(()=>Gc(y))}})})})});Vc.displayName=zc;var Kx={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yx(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Qx(e,t,r){const o=Yx(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Kx[o]}function Gc(e,t=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function Xx(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var Jx=Wc,Zx=Vc,On="Radio",[ev,qc]=Cr(On),[tv,rv]=ev(On),Kc=d.forwardRef((e,t)=>{const{__scopeRadio:r,name:o,checked:n=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u,...m}=e,[h,f]=d.useState(null),g=fe(t,x=>f(x)),v=d.useRef(!1),p=h?u||!!h.closest("form"):!0;return s.jsxs(tv,{scope:r,checked:n,disabled:i,children:[s.jsx(X.button,{type:"button",role:"radio","aria-checked":n,"data-state":Xc(n),"data-disabled":i?"":void 0,disabled:i,value:l,...m,ref:g,onClick:z(e.onClick,x=>{n||c==null||c(),p&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),p&&s.jsx(ov,{control:h,bubbles:!v.current,name:o,value:l,checked:n,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});Kc.displayName=On;var Yc="RadioIndicator",Qc=d.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:o,...n}=e,a=rv(Yc,r);return s.jsx(Gr,{present:o||a.checked,children:s.jsx(X.span,{"data-state":Xc(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})})});Qc.displayName=Yc;var ov=e=>{const{control:t,checked:r,bubbles:o=!0,...n}=e,a=d.useRef(null),i=Tn(r),l=hn(t);return d.useEffect(()=>{const c=a.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==r&&h){const f=new Event("click",{bubbles:o});h.call(c,r),c.dispatchEvent(f)}},[i,r,o]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Xc(e){return e?"checked":"unchecked"}var sv=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ln="RadioGroup",[nv,Fv]=Cr(Ln,[Uc,qc]),Jc=Uc(),Zc=qc(),[av,iv]=nv(Ln),ed=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:o,defaultValue:n,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:m=!0,onValueChange:h,...f}=e,g=Jc(r),v=Rn(u),[p,x]=vr({prop:a,defaultProp:n,onChange:h});return s.jsx(av,{scope:r,name:o,required:i,disabled:l,value:p,onValueChange:x,children:s.jsx(Jx,{asChild:!0,...g,orientation:c,dir:v,loop:m,children:s.jsx(X.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...f,ref:t})})})});ed.displayName=Ln;var td="RadioGroupItem",rd=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:o,...n}=e,a=iv(td,r),i=a.disabled||o,l=Jc(r),c=Zc(r),u=d.useRef(null),m=fe(t,u),h=a.value===n.value,f=d.useRef(!1);return d.useEffect(()=>{const g=p=>{sv.includes(p.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",v)}},[]),s.jsx(Zx,{asChild:!0,...l,focusable:!i,active:h,children:s.jsx(Kc,{disabled:i,required:a.required,checked:h,...c,...n,name:a.name,ref:m,onCheck:()=>a.onValueChange(n.value),onKeyDown:z(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:z(n.onFocus,()=>{var g;f.current&&((g=u.current)==null||g.click())})})})});rd.displayName=td;var lv="RadioGroupIndicator",od=d.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...o}=e,n=Zc(r);return s.jsx(Qc,{...n,...o,ref:t})});od.displayName=lv;var sd=ed,nd=rd,cv=od;const ad=d.forwardRef(({className:e,...t},r)=>s.jsx(sd,{className:ee("grid gap-2",e),...t,ref:r}));ad.displayName=sd.displayName;const Qs=d.forwardRef(({className:e,...t},r)=>s.jsx(nd,{ref:r,className:ee("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(cv,{className:"flex items-center justify-center",children:s.jsx(tf,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Qs.displayName=nd.displayName;const hs=["Like New","Very Good","Good","Fair","Poor"],uo="No Preference",dv=()=>{var R;const e=Gt(),t=ko(),{user:r}=Rr(),[o,n]=d.useState(""),[a,i]=d.useState([]),[l,c]=d.useState(null),[u,m]=d.useState(!1),[h,f]=d.useState(!1),[g,v]=d.useState("have"),[p,x]=d.useState(""),[y,b]=d.useState({condition:""}),[w,S]=d.useState(hs);d.useEffect(()=>{g==="want"?S([...hs,uo]):(S(hs),y.condition===uo&&b(C=>({...C,condition:""})))},[g,y.condition]),d.useEffect(()=>{if(!r){e("/auth");return}async function C(){try{const k=je(Y,te.PROFILES,r.uid),L=await st(k);if(L.exists()){const M=L.data();M.neighborhood?x(M.neighborhood):(le.error("Please set your default neighborhood in your profile first."),e("/profile"))}else le.error("Profile not found. Please complete your profile."),e("/profile")}catch(k){le.error("Error fetching your neighborhood from profile."),console.error("Error fetching profile neighborhood:",k)}}C()},[r,e]),d.useEffect(()=>{new URLSearchParams(t.search).get("type")==="want"&&v("want")},[t]);const j=async()=>{if(o.trim()){m(!0);try{const C=await Jp(o);i(C)}catch(C){console.error("Search error:",C),le.error("Error searching for books")}finally{m(!1)}}},T=C=>{c(C),i([]),n("")},E=async C=>{var L,M,_;C.preventDefault();let k=y.condition;if(g==="want"&&y.condition===uo&&(k="any"),!l||!k||!r||!p){p?k?le.error("Please fill in all required fields and ensure your neighborhood is set in your profile."):le.error("Please select a book condition."):le.error("Your default neighborhood is not set. Please update your profile.");return}f(!0);try{const A=(L=l.volumeInfo.imageLinks)!=null&&L.thumbnail?"#"+l.id.slice(0,6):"#436B95",F={title:l.volumeInfo.title,author:((M=l.volumeInfo.authors)==null?void 0:M[0])||"Unknown Author",description:l.volumeInfo.description||"",cover_color:A,condition:k,neighborhood:p,google_books_id:l.id,genres:l.volumeInfo.categories||[]};if(g==="have"){const I={...F,owner:{id:r.uid,name:r.email||r.displayName||"Anonymous",neighborhood:p}},B=await _p(I);try{const P=Pe(be(Y,te.WANTED_BOOKS),Me("title","==",l.volumeInfo.title),Me("neighborhood","==",p)),$=await Ie(P);for(const he of $.docs){const G=he.data().user_id;if(G===(r==null?void 0:r.uid))continue;const{shouldSend:Q,email:ge}=await Nn(G,"book_availability");await jn("book_availability",ge,Q,G)?console.log(` Immediate book availability notification sent to user ${G}`):console.warn(` Failed to send immediate book availability notification to user ${G}`)}}catch(P){console.error("Error sending book availability notifications:",P)}le.success("Book added to your collection!")}else{const I={title:l.volumeInfo.title,author:((_=l.volumeInfo.authors)==null?void 0:_[0])||"Unknown Author",description:l.volumeInfo.description||"",google_books_id:l.id,user_id:r.uid,condition:k,neighborhood:p,genres:l.volumeInfo.categories||[]};await Dp(I),le.success("Book added to your want list!")}e("/my-books")}catch(A){console.error("Submission error:",A),le.error(`Error adding book: ${A.message||"Unknown error"}`)}finally{f(!1)}};return s.jsx(we,{children:s.jsxs("div",{className:"page-container max-w-3xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Add Your Book"}),s.jsxs("div",{className:"mb-8 bg-muted/30 p-4 rounded-lg border",children:[s.jsx(Ot,{className:"text-lg font-medium mb-3 block",children:"What would you like to do?"}),s.jsxs(ad,{value:g,onValueChange:C=>{v(C),C==="have"&&y.condition===uo&&b(k=>({...k,condition:""}))},className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:`flex items-start space-x-2 border rounded-lg p-3 ${g==="have"?"bg-primary/10 border-primary":"bg-white"}`,children:[s.jsx(Qs,{value:"have",id:"have",className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ot,{htmlFor:"have",className:"text-base font-medium flex items-center",children:[s.jsx(_r,{className:"mr-2 h-5 w-5 text-primary"}),"Add a book I have"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add a book to your collection that you are willing to swap with others"})]})]}),s.jsxs("div",{className:`flex items-start space-x-2 border rounded-lg p-3 ${g==="want"?"bg-primary/10 border-primary":"bg-white"}`,children:[s.jsx(Qs,{value:"want",id:"want",className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(Ot,{htmlFor:"want",className:"text-base font-medium flex items-center",children:[s.jsx(Ti,{className:"mr-2 h-5 w-5 text-primary"}),"Add a book I want"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add a book to your wishlist that you are looking to acquire"})]})]})]})]}),s.jsx("div",{className:"bg-white border border-border rounded-lg p-6 md:p-8",children:s.jsx("form",{onSubmit:E,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ot,{children:"Search for your book"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ut,{value:o,onChange:C=>n(C.target.value),placeholder:"Search by title, author, or ISBN",className:"flex-1"}),s.jsxs(U,{type:"button",onClick:j,disabled:u,children:[u?s.jsx(yo,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(br,{className:"w-4 h-4 mr-2"}),u?"Searching...":"Search"]})]}),a.length>0&&s.jsx("div",{className:"mt-4 border rounded-md divide-y",children:a.map(C=>{var k;return s.jsxs("div",{className:"p-4 hover:bg-gray-50 cursor-pointer flex items-start gap-4",onClick:()=>T(C),children:[((k=C.volumeInfo.imageLinks)==null?void 0:k.thumbnail)&&s.jsx("img",{src:C.volumeInfo.imageLinks.thumbnail,alt:C.volumeInfo.title,className:"w-16 h-auto object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:C.volumeInfo.title}),C.volumeInfo.authors&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",C.volumeInfo.authors.join(", ")]}),C.volumeInfo.publishedDate&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Published: ",new Date(C.volumeInfo.publishedDate).getFullYear()]})]})]},C.id)})}),l&&s.jsx("div",{className:"mt-4 p-4 border rounded-md bg-muted/20",children:s.jsxs("div",{className:"flex items-start gap-4",children:[((R=l.volumeInfo.imageLinks)==null?void 0:R.thumbnail)&&s.jsx("img",{src:l.volumeInfo.imageLinks.thumbnail,alt:l.volumeInfo.title,className:"w-20 h-auto"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium",children:l.volumeInfo.title}),l.volumeInfo.authors&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["by ",l.volumeInfo.authors.join(", ")]}),l.volumeInfo.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-3",children:l.volumeInfo.description}),s.jsx(U,{type:"button",variant:"ghost",className:"mt-2 h-8 text-sm",onClick:()=>c(null),children:"Change Book"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ot,{htmlFor:"condition",children:"Condition *"}),s.jsxs(Dc,{value:y.condition,onValueChange:C=>b(k=>({...k,condition:C})),children:[s.jsx(Pn,{id:"condition",children:s.jsx(Fc,{placeholder:"Select condition"})}),s.jsx(Mn,{children:w.map(C=>s.jsx(In,{value:C,children:C},C))})]})]}),p&&s.jsxs("div",{children:[s.jsx(Ot,{className:"block text-sm font-medium mb-1",children:"Your Default Neighborhood (from profile)"}),s.jsx("p",{className:"text-md p-2 border rounded-md bg-muted/50",children:p})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx(U,{type:"submit",className:"w-full",disabled:!l||!y.condition||!p||h,children:h?s.jsxs(s.Fragment,{children:[s.jsx(yo,{className:"w-4 h-4 mr-2 animate-spin"}),g==="have"?"Adding to Collection...":"Adding to Want List..."]}):g==="have"?"Add Book to My Collection":"Add Book to My Want List"})})]})})}),s.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[s.jsx("p",{children:"All books added are available for swapping. There are no points or financial transactions."}),s.jsx("p",{children:"Book Swap Jerusalem is based on goodwill and community sharing."})]})]})})},uv=()=>{const{user:e}=Rr(),{data:t=[],isLoading:r,error:o}=zt({queryKey:["matches",e==null?void 0:e.uid],queryFn:async()=>{if(!e)throw new Error("Not authenticated");const i=e.uid,l=await Pl(i),c=await Ml(i),u=be(Y,te.BOOKS),m=Pe(u,Me("owner.id","!=",i)),f=(await Ie(m)).docs.map(w=>({id:w.id,...w.data()})),g=be(Y,te.WANTED_BOOKS),v=Pe(g,Me("user_id","!=",i)),x=(await Ie(v)).docs.map(w=>({id:w.id,...w.data()})),y={};f.forEach(w=>{const S=w.owner.id;y[S]||(y[S]={id:S,name:w.owner.name||"Unknown User",neighborhood:w.owner.neighborhood||"Unknown",books:[],wantedBooks:[]}),y[S].books.push(w)}),x.forEach(w=>{const S=w.user_id;y[S]&&y[S].wantedBooks.push(w)});const b=[];for(const w in y){const S=y[w],j=S.books,T=S.wantedBooks||[],E=[],R=[];let C=0;for(const k of j){const L=c.some(_=>_.title.toLowerCase()===k.title.toLowerCase()&&_.author.toLowerCase()===k.author.toLowerCase()&&(_.condition==="any"||_.condition===k.condition)),M={id:k.id,title:k.title,author:k.author,coverColor:k.cover_color||"#436B95",description:k.description||"",condition:k.condition,owner:{name:S.name,neighborhood:S.neighborhood}};L?(E.push(M),C+=5):c.some(A=>A.author.toLowerCase()===k.author.toLowerCase()&&(A.condition==="any"||A.condition===k.condition))?(E.push(M),C+=2):c.some(F=>{const I=F.title.toLowerCase().split(" "),B=k.title.toLowerCase().split(" ");return I.some(P=>P.length>3&&B.includes(P))&&(F.condition==="any"||F.condition===k.condition)})&&(E.push(M),C+=1)}for(const k of l){const L=T.some(_=>_.title.toLowerCase()===k.title.toLowerCase()&&_.author.toLowerCase()===k.author.toLowerCase()&&(_.condition==="any"||_.condition===k.condition)),M={id:k.id,title:k.title,author:k.author,coverColor:k.cover_color||"#436B95",description:k.description||"",condition:k.condition,owner:{name:e.displayName||e.email||"You",neighborhood:k.neighborhood}};L?(R.push(M),C+=5):T.some(A=>A.author.toLowerCase()===k.author.toLowerCase()&&(A.condition==="any"||A.condition===k.condition))?(R.push(M),C+=2):T.some(F=>{const I=F.title.toLowerCase().split(" "),B=k.title.toLowerCase().split(" ");return I.some(P=>P.length>3&&B.includes(P))&&(F.condition==="any"||F.condition===k.condition)})&&(R.push(M),C+=1)}if(E.length>0||R.length>0){const k=Math.min(Math.round(C/2),10);b.push({user:{id:w,name:S.name,neighborhood:S.neighborhood,booksOffered:E,booksWanted:R},matchScore:k})}}return b.sort((w,S)=>S.matchScore-w.matchScore)},enabled:!!e}),n=i=>{ye({title:"Swap requested",description:"We'll notify you when the owner responds."})},a=i=>{navigate(`/chat/${i}`),ye({title:"Chat started",description:"You can now coordinate the book swap."})};return e?r?s.jsx(we,{children:s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"section-heading",children:"Your Book Swap Matches"}),s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("p",{className:"text-lg",children:"Loading matches..."})})]})}):o?s.jsx(we,{children:s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"section-heading",children:"Your Book Swap Matches"}),s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg text-red-600 font-medium mb-2",children:"Error loading matches"}),s.jsx("p",{className:"text-muted-foreground",children:o.message||"Please try again later"})]})})]})}):s.jsx(we,{children:s.jsxs("div",{className:"page-container",children:[s.jsx("h1",{className:"section-heading",children:"Your Book Swap Matches"}),s.jsx("p",{className:"text-center text-muted-foreground mb-8 max-w-2xl mx-auto",children:"These are potential swap partners based on the books you have listed and the books you are looking for. Higher match scores indicate more opportunities to swap multiple books with the same person."}),t.length===0?s.jsxs("div",{className:"bg-white border border-border rounded-lg p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-bold mb-3",children:"No Matches Found Yet"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"To increase your chances of finding matches:"}),s.jsxs("ul",{className:"text-left max-w-md mx-auto space-y-2 mb-6",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"Add more books that you are willing to swap"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"Add books you are looking for to your wishlist"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2",children:""}),s.jsx("span",{children:"Check back regularly as new books are added daily"})]})]}),s.jsx(U,{asChild:!0,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/add",children:"Add More Books"})})]}):s.jsx("div",{className:"space-y-10",children:t.map(i=>s.jsxs("div",{className:"bg-white border border-border rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-bookswap-blue p-4 md:p-6 flex flex-col md:flex-row justify-between items-start md:items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold mb-1",children:i.user.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Neighborhood: ",i.user.neighborhood,"  Match Score: ",i.matchScore,"/10"]})]}),s.jsxs(U,{variant:"outline",className:"mt-3 md:mt-0 bg-white",onClick:()=>a(i.user.id),children:[s.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Message"]})]}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Books They Have (That You Might Like)"}),i.user.booksOffered.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:i.user.booksOffered.map(l=>s.jsx(Us,{book:l,onRequestSwap:n},l.id))}):s.jsx("p",{className:"text-muted-foreground",children:"No matching books found in this category."})]}),s.jsxs("div",{className:"pt-4 border-t border-border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Books (That They Might Like)"}),i.user.booksWanted.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:i.user.booksWanted.map(l=>s.jsx(Us,{book:l,onRequestSwap:n},l.id))}):s.jsx("p",{className:"text-muted-foreground",children:"No matching books found in this category."})]})]})]},i.user.id))})]})}):s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-muted-foreground",children:"Please sign in to see your matches"}),s.jsx(U,{asChild:!0,className:"mt-4 bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/auth",children:"Sign In"})})]})})})},fv=["image/jpeg","image/png","image/gif","image/webp","video/mp4","video/webm","video/quicktime","video/x-msvideo","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],Ma=50*1024*1024,Ia=5,id=e=>fv.includes(e.type)?e.size>Ma?{valid:!1,error:`File size ${(e.size/1024/1024).toFixed(1)}MB exceeds the maximum limit of ${Ma/1024/1024}MB.`}:{valid:!0}:{valid:!1,error:`File type ${e.type} is not supported. Allowed types: images, videos, PDFs, Word documents, and text files.`},ld=e=>{if(e.length>Ia)return{valid:!1,error:`Too many files. Maximum ${Ia} files allowed per message.`};for(const t of e){const r=id(t);if(!r.valid)return r}return{valid:!0}},hv=async(e,t,r,o)=>{const n=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,a=`${n}_${e.name}`,i=`chat-attachments/${t}/${r}/${a}`;try{const l=id(e);if(!l.valid)throw new Error(l.error);o==null||o({fileId:n,progress:0,status:"uploading"});const c=Ud(Ap,i),u={contentType:e.type,customMetadata:{uploadedBy:r,chatId:t,originalName:e.name}},m=Wd(c,e,u);return new Promise((h,f)=>{m.on("state_changed",g=>{const v=g.bytesTransferred/g.totalBytes*100;o==null||o({fileId:n,progress:Math.round(v),status:"uploading"})},g=>{console.error("Upload error:",g),o==null||o({fileId:n,progress:0,status:"error",error:`Upload failed: ${g.message}`}),f(new Error(`Upload failed: ${g.message}`))},async()=>{try{const g=await zd(m.snapshot.ref);o==null||o({fileId:n,progress:100,status:"completed"});const v={id:n,name:e.name,type:e.type,size:e.size,url:g,path:i,uploadedAt:new Date,uploadedBy:r};h(v)}catch(g){console.error("Error getting download URL:",g),o==null||o({fileId:n,progress:0,status:"error",error:"Failed to get download URL"}),f(new Error("Failed to get download URL"))}})})}catch(l){throw console.error("File upload error:",l),o==null||o({fileId:n,progress:0,status:"error",error:l instanceof Error?l.message:"Upload failed"}),l}},mv=async(e,t,r,o)=>{const n=ld(e);if(!n.valid)throw new Error(n.error);const a=e.map(i=>hv(i,t,r,o));return Promise.all(a)},pv=e=>e.startsWith("image/")?"":e.startsWith("video/")?"":e==="application/pdf"?"":e.includes("word")||e.includes("document")?"":e==="text/plain"?"":"",cd=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,o)).toFixed(2))+" "+r[o]},xo=e=>e.startsWith("image/"),vo=e=>e.startsWith("video/"),gv=({chatId:e,userId:t,onFilesUploaded:r,disabled:o=!1})=>{const n=d.useRef(null),[a,i]=d.useState([]),[l,c]=d.useState(!1),[u,m]=d.useState({}),h=x=>{const y=Array.from(x.target.files||[]);if(y.length===0)return;const b=ld(y);if(!b.valid){ye({title:"File validation error",description:b.error,variant:"destructive"});return}const w=y.map(S=>{const j=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,T={file:S,id:j};if(xo(S.type)){const E=new FileReader;E.onload=R=>{var C;T.preview=(C=R.target)==null?void 0:C.result,i(k=>k.map(L=>L.id===j?{...L,preview:T.preview}:L))},E.readAsDataURL(S)}else if(vo(S.type)){const E=new FileReader;E.onload=R=>{var C;T.preview=(C=R.target)==null?void 0:C.result,i(k=>k.map(L=>L.id===j?{...L,preview:T.preview}:L))},E.readAsDataURL(S)}return T});i(S=>[...S,...w]),n.current&&(n.current.value="")},f=x=>{i(y=>y.filter(b=>b.id!==x))},g=async()=>{if(a.length!==0){c(!0),m({});try{const x=a.map(b=>b.file),y=await mv(x,e,t,b=>{m(w=>({...w,[b.fileId]:b}))});r(y),i([]),m({}),ye({title:"Files uploaded successfully",description:`${y.length} file${y.length>1?"s":""} uploaded`})}catch(x){ye({title:"Upload failed",description:x instanceof Error?x.message:"Failed to upload files",variant:"destructive"})}finally{c(!1)}}},v=x=>{x.preventDefault();const y=Array.from(x.dataTransfer.files);if(y.length>0){const b=n.current;if(b){const w=new DataTransfer;y.forEach(S=>w.items.add(S)),b.files=w.files,h({target:b})}}},p=x=>{x.preventDefault()};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{type:"button",variant:"outline",size:"icon",onClick:()=>{var x;return(x=n.current)==null?void 0:x.click()},disabled:o||l,className:"flex-shrink-0",children:s.jsx(nf,{className:"h-4 w-4"})}),s.jsx(ut,{ref:n,type:"file",multiple:!0,onChange:h,className:"hidden",accept:"image/*,video/*,.pdf,.doc,.docx,.txt"}),a.length>0&&s.jsxs(U,{type:"button",onClick:g,disabled:l,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:[s.jsx(lf,{className:"h-4 w-4 mr-2"}),"Upload ",a.length," file",a.length>1?"s":""]})]}),a.length===0&&s.jsxs("div",{onDrop:v,onDragOver:p,className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center text-sm text-muted-foreground hover:border-bookswap-blue transition-colors",children:["Drop files here or click the paperclip to select files",s.jsx("br",{}),s.jsx("span",{className:"text-xs",children:"Supports: Images, Videos, PDFs, Word docs, Text files (max 50MB each)"})]}),a.length>0&&s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.map(x=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg border",children:[s.jsx("div",{className:"flex-shrink-0",children:x.preview?xo(x.file.type)?s.jsx("img",{src:x.preview,alt:x.file.name,className:"w-10 h-10 object-cover rounded"}):vo(x.file.type)?s.jsx("video",{src:x.preview,className:"w-10 h-10 object-cover rounded",muted:!0}):null:s.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:xo(x.file.type)?s.jsx(sf,{className:"h-5 w-5 text-gray-500"}):vo(x.file.type)?s.jsx(df,{className:"h-5 w-5 text-gray-500"}):s.jsx(rf,{className:"h-5 w-5 text-gray-500"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:x.file.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:cd(x.file.size)})]}),l&&u[x.id]&&s.jsxs("div",{className:"flex-shrink-0 text-xs",children:[u[x.id].status==="uploading"&&s.jsxs("span",{className:"text-blue-600",children:[u[x.id].progress,"%"]}),u[x.id].status==="completed"&&s.jsx("span",{className:"text-green-600",children:""}),u[x.id].status==="error"&&s.jsx("span",{className:"text-red-600",children:""})]}),!l&&s.jsx(U,{type:"button",variant:"ghost",size:"icon",onClick:()=>f(x.id),className:"flex-shrink-0 h-8 w-8",children:s.jsx(Oi,{className:"h-4 w-4"})})]},x.id))})]})},Oa=({attachments:e,isOwnMessage:t=!1})=>{if(!e||e.length===0)return null;const r=a=>{try{const i=document.createElement("a");i.href=a.url,i.download=a.name,i.target="_blank",i.rel="noopener noreferrer",document.body.appendChild(i),i.click(),document.body.removeChild(i),ye({title:"Download started",description:`Downloading ${a.name}...`})}catch(i){console.error("Download failed:",i),ye({title:"Download failed",description:"Please try again or contact support",variant:"destructive"})}},o=a=>{try{window.open(a.url,"_blank","noopener,noreferrer")}catch(i){console.error("Preview failed:",i),ye({title:"Preview failed",description:"Unable to open file preview",variant:"destructive"})}},n=async a=>{try{await navigator.clipboard.writeText(a.url),ye({title:"URL copied",description:"File URL copied to clipboard"})}catch(i){console.error("Copy failed:",i);const l=document.createElement("textarea");l.value=a.url,l.style.position="fixed",l.style.opacity="0",document.body.appendChild(l),l.select();try{document.execCommand("copy"),ye({title:"URL copied",description:"File URL copied to clipboard"})}catch{ye({title:"Copy failed",description:"Unable to copy URL to clipboard",variant:"destructive"})}finally{document.body.removeChild(l)}}};return s.jsx("div",{className:"space-y-2 mt-2",children:e.map(a=>s.jsxs("div",{className:"border border-border rounded-lg p-3 bg-muted/30 max-w-sm",children:[xo(a.type)&&s.jsxs("div",{className:"mb-2 relative group",children:[s.jsx("img",{src:a.url,alt:a.name,className:"max-w-full h-auto rounded cursor-pointer hover:opacity-90 transition-opacity",style:{maxHeight:"200px"},onClick:()=>o(a),onError:i=>{console.error("Image load error:",i),i.target.style.display="none"}}),s.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded flex items-center justify-center space-x-2",children:[s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>o(a),className:"bg-white/90 text-black hover:bg-white",children:s.jsx(Jo,{className:"h-4 w-4"})}),s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>r(a),className:"bg-white/90 text-black hover:bg-white",children:s.jsx(Xo,{className:"h-4 w-4"})}),s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>n(a),className:"bg-white/90 text-black hover:bg-white",children:s.jsx(Qo,{className:"h-4 w-4"})})]})]}),vo(a.type)&&s.jsxs("div",{className:"mb-2 relative group",children:[s.jsx("video",{src:a.url,controls:!0,className:"max-w-full h-auto rounded",style:{maxHeight:"200px"},onError:i=>{console.error("Video load error:",i),i.target.style.display="none"},children:"Your browser does not support the video tag."}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity space-x-1",children:[s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>o(a),className:"bg-white/90 text-black hover:bg-white",title:"Open in new tab",children:s.jsx(Jo,{className:"h-3 w-3"})}),s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>r(a),className:"bg-white/90 text-black hover:bg-white",title:"Download",children:s.jsx(Xo,{className:"h-3 w-3"})}),s.jsx(U,{size:"sm",variant:"secondary",onClick:()=>n(a),className:"bg-white/90 text-black hover:bg-white",title:"Copy URL",children:s.jsx(Qo,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[s.jsx("span",{className:"text-lg",children:pv(a.type)}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:a.name,children:a.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:cd(a.size)})]})]}),s.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>o(a),className:"h-8 w-8 p-0",title:"Preview",children:s.jsx(Jo,{className:"h-3 w-3"})}),s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>r(a),className:"h-8 w-8 p-0",title:"Download",children:s.jsx(Xo,{className:"h-3 w-3"})}),s.jsx(U,{size:"sm",variant:"ghost",onClick:()=>n(a),className:"h-8 w-8 p-0",title:"Copy URL",children:s.jsx(Qo,{className:"h-3 w-3"})})]})]})]},a.id))})};class xv{constructor(){Wn(this,"results",[])}log(t,r,o,n){const a={timestamp:new Date().toISOString(),step:t,status:r,message:o,data:n};this.results.push(a),console.log(`${r==="success"?"":r==="error"?"":""} [DIAGNOSTIC] ${t}: ${o}`,n||"")}async runFullDiagnostic(t,r){console.log(" Starting comprehensive notification diagnostic..."),this.results=[];try{if(this.log("Email Validation","info",`Testing email: ${t}`),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return this.log("Email Validation","error","Invalid email format"),this.results;this.log("Email Validation","success","Email format is valid"),this.log("Service Connectivity","info","Testing email service connection...");try{const u=await fetch("https://w5hni7cponmo.manus.space/api/email/send-new-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(u.ok){const m=await u.json();this.log("Service Connectivity","success","Email service is responsive",m)}else this.log("Service Connectivity","error",`HTTP ${u.status}: ${u.statusText}`)}catch(u){this.log("Service Connectivity","error","Failed to connect to email service",u)}this.log("Immediate Notification","info","Testing immediate notification function...");const i=Date.now(),l=await Hs(t),c=Date.now()-i;l?this.log("Immediate Notification","success",`Notification sent successfully in ${c}ms`):this.log("Immediate Notification","error",`Notification failed after ${c}ms`),this.log("Browser Environment","info","Checking browser capabilities..."),this.log("Browser Environment","info",`User Agent: ${navigator.userAgent}`),this.log("Browser Environment","info",`Online: ${navigator.onLine}`),this.log("Browser Environment","info",`Cookies Enabled: ${navigator.cookieEnabled}`),this.log("Firebase Connection","info","Testing Firebase connectivity...");try{this.log("Firebase Connection","success","Firebase connection appears healthy")}catch(u){this.log("Firebase Connection","error","Firebase connection issue",u)}}catch(a){this.log("Diagnostic Error","error","Unexpected error during diagnostic",a)}const o=this.results.filter(a=>a.status==="success").length,n=this.results.filter(a=>a.status==="error").length;return console.log(` Diagnostic Complete: ${o} successes, ${n} errors`),console.table(this.results),this.results}async quickTest(t){console.log(" Running quick notification test...");try{return await Hs(t)?(console.log(" Quick test PASSED - notification sent successfully"),!0):(console.log(" Quick test FAILED - notification not sent"),!1)}catch(r){return console.log(" Quick test ERROR:",r),!1}}}const La=new xv;typeof window<"u"&&(console.log(" Notification diagnostic tool loaded"),window.testNotifications={runDiagnostic:(e,t)=>La.runFullDiagnostic(e,t),quickTest:e=>La.quickTest(e)},console.log(' Use window.testNotifications.quickTest("your@email.com") to test notifications'),console.log(' Use window.testNotifications.runDiagnostic("your@email.com", "userId") for full diagnostic'));const _a=()=>{var R;const{chatId:e}=kd(),t=Gt(),r=Ll(),[o,n]=d.useState(e||null),[a,i]=d.useState(""),[l,c]=d.useState([]),[u,m]=d.useState(!1),[h,f]=d.useState(!1),[g,v]=d.useState([]),p=wn(),{data:x=[],isLoading:y,error:b}=zt({queryKey:["chats"],queryFn:async()=>{const C=no();if(!C)throw new Error("Not authenticated");const k=C.uid,L=await zp(k);return await Promise.all(L.map(async _=>{var I;const A=(I=_.participants)==null?void 0:I.find(B=>B!==k);let F="Unknown User";if(A)try{const B=await st(je(Y,te.PROFILES,A));if(B.exists()){const P=B.data();F=P.display_name||P.username||"Unknown User"}}catch(B){console.error("Error fetching user profile:",B)}return{id:_.id,name:F,displayName:F,otherUserId:A||"",lastMessage:_.last_message||"No messages yet",lastMessageTime:_.updated_at?new Date(_.updated_at.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",unread:_.unread||!1}}))}});d.useEffect(()=>{e?(n(e),r&&f(!0)):x.length>0&&!o&&(n(x[0].id),r&&f(!1))},[x,e,r]),d.useEffect(()=>{if(!o)return;(async()=>{m(!0);try{const k=no();if(!k)throw new Error("Not authenticated");const L=be(Y,te.MESSAGES),M=Pe(L,Me("chat_id","==",o),Xs("created_at","asc")),_=Vd(M,A=>{const F=A.docs.map(I=>{const B=I.data();return{id:I.id,text:B.content||"",sender:B.sender_id===k.uid?"user":"other",timestamp:B.created_at?new Date(B.created_at.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",sender_id:B.sender_id,attachments:B.attachments||[]}});c(F),m(!1)});return()=>_()}catch(k){console.error("Error loading messages:",k),m(!1),ye({title:"Error loading messages",description:"Unable to load messages. Please try again.",variant:"destructive"})}})()},[o]);const w=async C=>{if(C.preventDefault(),!(!a.trim()&&g.length===0||!o))try{const k=no();if(!k)throw new Error("Not authenticated");await Vp(o,a,k.uid,g),i(""),v([]),p.invalidateQueries({queryKey:["chats"]})}catch(k){ye({title:"Error sending message",description:"Unable to send message. Please try again.",variant:"destructive"}),console.error(k)}},S=C=>{v(k=>[...k,...C])},j=C=>{n(C),t(`/chat/${C}`,{replace:!0}),r&&f(!0)},T=()=>{r&&(f(!1),t("/chat",{replace:!0}))},E=x.find(C=>C.id===o);return y?s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-bookswap-darkblue"})})})}):b?s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-red-600",children:"Error loading chats"}),s.jsx("p",{className:"text-muted-foreground",children:b.message})]})})}):s.jsx(we,{children:s.jsxs("div",{className:"page-container max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(Zt,{className:"h-8 w-8 text-bookswap-darkblue"}),s.jsx("h1",{className:"text-3xl font-bold",children:"Messages"})]}),s.jsx("div",{className:"bg-white border border-border rounded-lg overflow-hidden min-h-[600px] shadow-sm",children:s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:`${r?h?"hidden":"w-full":"w-80"} border-r border-border bg-gray-50/50 ${r?"":"flex-shrink-0"}`,children:[s.jsxs("div",{className:"p-4 border-b border-border bg-white",children:[s.jsxs("h2",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(sn,{className:"h-5 w-5"}),"Conversations"]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[x.length," active conversation",x.length!==1?"s":""]})]}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(600px-80px)]",children:x.length>0?x.map(C=>s.jsx("div",{className:`p-4 cursor-pointer transition-all duration-200 border-l-4 ${o===C.id?"bg-bookswap-blue/10 border-l-bookswap-darkblue shadow-sm":"border-l-transparent hover:bg-gray-100/70"}`,onClick:()=>j(C.id),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg mr-3 ${o===C.id?"bg-bookswap-darkblue text-white":"bg-bookswap-blue text-bookswap-darkblue"}`,children:C.name.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("h3",{className:`font-medium truncate ${o===C.id?"text-bookswap-darkblue":"text-gray-900"}`,children:C.name}),s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap ml-2",children:C.lastMessageTime})]}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:C.lastMessage})]}),C.unread&&s.jsx("div",{className:"w-3 h-3 bg-bookswap-darkblue rounded-full ml-2 flex-shrink-0"})]})},C.id)):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Zt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),s.jsx("p",{className:"text-muted-foreground font-medium",children:"No conversations yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start messaging other users about book swaps"}),s.jsx(U,{asChild:!0,className:"mt-4 bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/books",children:"Browse Books"})})]})})]}),s.jsx("div",{className:`${r?h?"w-full":"hidden":"flex-1"} flex flex-col`,children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b border-border bg-white",children:s.jsxs("div",{className:"flex items-center",children:[r&&s.jsx(U,{variant:"ghost",size:"icon",onClick:T,className:"mr-3",children:s.jsx(Qu,{className:"h-4 w-4"})}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-bookswap-darkblue text-white flex items-center justify-center font-bold text-lg mr-3",children:E.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-lg",children:E.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Book swap conversation"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/30",children:u?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-bookswap-darkblue mx-auto mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})]})}):l.length>0?l.map(C=>s.jsx("div",{className:`flex ${C.sender==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`${r?"max-w-[85%]":"max-w-[75%]"} rounded-2xl px-4 py-3 shadow-sm ${C.sender==="user"?"bg-bookswap-darkblue text-white":"bg-white border border-gray-200"}`,children:[C.text&&s.jsx("p",{className:"text-sm leading-relaxed break-words",children:C.text}),C.attachments&&C.attachments.length>0&&s.jsx(Oa,{attachments:C.attachments,isOwnMessage:C.sender==="user"}),s.jsx("p",{className:`text-xs mt-2 ${C.sender==="user"?"text-white/80":"text-muted-foreground"}`,children:C.timestamp})]})},C.id)):s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Zt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground font-medium",children:"No messages yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start the conversation about your book swap!"})]})})}),s.jsxs("div",{className:"p-4 border-t border-border bg-white space-y-3",children:[E&&s.jsx(gv,{chatId:o,userId:((R=no())==null?void 0:R.uid)||"",onFilesUploaded:S,disabled:u}),g.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground",children:["Ready to send (",g.length," file",g.length>1?"s":"","):"]}),s.jsx(Oa,{attachments:g,isOwnMessage:!1})]}),s.jsxs("form",{onSubmit:w,className:"flex gap-3",children:[s.jsx(ut,{value:a,onChange:C=>i(C.target.value),placeholder:`Message ${E.name}...`,className:"flex-1 rounded-full px-4"}),s.jsx(U,{type:"submit",disabled:!a.trim()&&g.length===0,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90 rounded-full px-6",children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Keep communication focused on book swaps and meeting arrangements."})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50/30",children:s.jsxs("div",{className:"text-center p-8",children:[s.jsx(Zt,{className:"h-20 w-20 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Select a conversation"}),s.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:"Choose a conversation from the sidebar to start messaging, or find new matches to begin swapping books."}),s.jsxs("div",{className:"flex gap-3 justify-center",children:[s.jsx(U,{asChild:!0,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsx(re,{to:"/matches",children:"Find Matches"})}),s.jsx(U,{asChild:!0,variant:"outline",children:s.jsx(re,{to:"/books",children:"Browse Books"})})]})]})})})]})})]})})};function vv({value:e,onSelect:t}){return s.jsxs(Dc,{value:e||"",onValueChange:t,children:[s.jsx(Pn,{className:"w-full",children:s.jsx(Fc,{placeholder:"Select neighborhood"})}),s.jsx(Mn,{children:Ir.map(r=>s.jsx(In,{value:r,children:r},r))})]})}var _n="Checkbox",[yv,Bv]=Cr(_n),[bv,wv]=yv(_n),dd=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:o,checked:n,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:m,...h}=e,[f,g]=d.useState(null),v=fe(t,S=>g(S)),p=d.useRef(!1),x=f?m||!!f.closest("form"):!0,[y=!1,b]=vr({prop:n,defaultProp:a,onChange:u}),w=d.useRef(y);return d.useEffect(()=>{const S=f==null?void 0:f.form;if(S){const j=()=>b(w.current);return S.addEventListener("reset",j),()=>S.removeEventListener("reset",j)}},[f,b]),s.jsxs(bv,{scope:r,state:y,disabled:l,children:[s.jsx(X.button,{type:"button",role:"checkbox","aria-checked":kt(y)?"mixed":y,"aria-required":i,"data-state":hd(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onKeyDown:z(e.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:z(e.onClick,S=>{b(j=>kt(j)?!0:!j),x&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})}),x&&s.jsx(Sv,{control:f,bubbles:!p.current,name:o,value:c,checked:y,required:i,disabled:l,form:m,style:{transform:"translateX(-100%)"},defaultChecked:kt(a)?!1:a})]})});dd.displayName=_n;var ud="CheckboxIndicator",fd=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:o,...n}=e,a=wv(ud,r);return s.jsx(Gr,{present:o||kt(a.state)||a.state===!0,children:s.jsx(X.span,{"data-state":hd(a.state),"data-disabled":a.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});fd.displayName=ud;var Sv=e=>{const{control:t,checked:r,bubbles:o=!0,defaultChecked:n,...a}=e,i=d.useRef(null),l=Tn(r),c=hn(t);d.useEffect(()=>{const m=i.current,h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&g){const v=new Event("click",{bubbles:o});m.indeterminate=kt(r),g.call(m,kt(r)?!1:r),m.dispatchEvent(v)}},[l,r,o]);const u=d.useRef(kt(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kt(e){return e==="indeterminate"}function hd(e){return kt(e)?"indeterminate":e?"checked":"unchecked"}var md=dd,Nv=fd;const pd=d.forwardRef(({className:e,...t},r)=>s.jsx(md,{ref:r,className:ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Nv,{className:ee("flex items-center justify-center text-current"),children:s.jsx(yr,{className:"h-4 w-4"})})}));pd.displayName=md.displayName;function Cv(){const{user:e}=Rr(),t=Gt(),[r,o]=d.useState(!0),[n,a]=d.useState(""),[i,l]=d.useState(""),[c,u]=d.useState(""),[m,h]=d.useState(""),[f,g]=d.useState(!0);d.useEffect(()=>{if(!e){t("/auth");return}async function x(){var y;o(!0);try{const b=je(Y,te.PROFILES,e.uid),w=await st(b);if(w.exists()){const S=w.data();a(S.display_name??""),l(S.bio??""),u(S.neighborhood??""),h(S.neighborhood??""),g(((y=S.email_notifications)==null?void 0:y.new_messages)??!0),!S.email&&e.email&&(console.log("Adding email to existing profile:",e.email),await ms(b,{email:e.email,updated_at:Le()}))}else await Gd(b,{id:e.uid,display_name:"",bio:"",neighborhood:"",email:e.email||"",email_notifications:{new_matches:!0,book_availability:!0,new_messages:!0},created_at:Le(),updated_at:Le()}),h("")}catch(b){console.error("Error loading profile:",b),le.error("Error loading profile")}finally{o(!1)}}x()},[e,t]);async function v(){if(!e||!c){le.error("Neighborhood cannot be empty. Please select a neighborhood.");return}o(!0);try{const x=je(Y,te.PROFILES,e.uid);if(await ms(x,{display_name:n,bio:i,neighborhood:c,email:e.email||"",email_notifications:{new_matches:f,book_availability:f,new_messages:f},updated_at:Le()}),le.success("Profile updated successfully"),c!==m){le.info("Updating neighborhood for your books...");const y=zn(Y),b=Pe(be(Y,te.BOOKS),Me("owner.id","==",e.uid));(await Ie(b)).forEach(T=>{const E=je(Y,te.BOOKS,T.id);y.update(E,{neighborhood:c,"owner.neighborhood":c})});const S=Pe(be(Y,te.WANTED_BOOKS),Me("user_id","==",e.uid));(await Ie(S)).forEach(T=>{const E=je(Y,te.WANTED_BOOKS,T.id);y.update(E,{neighborhood:c})}),await y.commit(),h(c),le.success("Neighborhood for all your books has been updated.")}}catch(x){console.error("Error updating profile or books:",x),le.error("Error updating profile or books. Please try again.")}finally{o(!1)}}async function p(){if(!e||!window.confirm(` WARNING: This action cannot be undone!

Deleting your account will:
 Remove all your books from the platform
 Delete all your messages and chat history
 Remove your profile permanently
 Cancel any pending book swaps

Are you absolutely sure you want to delete your account?`)||!window.confirm(` FINAL WARNING 

This is your last chance to cancel.
Your account and ALL data will be permanently deleted.

Type 'DELETE' in the next prompt to confirm.`))return;if(window.prompt("To confirm account deletion, please type 'DELETE' (all caps):")!=="DELETE"){le.error("Account deletion cancelled. You must type 'DELETE' exactly.");return}o(!0);try{console.log(" Starting account deletion process...");const w=zn(Y);console.log(" Deleting user's books...");const S=Pe(be(Y,te.BOOKS),Me("owner.id","==",e.uid));(await Ie(S)).docs.forEach(_=>{w.delete(_.ref)}),console.log(" Deleting user's wanted books...");const T=Pe(be(Y,te.WANTED_BOOKS),Me("user_id","==",e.uid));(await Ie(T)).docs.forEach(_=>{w.delete(_.ref)}),console.log(" Deleting user's messages...");const R=Pe(be(Y,te.MESSAGES),Me("sender_id","==",e.uid));(await Ie(R)).docs.forEach(_=>{w.delete(_.ref)}),console.log(" Deleting user's chats...");const k=Pe(be(Y,te.CHATS),Me("participants","array-contains",e.uid));(await Ie(k)).docs.forEach(_=>{w.delete(_.ref)}),console.log(" Deleting user profile...");const M=je(Y,te.PROFILES,e.uid);w.delete(M),await w.commit(),console.log(" All user data deleted from Firestore"),console.log(" Deleting user authentication..."),await qd(e),console.log(" User account deleted successfully"),le.success("Account deleted successfully. You will be redirected to the home page."),setTimeout(()=>{t("/")},2e3)}catch(w){console.error(" Error deleting account:",w),w.code==="auth/requires-recent-login"?le.error("For security reasons, you need to sign in again before deleting your account. Please sign out, sign back in, and try again."):le.error("Failed to delete account. Please try again or contact support if the problem persists.")}finally{o(!1)}}return r&&!e?s.jsx(we,{children:s.jsx("div",{className:"page-container flex justify-center items-center min-h-[calc(100vh-200px)]",children:s.jsx("p",{children:"Loading user data..."})})}):r&&e?s.jsx(we,{children:s.jsx("div",{className:"page-container flex justify-center items-center min-h-[calc(100vh-200px)]",children:s.jsx("p",{children:"Loading profile..."})})}):s.jsx(we,{children:s.jsxs("div",{className:"page-container max-w-2xl mx-auto",children:[s.jsx("h1",{className:"section-heading",children:"Profile Settings"}),s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium mb-2",children:"Display Name"}),s.jsx(ut,{id:"displayName",type:"text",value:n,onChange:x=>a(x.target.value),placeholder:"Enter your display name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium mb-2",children:"Bio"}),s.jsx("textarea",{id:"bio",value:i,onChange:x=>l(x.target.value),placeholder:"Write a short bio about yourself",className:"w-full min-h-[100px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Neighborhood (this will apply to all your books)"}),s.jsx(vv,{value:c,onSelect:u})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pd,{id:"emailNotifications",checked:f,onCheckedChange:g}),s.jsx("label",{htmlFor:"emailNotifications",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"I want to receive email notifications about messages, matches, and books on my want list"})]}),s.jsx(U,{onClick:v,disabled:r,className:"w-full",children:r?"Saving...":"Save Changes"}),s.jsx("div",{className:"border-t pt-8 mt-8",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Danger Zone"}),s.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Once you delete your account, there is no going back. This action cannot be undone. All your books, messages, and profile data will be permanently removed."}),s.jsx(U,{onClick:p,disabled:r,variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:r?"Processing...":"Delete Account"})]})})]})})]})})}const jv=()=>{const e=ko();return d.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function kv({booksIHave:e,booksIWant:t}){const[r,o]=d.useState(null),n=wn(),a=async u=>{o(u);try{await Fp(u),le.success("Book removed successfully"),n.invalidateQueries({queryKey:["my-books-have"]})}catch(m){console.error("Error deleting book:",m),le.error("Failed to remove book")}finally{o(null)}},i=async u=>{o(u);try{await Bp(u),le.success("Book removed from wishlist"),n.invalidateQueries({queryKey:["my-books-want"]})}catch(m){console.error("Error deleting wanted book:",m),le.error("Failed to remove book from wishlist")}finally{o(null)}},l=u=>s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:u==="have"?"You haven't added any books you own yet":"You haven't added any books you're looking for yet"}),s.jsx(U,{variant:"default",onClick:()=>window.location.href=u==="have"?"/add":"/add?type=want",children:u==="have"?s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"mr-2 h-4 w-4"}),"Add a Book You Own"]}):s.jsxs(s.Fragment,{children:[s.jsx(br,{className:"mr-2 h-4 w-4"}),"Add a Book You Want"]})})]}),c=(u,m)=>s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:u.map(h=>s.jsxs(kn,{className:"relative",children:[s.jsx(U,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-10",onClick:()=>m==="have"?a(h.id):i(h.id),disabled:r===h.id,children:s.jsx(af,{className:"h-4 w-4"})}),s.jsxs(En,{className:"pt-4",children:[h.google_books_id?s.jsx("div",{className:"w-full h-48 bg-cover bg-center rounded-lg mb-4",style:{backgroundImage:`url(https://books.google.com/books/content?id=${h.google_books_id}&printsec=frontcover&img=1&zoom=1&source=gbs_api)`}}):s.jsxs("div",{className:"w-full h-48 p-4 flex flex-col justify-center items-center text-center rounded-lg mb-4",style:{backgroundColor:h.coverColor||h.cover_color||"#436B95"},children:[s.jsx("h3",{className:"font-bold text-white",children:h.title}),s.jsx("p",{className:"text-sm text-white/80",children:h.author})]}),s.jsx("h3",{className:"font-bold text-lg mb-1",children:h.title}),s.jsx("p",{className:"text-sm font-medium mb-2",children:h.author}),m==="have"&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Condition: ",h.condition]}),m==="want"&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"On your wishlist"})]})]},h.id))});return s.jsx("div",{className:"w-full",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(_r,{className:"mr-2 h-5 w-5"}),s.jsx("h2",{className:"text-xl font-bold",children:"Books I Have"})]}),e.length===0?l("have"):c(e,"have")]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(br,{className:"mr-2 h-5 w-5"}),s.jsx("h2",{className:"text-xl font-bold",children:"Books I Want"})]}),t.length===0?l("want"):c(t,"want")]})]})})}function Ev(){const{user:e}=Rr(),{data:t=[],isLoading:r,error:o}=zt({queryKey:["my-books-have"],queryFn:async()=>{if(!e)return[];try{const h=await Pl(e.uid);return l(h,"have")}catch(h){throw console.error("Error fetching books I have:",h),h}},enabled:!!e}),{data:n=[],isLoading:a,error:i}=zt({queryKey:["my-books-want"],queryFn:async()=>{if(!e)return[];try{const h=await Ml(e.uid);return l(h,"want")}catch(h){throw console.error("Error fetching books I want:",h),h}},enabled:!!e});function l(h,f){const g=[];for(const v of h){const p={id:String(v.id||""),title:String(v.title||""),author:String(v.author||""),coverColor:String(v.cover_color||"#436B95"),description:v.description?String(v.description):"",condition:f==="have"?String(v.condition||"Good"):void 0,owner:f==="have"?{name:c(v.owner,"name"),neighborhood:c(v.owner,"neighborhood")}:void 0,google_books_id:v.google_books_id?String(v.google_books_id):void 0,book_type:f};g.push(p)}return g}function c(h,f){if(h&&typeof h=="object"&&h!==null){const v=h[f];return typeof v=="string"?v:""}return""}if(!e)return s.jsx(we,{children:s.jsx("div",{className:"page-container",children:s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-lg text-muted-foreground",children:"Please sign in to manage your books"})})})});const u=r||a,m=o||i;return s.jsx(we,{children:s.jsxs("div",{className:"page-container",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"My Books"}),s.jsx(U,{asChild:!0,className:"bg-bookswap-darkblue hover:bg-bookswap-darkblue/90",children:s.jsxs(re,{to:"/add",className:"flex items-center",children:[s.jsx(ef,{className:"mr-2 h-4 w-4"}),"Add a Book"]})})]}),u?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-bookswap-darkblue mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading your books..."})]}):m?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-lg text-red-600",children:"Error loading your books"})}):s.jsx(kv,{booksIHave:t,booksIWant:n})]})})}const Rv=new up,Tv=()=>s.jsx(pp,{client:Rv,children:s.jsx(Gp,{children:s.jsxs(Km,{children:[s.jsx(Gf,{}),s.jsx(wh,{}),s.jsx(Ed,{children:s.jsxs(Rd,{children:[s.jsx(Ze,{path:"/",element:s.jsx(ag,{})}),s.jsx(Ze,{path:"/auth",element:s.jsx(dg,{})}),s.jsx(Ze,{path:"/books",element:s.jsx(pg,{})}),s.jsx(Ze,{path:"/add",element:s.jsx(dv,{})}),s.jsx(Ze,{path:"/my-books",element:s.jsx(Ev,{})}),s.jsx(Ze,{path:"/matches",element:s.jsx(uv,{})}),s.jsx(Ze,{path:"/chat",element:s.jsx(_a,{})}),s.jsx(Ze,{path:"/chat/:chatId",element:s.jsx(_a,{})}),s.jsx(Ze,{path:"/profile",element:s.jsx(Cv,{})}),s.jsx(Ze,{path:"*",element:s.jsx(jv,{})})]})})]})})}),Da=document.getElementById("root");if(!Da)console.error("Root element not found");else{const e=Za(Da);try{e.render(s.jsx(Tv,{}))}catch(t){console.error("Error rendering application:",t),e.render(s.jsxs("div",{className:"error-boundary",children:[s.jsx("h1",{children:"Something went wrong"}),s.jsx("p",{children:"The application encountered an error. Please try refreshing the page."}),s.jsx("pre",{children:t instanceof Error?t.message:String(t)})]}))}}
